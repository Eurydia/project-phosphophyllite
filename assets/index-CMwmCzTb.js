import{r as h,j as t,a as Je}from"./react-DaxiNUUd.js";/* empty css                    */import{b as Qe}from"./react-dom-TyGls9Vs.js";import{u as ve,S as Ze}from"./notistack-CwlNOf8C.js";import{u as X,L as z,c as et,a as tt,R as st}from"./react-router-dom-D9W53kLa.js";import{g as rt,h as $}from"./react-router-BQLGHAX6.js";import{B as P,A as nt,T as F,I as T,L as ot,D,a as ce,C as at,b as g,c as k,d as N,e as it,f as L,g as de,h as lt,i as ct,j as dt,k as ut,l as we,m as Se,n as pt,S as _e,M as Ie,o as G,p as Te,q as j,F as Ce,r as Re,s as J,t as Pe,u as mt,v as q,w as H,x as ke,y as ht,z as ge,E as Ee,G as xt,H as ue,J as M,K as ft,N as gt}from"./@mui-Dca6KVst.js";import{h as Oe}from"./moment-Cl4UOzQZ.js";import{o as yt}from"./idb-Dob3nYDb.js";import{O as bt}from"./octokit-DkAYBnXY.js";import{u as jt}from"./unified-yOeLfpSk.js";import{r as vt}from"./remark-parse-EFvJtpNF.js";import{r as wt}from"./remark-gfm-D1kqK4Sh.js";import{r as St}from"./remark-math-gbp4v9sU.js";import{r as _t}from"./remark-rehype-ciVG95nT.js";import{r as It}from"./rehype-sanitize-Ctd_RbWx.js";import{r as Tt}from"./rehype-katex-CKRCsg_g.js";import{r as Ct}from"./rehype-document-Bflo6tOM.js";import{r as Rt}from"./rehype-stringify-lhHBmWf5.js";import{m as Fe}from"./match-sorter-C_hz5zXn.js";import{b as Pt}from"./buffer-BmWqQ0PE.js";import{e as ye}from"./@remix-run-BTQM5VeW.js";import"./@babel-v6KKqBqE.js";import"./scheduler-CKyTKYc2.js";import"./goober-DovPBWGu.js";import"./prop-types-DYSGp4Uy.js";import"./@emotion-Wrr6QDEl.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-ekBNCVQJ.js";import"./react-is-CX4zgkE_.js";import"./@octokit-BoTy5vfR.js";import"./bottleneck-C7iXFTfm.js";import"./universal-user-agent-BARPCsji.js";import"./deprecation-B1cCxCxj.js";import"./once-PUgxwHV9.js";import"./wrappy-DFUwIYTi.js";import"./btoa-lite-CNor66a1.js";import"./before-after-hook-D6paO4wq.js";import"./bail-FqpXQuLt.js";import"./extend-BsYTUkT_.js";import"./is-plain-obj-C1gvLhAf.js";import"./trough-B_b8ryxu.js";import"./vfile-D1_tGWGU.js";import"./vfile-message-Bq256rVA.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./mdast-util-from-markdown-2tgvbwPK.js";import"./micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./micromark-util-decode-string-strjl-tx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-DwZcK08u.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-6dA1Il-k.js";import"./micromark-util-character-DjYUzTuj.js";import"./micromark-core-commonmark-Dhiatyfo.js";import"./micromark-util-classify-character-o5XIcufE.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./micromark-util-subtokenize-QwsxNXk2.js";import"./micromark-factory-destination-BG3Y82VO.js";import"./micromark-factory-label-DJOX7mP1.js";import"./micromark-factory-title-vnv7pB58.js";import"./micromark-factory-whitespace-02qDvY4j.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./mdast-util-to-string-DzL_e8Nz.js";import"./micromark-extension-gfm-C0wcyJXf.js";import"./micromark-extension-gfm-autolink-literal-C1bqX4YS.js";import"./micromark-extension-gfm-footnote-DW4b5mJ1.js";import"./micromark-extension-gfm-strikethrough-DLG0h2kg.js";import"./micromark-extension-gfm-table-bNMuBszt.js";import"./micromark-extension-gfm-task-list-item-9nPgC00f.js";import"./mdast-util-gfm-CwHVOxL1.js";import"./mdast-util-gfm-autolink-literal-D8s825iC.js";import"./ccount-c2V3InAJ.js";import"./devlop-0Dp3JUBc.js";import"./mdast-util-find-and-replace-ClOhUni4.js";import"./unist-util-is-D9KQvrmg.js";import"./unist-util-visit-parents-CUezI4aM.js";import"./mdast-util-gfm-footnote-B3y08S0o.js";import"./mdast-util-gfm-strikethrough-Cj9qKt6Q.js";import"./mdast-util-gfm-table-DXHwCURR.js";import"./markdown-table-De3aUdCo.js";import"./mdast-util-to-markdown-B2xn9m8u.js";import"./longest-streak-CtXnX3Xp.js";import"./unist-util-visit-Dza3JKCM.js";import"./mdast-util-phrasing-C4Vf_nAi.js";import"./mdast-util-gfm-task-list-item-BF8d1Wp-.js";import"./micromark-extension-math-nRJdBzab.js";import"./katex-Dfyhscvt.js";import"./mdast-util-math-Dj7v4WU-.js";import"./mdast-util-to-hast-B1X7BmrI.js";import"./@ungap-DDJC10qW.js";import"./micromark-util-sanitize-uri-CajitOl6.js";import"./unist-util-position-Dg4u7XPN.js";import"./trim-lines-D8znQY54.js";import"./hast-util-sanitize-CJiiCdfB.js";import"./hast-util-from-html-isomorphic-DWKUa-bN.js";import"./hast-util-from-dom-CFM1EDMd.js";import"./web-namespaces-bsVAaBS1.js";import"./hastscript-C3d41mAm.js";import"./property-information-BosuZr9r.js";import"./comma-separated-tokens-CRUGqg4f.js";import"./space-separated-tokens-D7QSIrTI.js";import"./hast-util-parse-selector-TXfch5wI.js";import"./hast-util-to-text-CQFnfAl4.js";import"./hast-util-is-element-DyH4pHXM.js";import"./unist-util-find-after-DoQrf0b7.js";import"./hast-util-to-html-B01rvPa2.js";import"./html-void-elements-CkdplsNl.js";import"./zwitch-C2o2j-tx.js";import"./stringify-entities-DX2AxK7f.js";import"./character-entities-legacy-BpoLgcEt.js";import"./character-entities-html4-D7taRCQ7.js";import"./hast-util-whitespace-D4Wp6AEg.js";import"./remove-accents-ChiVtsaT.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const kt=[{label:"~",path:"/"},{label:"repositories",path:"/repositories"},{label:"issues",path:"/issues"},{label:"settings",path:"/settings"}],A=e=>{const{location:s,children:r,seconadaryAction:n}=e,i=X(),[o,a]=h.useState(!1),l=()=>{a(!o)},p=h.useRef(null),[d,c]=h.useState("0vh");h.useEffect(()=>{if(p===null||p.current===null)return;const m=p.current.getBoundingClientRect().height;c(`calc(100svh - ${m}px)`)},[p]);const u=m=>{i({},{action:m,method:"get"})};return t.jsxs(h.Fragment,{children:[t.jsxs(P,{maxWidth:"100vw",children:[t.jsxs(nt,{ref:p,position:"relative",variant:"elevation",elevation:0,children:[t.jsxs(F,{variant:"dense",sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(T,{size:"small",onClick:l,sx:{flexGrow:0},children:t.jsx(ot,{})}),s,n]}),t.jsx(D,{flexItem:!0,variant:"fullWidth"})]}),t.jsx(P,{height:d,overflow:"auto",children:r})]}),t.jsxs(ce,{open:o,onClose:l,PaperProps:{square:!0,variant:"outlined",elevation:0,sx:{width:240,height:"100%",borderTopWidth:0,borderLeftWidth:0,borderBottomWidth:0}},children:[t.jsxs(F,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(T,{size:"small",onClick:l,children:t.jsx(at,{})}),t.jsx(g,{fontWeight:"bold",children:"Navigation"})]}),t.jsx(D,{}),t.jsx(k,{disablePadding:!0,dense:!0,sx:{wordBreak:"break-word",whiteSpace:"wrap"},children:kt.map(({label:m,path:y})=>t.jsx(N,{disableGutters:!0,children:t.jsx(it,{onClick:()=>u(y),children:t.jsx(L,{children:m})})},y))})]})]})},be=()=>{const{status:e,statusText:s}=rt();return t.jsx(A,{location:e,children:t.jsx(de,{maxWidth:"md",children:t.jsxs(P,{padding:4,children:[t.jsx(g,{component:"h1",variant:"h1",children:e}),t.jsx(g,{paragraph:!0,component:"p",variant:"body1",children:s})]})})})},De="issue-filter-pref-state",Et="issue-filter-pref-owner-type",Ne=[{label:"All",value:"All"},{label:"Open",value:"open"},{label:"Closed",value:"closed"}],Ae=[{label:"All",value:"All"},{label:"Bot",value:"Bot"},{label:"User",value:"User"}],We="repo-filter-pref-topic-match-strategy",Le="repo-filter-pref-visibility",Be="repo-filter-pref-status",Me=[{label:"Match all",value:"Match all"},{label:"Match any",value:"Match any"}],ze=[{label:"All",value:"All"},{label:"Private",value:"Private"},{label:"Public",value:"Public"}],$e=[{label:"All",value:"All"},{label:"Active",value:"Active"},{label:"Archived",value:"Archived"}],K=(e,s)=>{const r=e??!1,n=s??!1;return!r&&n?1:!r&&!n?0:r&&!n?-1:s.localeCompare(e)},Ot=(e,s)=>{const r=!!e,n=!!s;return r===n?0:r&&!n?-1:1},Ft=(e,s)=>{const r=e??!1,n=s??!1;return!r&&n?1:!r&&!n?0:r&&!n?-1:s-e},Dt=(e,s="-")=>e==null||e===""?s:Oe(e).fromNow(),_=(e,s="-")=>e==null||e===""?s:Oe(e).format("MMMM Do YYYY"),W=e=>{const s=_(e),r=Dt(e);return`${s} (${r})`},pe=()=>{const e=localStorage.getItem(Le);return e!==null?e:"All"},Nt=e=>{localStorage.setItem(Le,e)},me=()=>{const e=localStorage.getItem(Be);return e!==null?e:"All"},At=e=>{localStorage.setItem(Be,e)},he=()=>{const e=localStorage.getItem(We);return e!==null?e:"Match all"},Wt=e=>{localStorage.setItem(We,e)},Q=()=>{const e=localStorage.getItem(De);return e!==null?e:"All"},Lt=e=>{localStorage.setItem(De,e)},Z=()=>{const e=localStorage.getItem("issue-filter-pref-owner-type");return e!==null?e:"User"},Bt=e=>{localStorage.setItem(Et,e)},Mt=e=>{const{order:s,orderBy:r,onRequestSort:n,columnDefinition:i}=e,o=a=>l=>{n(a)};return t.jsx(ut,{children:t.jsx(we,{children:i.map(({id:a,label:l},p)=>t.jsx(Se,{sortDirection:r===a?s:void 0,children:t.jsx(pt,{active:r===a,direction:r===a?s:"asc",onClick:o(a),children:l})},`cell-${p}`))})})},zt=e=>{const{item:s,columnDefinition:r}=e;return t.jsx(we,{children:r.map(({render:n},i)=>t.jsx(Se,{children:n(s)},`data-cell-${i}`))})},Ge=e=>{const{orderingFn:s,items:r,columnDefinition:n,defaultOrderBy:i}=e,[o,a]=h.useState("desc"),[l,p]=h.useState(i),d=u=>{a(l===u&&o==="asc"?"desc":"asc"),p(u)},c=h.useMemo(()=>{const u=s(l);if(u===void 0)return r;const m=[...r];return m.sort(u),o==="asc"&&m.reverse(),m},[o,l,r]);return t.jsx(lt,{children:t.jsxs(ct,{children:[t.jsx(Mt,{columnDefinition:n,onRequestSort:d,order:o,orderBy:l}),t.jsx(dt,{children:c.map((u,m)=>t.jsx(zt,{item:u,columnDefinition:n},`data-cell-item-${m}`))})]})})},I=e=>{const{options:s,...r}=e,n=s??[];return t.jsx(_e,{...r,children:n.map(({value:i,label:o},a)=>t.jsx(Ie,{disableRipple:!0,value:i,children:o},`${i}-${a}`))})},Ue=e=>{const{options:s,subheader:r,...n}=e,i=s??[];return t.jsxs(_e,{...n,multiple:!0,children:[r!==""&&r!==void 0&&t.jsx(G,{disableSticky:!0,children:r}),i.map(({value:o,label:a},l)=>t.jsx(Ie,{disableRipple:!0,value:o,children:a},`${o}-${l}`))]})},qe=e=>{const{onEnter:s,onChange:r,...n}=e,i=a=>{if(a.key==="Enter"&&s!==void 0){console.log("entered"),s();return}},o=a=>{r!==void 0&&r(a.target.value.normalize())};return t.jsx(Te,{...n,onKeyUp:i,onChange:o})},$t=[{id:"title",label:"Title",render:e=>t.jsx(g,{component:z,to:`/repositories/${e.repo_full_name}/issues/${e.issue_number}`,children:e.title})},{id:"repo_full_name",label:"Repository",render:e=>t.jsx(g,{component:z,to:{pathname:`/repositories/${e.repo_full_name}`},children:e.repo_full_name})},{id:"issue_number",label:"Issue number",render:e=>e.issue_number},{id:"owner_type",label:"Type",render:e=>e.owner_type},{id:"state",label:"State",render:e=>Pe(e.state)},{id:"updated_at",label:"Last updated",render:e=>_(e.updated_at,"Never")},{id:"created_at",label:"Created",render:e=>_(e.created_at,"Unknown")}],Gt=e=>{let s;switch(e){case"issue_number":s=(r,n)=>Ft(r[e],n[e]);break;case"title":case"repo_full_name":case"owner_type":case"state":case"created_at":case"updated_at":s=(r,n)=>K(r[e],n[e])}return s},ie=e=>{const{text:s,children:r}=e;return t.jsx(N,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(L,{sx:{width:"max(200px, 40%)"},children:s}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:r})]})})},xe=e=>{const{orderBy:s,disableFilter:r,repoOptions:n,issues:i,title:o,repoFullNames:a,ownerType:l,state:p}=e,d=X(),[c,u]=h.useState(o??""),m=a??[],y=l??Z(),f=p??Q(),x=(v,C)=>{d({title:c,state:f,ownerType:y,repoFullNames:m,[v]:C},{action:"./",method:"get"})},b=v=>{const C=v.target.value;x("ownerType",C)},w=v=>{const C=v.target.value;x("state",C)},se=v=>{const C=v.target.value;x("repoFullNames",C.toString())},re=()=>{x("repoFullNames","")},ne=()=>{x("title",c)},[U,oe]=h.useState(!1),ae=()=>{oe(!U)};return t.jsxs(P,{children:[!r&&t.jsxs(h.Fragment,{children:[t.jsxs(F,{disableGutters:!0,variant:"dense",sx:{flexDirection:"row",width:"100%",flexWrap:"wrap",gap:1,alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(j,{alignItems:"center",direction:"row",children:[t.jsx(qe,{autoComplete:"off",placeholder:"Search issue",size:"small",value:c,onChange:u,onEnter:ne}),t.jsx(T,{size:"small",onClick:ae,children:t.jsx(Ce,{})})]}),t.jsxs(g,{children:["Showing ",i.length," ",i.length===1?"issue":"issues"]})]}),t.jsx(Re,{in:U,children:t.jsxs(k,{disablePadding:!0,children:[t.jsxs(ie,{text:"Repositories",children:[t.jsx(Ue,{fullWidth:!0,displayEmpty:!0,subheader:"Repositories",renderValue:v=>`${v.length} selected`,size:"small",value:m,options:n,onChange:se}),t.jsx(T,{size:"small",onClick:re,children:t.jsx(J,{})})]}),t.jsx(ie,{text:"State",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:f,options:Ne,onChange:w})}),t.jsx(ie,{text:"State",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:y,options:Ae,onChange:b})})]})})]}),t.jsx(Ge,{items:i,columnDefinition:$t,defaultOrderBy:s??"updated_at",orderingFn:Gt})]})},Ut=[{id:"full_name",label:"Name",render:e=>t.jsx(g,{component:z,to:`/repositories/${e.full_name}`,children:e.full_name})},{id:"is_archived",label:"Status",render:e=>e.is_archived?"Archived":"Active"},{id:"is_private",label:"Visibility",render:e=>e.is_private?"Private":"Public"},{id:"pushed_at",label:"Last pushed",render:e=>_(e.pushed_at,"Never")},{id:"updated_at",label:"Last updated",render:e=>_(e.updated_at,"Never")},{id:"created_at",label:"Created",render:e=>_(e.created_at,"Unknown")}],qt=e=>{switch(e){case"is_archived":case"is_private":return(s,r)=>Ot(s[e],r[e]);case"full_name":case"pushed_at":case"created_at":case"updated_at":return(s,r)=>K(s[e],r[e])}},Y=e=>{const{text:s,children:r}=e;return t.jsx(N,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(L,{sx:{width:"max(200px, 40%)"},children:s}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:r})]})})},He=e=>{const{orderBy:s,disableFilter:r,repos:n,topicOptions:i,name:o,topicMatchStrategy:a,status:l,topics:p,visibility:d}=e,c=X(),[u,m]=h.useState(o||""),y=p??[],f=a||he(),x=d||pe(),b=l||me(),w=(S,R)=>{c({name:u,topics:y,topicMatchStrategy:f,visibility:x,status:b,[S]:R},{action:"./",method:"get"})},se=()=>{w("name",u)},re=S=>{const R=S.target.value;w("topicMatchStrategy",R)},ne=S=>{const R=S.target.value;w("status",R)},U=S=>{const R=S.target.value;w("visibility",R)},oe=S=>{const R=S.target.value;w("topics",R.toString())},ae=()=>{w("topics","value.toString()")},[v,C]=h.useState(!1),Xe=()=>{C(!v)};return t.jsxs(P,{children:[!r&&t.jsxs(h.Fragment,{children:[t.jsxs(F,{disableGutters:!0,variant:"dense",sx:{flexDirection:"row",width:"100%",flexWrap:"wrap",gap:1,alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(j,{alignItems:"center",direction:"row",children:[t.jsx(qe,{autoComplete:"off",placeholder:"Search repository",size:"small",value:u,onChange:m,onEnter:se}),t.jsx(T,{size:"small",onClick:Xe,children:t.jsx(Ce,{})})]}),t.jsxs(g,{children:["Showing ",n.length," ",n.length===1?"repository":"repositories"]})]}),t.jsx(Re,{in:v,children:t.jsxs(k,{disablePadding:!0,children:[t.jsxs(Y,{text:"Topics",children:[t.jsx(Ue,{fullWidth:!0,displayEmpty:!0,subheader:"Topics",renderValue:S=>`${S.length} selected`,size:"small",value:y,options:i,onChange:oe}),t.jsx(T,{size:"small",onClick:ae,children:t.jsx(J,{})})]}),t.jsx(Y,{text:"Topic match strategy",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:f,options:Me,onChange:re})}),t.jsx(Y,{text:"Visibility",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:x,options:ze,onChange:U})}),t.jsx(Y,{text:"Status",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:b,options:$e,onChange:ne})})]})})]}),t.jsx(Ge,{items:n,orderingFn:qt,defaultOrderBy:s??"pushed_at",columnDefinition:Ut})]})},B=e=>{const{path:s,breadcrumbsProps:r,typographyProps:n}=e,i=s.normalize().split("/"),o=i.filter(a=>a.trim().length>0).map((a,l)=>h.createElement(g,{...n,key:`${l}-${a}`,color:"text.secondary",whiteSpace:"nowrap",component:z,to:"/"+i.slice(1,l+1).join("/"),sx:{textDecoration:"none"}},a));return t.jsx(mt,{...r,children:o})},Ht=()=>{const{activeRepos:e,archivedRepos:s,closedIssues:r,openIssues:n,recentRepos:i,recentIssues:o}=$();return t.jsx(A,{location:t.jsx(B,{path:"~",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsxs(j,{spacing:2,padding:4,children:[t.jsxs(j,{flexDirection:"row",flexWrap:"wrap",alignItems:"center",gap:1,children:[t.jsx(q,{variant:"outlined",sx:{flexGrow:1,minWidth:250},children:t.jsx(H,{title:e,subheader:e>1?"Active repositories":"Active repositoriy",titleTypographyProps:{color:"secondary"}})}),t.jsx(q,{variant:"outlined",sx:{flexGrow:1,minWidth:250},children:t.jsx(H,{title:s,subheader:s>1?"Archived repositories":"Archived repositoriy",titleTypographyProps:{color:"secondary"}})}),t.jsx(q,{variant:"outlined",sx:{flexGrow:1,minWidth:250},children:t.jsx(H,{title:n,subheader:n>1?"Open issues":"Open issue",titleTypographyProps:{color:"secondary"}})}),t.jsx(q,{variant:"outlined",sx:{flexGrow:1,minWidth:250},children:t.jsx(H,{title:r,subheader:r>1?"Closed issues":"Closed issue",titleTypographyProps:{color:"secondary"}})})]}),t.jsx(g,{fontSize:"large",fontWeight:"bold",children:"Recent repositories"}),t.jsx(He,{repos:i,orderBy:"pushed_at",disableFilter:!0}),t.jsx(g,{fontSize:"large",fontWeight:"bold",children:"Recent issues"}),t.jsx(xe,{issues:o,orderBy:"updated_at",disableFilter:!0})]})})},E=yt("primary",1,{upgrade(e){const s=e.createObjectStore("repos",{keyPath:"id",autoIncrement:!1});s.createIndex("by-full_name","full_name",{unique:!0,multiEntry:!1}),s.createIndex("by-id","id",{unique:!0,multiEntry:!1}),e.createObjectStore("issues",{keyPath:"id",autoIncrement:!1}).createIndex("by-repo_id","repo_id",{multiEntry:!0,unique:!1}),e.createObjectStore("issueComments",{keyPath:"id",autoIncrement:!1}).createIndex("by-issue_id","issue_id",{multiEntry:!0,unique:!1})}}),Yt=()=>{const e=localStorage.getItem("personal-access-token");return e===null?"-1":e},ee=()=>{const e=Yt();return new bt({auth:e})},Vt=async()=>{const r=(await ee().paginate("GET /user/repos")).map(async({name:i,full_name:o,topics:a,created_at:l,updated_at:p,description:d,id:c,html_url:u,homepage:m,pushed_at:y,archived:f,private:x})=>({id:c,html_url:u,homepage:m,pushed_at:y,name:i,full_name:o,description:d,topics:a,created_at:l,updated_at:p,is_archived:f,is_private:x,readme:await Kt(o).catch(b=>{if(b.status!==404)throw b})}));return await Promise.all(r)},Kt=async e=>{const s=ee(),[r,n]=e.split("/");return(await s.request("GET /repos/{owner}/{repo}/readme",{owner:r,repo:n})).data.content},Xt=async(e,s)=>{const r=ee(),[n,i]=e.split("/");return(await r.paginate("GET /repos/{owner}/{repo}/issues",{owner:n,repo:i,state:"all"})).map(({id:l,html_url:p,number:d,title:c,state:u,locked:m,created_at:y,updated_at:f,closed_at:x,body:b,user:w})=>({owner_type:w===null?null:w.type,repo_id:s,repo_full_name:e,id:l,html_url:p,issue_number:d,title:c,state:u,locked:m,created_at:y,updated_at:f,closed_at:x,body:b}))},Jt=async(e,s,r)=>{const n=ee(),[i,o]=e.split("/");return(await n.paginate("GET /repos/{owner}/{repo}/issues/{issue_number}/comments",{owner:i,repo:o,issue_number:s})).map(({id:p,html_url:d,created_at:c,updated_at:u,body:m})=>({issue_id:r,html_url:d,id:p,created_at:c,updated_at:u,body:m}))},te=async()=>(await E).getAll("repos"),Ye=async e=>(await E).getFromIndex("repos","by-full_name",e),Qt=async()=>{const e=await te(),s=new Set;for(const n of e)if(n.topics!==void 0)for(const i of n.topics)s.add(i);const r=[...s];return r.sort(),r},fe=async()=>E.then(e=>e.getAll("issues")),Ve=async e=>{const s=await Ye(e);return s===void 0?[]:(await E).getAllFromIndex("issues","by-repo_id",s.id)},Zt=async(e,s)=>{const r=await Ve(e);for(const n of r)if(n.issue_number===s)return n},es=async e=>(await E).getAllFromIndex("issueComments","by-issue_id",e),ts=async e=>{const s=await E,r=e.map(i=>s.put("repos",i));return await Promise.all(r)},ss=async e=>{const s=await E,r=e.map(i=>s.put("issues",i));return await Promise.all(r)},rs=async e=>{const s=await E;return await Promise.all(e.map(r=>s.put("issueComments",r)))},ns=async e=>await Vt().then(s=>(ts(s),[!0]),s=>(e(s),[!1])),os=async e=>{const s=await te();return await Promise.all(s.map(async r=>await Xt(r.full_name,r.id).then(n=>(ss(n),!0),n=>(e(n),!1))))},as=async e=>{const s=await fe();return await Promise.all(s.map(async r=>await Jt(r.repo_full_name,r.issue_number,r.id).then(n=>(rs(n),!0),n=>(e(n),!1))))},is=async()=>{document.title="~";const e=await te(),s=(await fe()).filter(({owner_type:d})=>d==="User"),r=e.filter(({is_archived:d})=>!d).length,n=e.length-r,i=s.filter(({state:d})=>d==="open").length,o=s.length-i;e.sort(({pushed_at:d},{pushed_at:c})=>K(d,c)),s.sort(({updated_at:d},{updated_at:c})=>K(d,c));const a=e.slice(0,5),l=s.slice(0,5);return{activeRepos:r,archivedRepos:n,openIssues:i,closedIssues:o,recentIssues:l,recentRepos:a}},ls=e=>jt().use(vt,{fragment:!0}).use(wt).use(St).use(_t).use(It).use(Tt).use(Ct,{css:"https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"}).use(Rt).processSync(e.normalize()).toString().replace("<table","<div style='display: block; width: 100%; overflow-x: auto'><table").replace("</table>","</table></div>"),le=e=>{const{markdownContent:s,emptyText:r,sx:n,...i}=e,o=h.useRef(null);return h.useEffect(()=>{if(s==null||o===null||o.current===null)return;const a=ls(s);o.current.innerHTML=a},[s]),t.jsx(g,{...i,ref:o,component:"div",display:"block",width:"100%",sx:{...n,overflowX:"auto",fontFamily:"IBM Plex Serif",wordBreak:"break-word",wordWrap:"break-word"},children:r})},cs=[{label:"Title",render:e=>e.title},{label:"State",render:e=>Pe(e.state)},{label:"Owner type",render:e=>e.owner_type??"Unknown"},{label:"Last modified",render:e=>e.updated_at?W(e.updated_at):"Never"},{label:"Closed",render:e=>e.closed_at?W(e.closed_at):"Not closed"},{label:"Created",render:e=>e.created_at?W(e.created_at):"Unknown"},{label:"Links",render:e=>t.jsx(g,{component:"a",href:e.html_url,target:"_blank",children:"Github issue"})}],ds=()=>{const{issue:e,comments:s}=$(),[r,n]=h.useState(!1),i=()=>{n(!r)},o=()=>{n(!1)};return t.jsxs(h.Fragment,{children:[t.jsx(A,{location:t.jsx(B,{path:`~/repositories/${e.repo_full_name}/issues/${e.issue_number}`,breadcrumbsProps:{sx:{overflow:"auto",flexGrow:{xs:0,sm:1}}}}),seconadaryAction:t.jsx(T,{onClick:i,size:"small",disableRipple:!0,children:t.jsx(ke,{})}),children:t.jsx(de,{maxWidth:"sm",children:t.jsxs(j,{spacing:2,padding:2,divider:t.jsx(D,{flexItem:!0,variant:"fullWidth"}),children:[t.jsx(le,{markdownContent:e.body??void 0,emptyText:"This issue does not have a body or its body is not cached."}),s.map((a,l)=>t.jsxs(P,{children:[t.jsxs(g,{fontWeight:"bold",children:["Comment #",l+1]}),t.jsx(le,{markdownContent:a.body??void 0,emptyText:"This comment does not have a body or its body not is cached."})]},`comment-${a.id}`))]})})}),t.jsxs(ce,{elevation:0,anchor:"right",variant:"temporary",open:r,onClose:o,children:[t.jsxs(F,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(g,{fontWeight:"bold",children:"Metadata"}),t.jsx(T,{size:"small",onClick:o,children:t.jsx(J,{})})]}),t.jsx(D,{flexItem:!0,variant:"fullWidth"}),t.jsx(k,{disablePadding:!0,dense:!0,children:cs.map(({label:a,render:l})=>t.jsx(N,{children:t.jsx(L,{secondary:l(e),children:a})},a))})]})]})},us=async({params:e})=>{const s=e.owner,r=e.repo,n=e.issueNumber;if(s===void 0||r===void 0||n===void 0)throw new Response("",{status:400,statusText:"Bad requeset"});if(!Number.isSafeInteger(Number.parseInt(n)))throw new Response("",{status:400,statusText:"Bad requeset"});const i=`${s}/${r}`,o=await Zt(i,Number.parseInt(n));if(o===void 0)throw new Response("Not found",{status:404,statusText:"Issue does not exist or it is not cached."});return document.title=o.title,{issue:o,comments:await es(o.id)}},ps=()=>{const{issues:e,repoOptions:s,title:r,ownerType:n,repoFullNames:i,state:o}=$();return t.jsx(A,{location:t.jsx(B,{path:"~/issues",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsx(P,{paddingTop:2,paddingX:2,children:t.jsx(xe,{issues:e,repoOptions:s,title:r,ownerType:n,repoFullNames:i,state:o})})})},ms=(e,s,r,n,i,o)=>{let a=[...e];return n==="Private"&&(a=a.filter(l=>l.is_private)),n==="Public"&&(a=a.filter(l=>!l.is_private)),i==="Archived"&&(a=a.filter(l=>l.is_archived)),i==="Active"&&(a=a.filter(l=>!l.is_archived)),r.length>0&&o==="Match all"&&(a=a.filter(l=>r.every(p=>l.topics===void 0?!1:l.topics.includes(p)))),r.length>0&&o==="Match any"&&(a=a.filter(l=>r.some(p=>l.topics===void 0?!1:l.topics.includes(p)))),a=Fe(a,s,{keys:["full_name"]}),a},Ke=(e,s,r,n,i)=>{let o=[...e];return r!=="All"&&(o=o.filter(a=>a.owner_type===r)),n.length>0&&(o=o.filter(a=>n.includes(a.repo_full_name))),i!=="All"&&(o=o.filter(a=>a.state===i)),o=Fe(o,s,{keys:["title"]}),o},hs=async({request:e})=>{document.title="issues";let s=await fe();const n=[...new Set(s.map(({repo_full_name:u})=>u).filter(u=>u.length>0))];n.sort();const i=n.map(u=>({label:u,value:u})),o=new URL(e.url).searchParams,a=o.get("repoFullNames");let l=[];a!==null&&(l=a.normalize().trim().split(",").map(u=>u.trim()).filter(u=>u.length>0));const p=o.get("title")||"",d=o.get("ownerType")||Z(),c=o.get("state")||Q();return s=Ke(s,p,d,l,c),{issues:s,repoOptions:i,title:p,ownerType:d,repoFullNames:l,state:c}},xs=e=>et(e).toString(),fs=[{label:"Description",render:e=>e.description??"No description"},{label:"Last pushed",render:e=>e.pushed_at?W(e.pushed_at):"Never"},{label:"Last updated",render:e=>e.updated_at?W(e.updated_at):"Never"},{label:"Created",render:e=>e.created_at?W(e.created_at):"Unknown"},{label:"Visibility",render:e=>e.is_private?"Private":"Public"},{label:"Status",render:e=>e.is_private?"Archived":"Active"},{label:"Links",render:e=>t.jsxs(j,{component:"span",flexDirection:"row",flexWrap:"wrap",gap:1,children:[t.jsx(g,{component:"a",href:e.html_url,target:"_blank",children:"GitHub repository"}),t.jsx(g,{component:"a",href:e.homepage??void 0,target:"_blank",children:"Homepage"})]})},{label:"Topics",render:e=>e.topics&&e.topics.length>0?t.jsx(j,{component:"span",gap:1,flexDirection:"row",flexWrap:"wrap",children:e.topics.map(s=>t.jsx(g,{component:z,to:{pathname:"/repositories",search:xs({topics:s})},children:s},s))}):"No topic assigned"}],gs=()=>{const{repoOptions:e,repo:s,issues:r,title:n,ownerType:i,repoFullNames:o,state:a,tab:l}=$(),p=X(),d=(x,b)=>{p({tab:b},{action:"./",method:"get"})},[c,u]=h.useState(!1),m=()=>{u(!c)},y=()=>{u(!1)};let f;return s.readme!==void 0&&(f=Pt.Buffer.from(s.readme,"base64").toString()),t.jsxs(A,{location:t.jsx(B,{path:`~/repositories/${s.full_name}`,breadcrumbsProps:{sx:{overflow:"auto",flexGrow:{xs:0,sm:1}}}}),seconadaryAction:t.jsx(T,{disableRipple:!0,onClick:m,size:"small",sx:{flexGrow:0},children:t.jsx(ke,{})}),children:[t.jsx(F,{disableGutters:!0,variant:"dense",children:t.jsxs(ht,{value:l,onChange:d,children:[t.jsx(ge,{value:"readme",label:"Readme"}),t.jsx(ge,{value:"issues",label:"Issues"})]})}),t.jsx(D,{}),l!=="issues"?t.jsx(de,{maxWidth:"sm",children:t.jsx(le,{emptyText:"This repository does not contain a readme.",markdownContent:f})}):t.jsx(P,{padding:2,children:t.jsx(xe,{repoOptions:e,issues:r,title:n,ownerType:i,repoFullNames:o,state:a})}),t.jsxs(ce,{elevation:0,anchor:"right",open:c,onClose:y,PaperProps:{sx:{width:240}},children:[t.jsxs(F,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(g,{fontWeight:"bold",children:"Metadata"}),t.jsx(T,{size:"small",onClick:y,children:t.jsx(J,{})})]}),t.jsx(D,{flexItem:!0,variant:"fullWidth"}),t.jsx(k,{disablePadding:!0,dense:!0,children:fs.map(({label:x,render:b})=>t.jsx(N,{children:t.jsx(L,{secondary:b(s),children:x})},x))})]})]})},ys=async({params:e,request:s})=>{const r=e.owner,n=e.repo;if(r===void 0||n===void 0)throw new Response("",{status:400,statusText:"Bad requeset"});const i=`${r}/${n}`;let o=await Ye(i);if(o===void 0)throw new Response("Not found",{status:404,statusText:"Repository not found in cache"});document.title=o.name;const a=new URL(s.url).searchParams,l=a.get("tab")==="issues"?"issues":"readme",p=a.get("title")||"",d=a.get("ownerType")||Z(),c=a.get("state")||Q();let u=await Ve(o.full_name);const m=[o.full_name];u=Ke(u,p,d,m,c);const y=[{label:o.full_name,value:o.full_name}];return{repo:o,issues:u,title:p,ownerType:d,repoFullNames:m,state:c,repoOptions:y,tab:l}},bs=()=>{const{repos:e,topicOptions:s,topics:r,name:n,visibility:i,status:o,topicMatchStrategy:a}=$();return t.jsx(A,{location:t.jsx(B,{path:"~/repositories",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsx(P,{padding:2,children:t.jsx(He,{topicOptions:s,repos:e,topics:r,name:n,visibility:i,status:o,topicMatchStrategy:a})})})},js=async({request:e})=>{document.title="repositories";const s=(await Qt()).map(c=>({label:c,value:c}));let r=await te();const n=new URL(e.url).searchParams,i=n.get("topics");let o=[];i!==null&&(o=i.normalize().trim().split(",").map(c=>c.trim()).filter(c=>c.length>0));const a=n.get("name")||"",l=n.get("status")||me(),p=n.get("visibility")||pe(),d=n.get("topicMatchStrategy")||he();return r=ms(r,a,o,p,l,d),{topicOptions:s,repos:r,topics:o,name:a,visibility:p,status:l,topicMatchStrategy:d}},O=e=>{const{secondary:s,primary:r,children:n}=e;return t.jsx(N,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(L,{primary:r,secondary:s,sx:{width:"max(200px, 40%)"}}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:n})]})})},vs=()=>{const{enqueueSnackbar:e}=ve(),[s,r]=h.useState(localStorage.getItem("personal-access-token")??""),n=o=>{const a=o.target.value.normalize();r(a)},i=()=>{localStorage.setItem("personal-access-token",s),e({message:"Updated personal access token",variant:"info"})};return t.jsxs(k,{disablePadding:!0,subheader:t.jsx(G,{disableGutters:!0,disableSticky:!0,children:"API"}),children:[t.jsx(O,{primary:"Personal access token (classic)",children:t.jsx(Te,{fullWidth:!0,placeholder:"ghp_",type:"password",value:s,onChange:n,size:"small"})}),t.jsx(N,{disableGutters:!0,children:t.jsx(Ee,{disableElevation:!0,size:"small",variant:"contained",onClick:i,children:"Update"})})]})},ws=()=>{const[e,s]=h.useState(Z()),[r,n]=h.useState(Q()),i=a=>{const l=a.target.value;Bt(l),s(l)},o=a=>{const l=a.target.value;Lt(l),n(l)};return t.jsxs(k,{disablePadding:!0,subheader:t.jsx(G,{disableGutters:!0,disableSticky:!0,children:"Issue filter preferences"}),children:[t.jsx(O,{primary:"Owner type",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:e,options:Ae,onChange:i})}),t.jsx(O,{primary:"State",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:r,options:Ne,onChange:o})})]})},Ss=()=>{const[e,s]=h.useState(he()),[r,n]=h.useState(pe()),[i,o]=h.useState(me()),a=d=>{const c=d.target.value;Wt(c),s(c)},l=d=>{const c=d.target.value;Nt(c),n(c)},p=d=>{const c=d.target.value;At(c),o(c)};return t.jsxs(k,{disablePadding:!0,subheader:t.jsx(G,{disableGutters:!0,disableSticky:!0,children:"Repository filter preferences"}),children:[t.jsx(O,{primary:"Match strategy",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:e,options:Me,onChange:a})}),t.jsx(O,{primary:"Visibility",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:r,options:ze,onChange:l})}),t.jsx(O,{primary:"Status",children:t.jsx(I,{fullWidth:!0,displayEmpty:!0,size:"small",value:i,options:$e,onChange:p})})]})},je=[{key:"last-sync-repos",successMsg:"repsitories",promise:e=>ns(e)},{key:"last-sync-issues",successMsg:"issues",promise:e=>os(e)},{key:"last-sync-comments",successMsg:"comments",promise:e=>as(e)}],_s=[_(localStorage.getItem("last-sync-repos"),"Never"),_(localStorage.getItem("last-sync-issues"),"Never"),_(localStorage.getItem("last-sync-comments"),"Never")],Is=()=>{const{enqueueSnackbar:e}=ve(),s=localStorage.getItem("personal-access-token")??"",[r,n]=h.useState([!1,!1,!1]),[i,o]=h.useState(_s),a=d=>{throw e({message:String(d),variant:"error"}),d},l=async d=>{n(f=>{const x=[...f];return x[d]=!0,x});const{promise:c,successMsg:u,key:m}=je[d];if((await c(a)).every(f=>f)){e({message:`Synced ${u}`,variant:"success"});const f=new Date(Date.now()).toISOString();localStorage.setItem(m,f),o(x=>{const b=[...x];return b[d]=_(f),b})}n(f=>{const x=[...f];return x[d]=!1,x})},p=h.useMemo(()=>!s,[s]);return t.jsx(k,{disablePadding:!0,subheader:t.jsx(G,{disableGutters:!0,disableSticky:!0,children:"Synchronization"}),children:je.map(({successMsg:d},c)=>t.jsx(O,{primary:`Sync ${d}`,secondary:`Last sync: ${i[c]}`,children:t.jsx(Ee,{fullWidth:!0,disableElevation:!0,disabled:p||r[c],size:"small",variant:"contained",onClick:()=>l(c),children:r[c]?t.jsx(xt,{disableShrink:!0,size:28}):`Sync ${d}`})},`sync-item-${c}`))})},Ts=()=>t.jsx(A,{location:t.jsx(B,{path:"~/settings",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsxs(j,{paddingTop:2,paddingX:2,spacing:1,divider:t.jsx(D,{variant:"middle"}),children:[t.jsx(Ss,{}),t.jsx(ws,{}),t.jsx(vs,{}),t.jsx(Is,{})]})}),V=ue({palette:{mode:"dark",primary:{main:M("#00D3D0",.7)},secondary:{main:"#D68F3E"},background:{default:"#1B1D2D",paper:"#1B1D2D"},text:{primary:M("#fff",.67),secondary:M("#fff",.5)}}}),Cs=ue({components:{MuiBreadcrumbs:{styleOverrides:{ol:{flexWrap:"nowrap",width:"100%"}}},MuiCssBaseline:{styleOverrides:{html:{backgroundColor:V.palette.background},"*":{scrollbarWidth:"thin"},pre:{width:"100%",overflow:"auto"},table:{minWidth:"max-content",borderSpacing:"1rem 0.5rem"},a:{transition:"color 0.3s ease",color:M(V.palette.primary.main,.78),"&:hover":{color:M(V.palette.secondary.main,.78)}}}}}}),Rs=ue({palette:V.palette,components:Cs.components}),Ps=tt([{index:!0,element:t.jsx(Ht,{}),loader:is,errorElement:t.jsx(be,{})},{path:"/",errorElement:t.jsx(be,{}),children:[{path:"/repositories",element:t.jsx(bs,{}),loader:js},{path:"/repositories/:owner",element:null,loader:({params:e})=>ye(`/repositories/?name=${e.owner}`)},{path:"/repositories/:owner/:repo",element:t.jsx(gs,{}),loader:ys},{path:"/repositories/:owner/:repo/issues/:issueNumber",element:t.jsx(ds,{}),loader:us},{path:"/repositories/:owner/:repo/issues",element:null,loader:({params:e})=>ye(`/repositories/${e.owner}/${e.repo}/?tab=issues`)},{path:"/issues",element:t.jsx(ps,{}),loader:hs},{path:"/settings",element:t.jsx(Ts,{})}]}],{basename:"/"}),ks=()=>t.jsxs(ft,{theme:Rs,children:[t.jsx(gt,{}),t.jsx(Ze,{preventDuplicate:!0,maxSnack:3,autoHideDuration:3500,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(st,{router:Ps})})]});Qe.createRoot(document.getElementById("root")).render(t.jsx(Je.StrictMode,{children:t.jsx(ks,{})}));
//# sourceMappingURL=index-CMwmCzTb.js.map
