import{r as h,j as t,a as He}from"./react-DaxiNUUd.js";/* empty css                    */import{b as Ye}from"./react-dom-TyGls9Vs.js";import{u as me,S as Ve}from"./notistack-CwlNOf8C.js";import{u as se,L as q,c as Ke,a as Xe,R as Je}from"./react-router-dom-Ba_yztWA.js";import{g as Qe,h as H}from"./react-router-DFg_wNBT.js";import{B as P,A as Ze,T as N,I as _,L as et,D as F,a as re,C as tt,b as y,c as S,d as C,e as st,f as k,g as ne,h as rt,i as he,S as j,P as nt,j as Y,k as fe,l as at,m as ot,n as it,o as lt,p as xe,q as ge,r as ct,s as ye,t as W,M as be,u as je,F as we,v as ve,w as dt,x as de,y as _e,z as ut,E as ae,G as z,H as pt,J as mt}from"./@mui-B0-j382W.js";import{m as oe}from"./match-sorter-C_hz5zXn.js";import{O as ht}from"./octokit-DkAYBnXY.js";import{o as ft}from"./idb-Dob3nYDb.js";import{u as xt}from"./unified-yOeLfpSk.js";import{r as gt}from"./remark-parse-EFvJtpNF.js";import{r as yt}from"./remark-gfm-D1kqK4Sh.js";import{r as bt}from"./remark-math-gbp4v9sU.js";import{r as jt}from"./remark-rehype-ciVG95nT.js";import{r as wt}from"./rehype-sanitize-Ctd_RbWx.js";import{r as vt}from"./rehype-katex-CKRCsg_g.js";import{r as _t}from"./rehype-document-Bflo6tOM.js";import{r as St}from"./rehype-stringify-lhHBmWf5.js";import{h as Se}from"./moment-Cl4UOzQZ.js";import{b as It}from"./buffer-BmWqQ0PE.js";import"./@babel-v6KKqBqE.js";import"./scheduler-CKyTKYc2.js";import"./goober-DovPBWGu.js";import"./@remix-run-BMytVWaH.js";import"./prop-types-DYSGp4Uy.js";import"./@emotion-Wrr6QDEl.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-ekBNCVQJ.js";import"./react-is-CX4zgkE_.js";import"./remove-accents-ChiVtsaT.js";import"./@octokit-BoTy5vfR.js";import"./bottleneck-C7iXFTfm.js";import"./universal-user-agent-BARPCsji.js";import"./deprecation-B1cCxCxj.js";import"./once-PUgxwHV9.js";import"./wrappy-DFUwIYTi.js";import"./btoa-lite-CNor66a1.js";import"./before-after-hook-D6paO4wq.js";import"./bail-FqpXQuLt.js";import"./extend-BsYTUkT_.js";import"./is-plain-obj-C1gvLhAf.js";import"./trough-B_b8ryxu.js";import"./vfile-D1_tGWGU.js";import"./vfile-message-Bq256rVA.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./mdast-util-from-markdown-2tgvbwPK.js";import"./micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./micromark-util-decode-string-strjl-tx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-DwZcK08u.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-6dA1Il-k.js";import"./micromark-util-character-DjYUzTuj.js";import"./micromark-core-commonmark-Dhiatyfo.js";import"./micromark-util-classify-character-o5XIcufE.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./micromark-util-subtokenize-QwsxNXk2.js";import"./micromark-factory-destination-BG3Y82VO.js";import"./micromark-factory-label-DJOX7mP1.js";import"./micromark-factory-title-vnv7pB58.js";import"./micromark-factory-whitespace-02qDvY4j.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./mdast-util-to-string-DzL_e8Nz.js";import"./micromark-extension-gfm-C0wcyJXf.js";import"./micromark-extension-gfm-autolink-literal-C1bqX4YS.js";import"./micromark-extension-gfm-footnote-DW4b5mJ1.js";import"./micromark-extension-gfm-strikethrough-DLG0h2kg.js";import"./micromark-extension-gfm-table-bNMuBszt.js";import"./micromark-extension-gfm-task-list-item-9nPgC00f.js";import"./mdast-util-gfm-CwHVOxL1.js";import"./mdast-util-gfm-autolink-literal-D8s825iC.js";import"./ccount-c2V3InAJ.js";import"./devlop-0Dp3JUBc.js";import"./mdast-util-find-and-replace-ClOhUni4.js";import"./unist-util-is-D9KQvrmg.js";import"./unist-util-visit-parents-CUezI4aM.js";import"./mdast-util-gfm-footnote-B3y08S0o.js";import"./mdast-util-gfm-strikethrough-Cj9qKt6Q.js";import"./mdast-util-gfm-table-DXHwCURR.js";import"./markdown-table-De3aUdCo.js";import"./mdast-util-to-markdown-B2xn9m8u.js";import"./longest-streak-CtXnX3Xp.js";import"./unist-util-visit-Dza3JKCM.js";import"./mdast-util-phrasing-C4Vf_nAi.js";import"./mdast-util-gfm-task-list-item-BF8d1Wp-.js";import"./micromark-extension-math-nRJdBzab.js";import"./katex-Dfyhscvt.js";import"./mdast-util-math-Dj7v4WU-.js";import"./mdast-util-to-hast-B1X7BmrI.js";import"./@ungap-DDJC10qW.js";import"./micromark-util-sanitize-uri-CajitOl6.js";import"./unist-util-position-Dg4u7XPN.js";import"./trim-lines-D8znQY54.js";import"./hast-util-sanitize-CJiiCdfB.js";import"./hast-util-from-html-isomorphic-DWKUa-bN.js";import"./hast-util-from-dom-CFM1EDMd.js";import"./web-namespaces-bsVAaBS1.js";import"./hastscript-C3d41mAm.js";import"./property-information-BosuZr9r.js";import"./comma-separated-tokens-CRUGqg4f.js";import"./space-separated-tokens-D7QSIrTI.js";import"./hast-util-parse-selector-TXfch5wI.js";import"./hast-util-to-text-CQFnfAl4.js";import"./hast-util-is-element-DyH4pHXM.js";import"./unist-util-find-after-DoQrf0b7.js";import"./hast-util-to-html-B01rvPa2.js";import"./html-void-elements-CkdplsNl.js";import"./zwitch-C2o2j-tx.js";import"./stringify-entities-DX2AxK7f.js";import"./character-entities-legacy-BpoLgcEt.js";import"./character-entities-html4-D7taRCQ7.js";import"./hast-util-whitespace-D4Wp6AEg.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const Tt=[{label:"~",path:"/"},{label:"Repositories",path:"/repositories"},{label:"Issues",path:"/issues"},{label:"Settings",path:"/settings"}],A=e=>{const{location:s,children:r,seconadaryAction:n}=e,i=se(),[a,o]=h.useState(!1),l=()=>{o(!a)},c=h.useRef(null),[d,u]=h.useState("0vh");h.useEffect(()=>{if(c===null||c.current===null)return;const m=c.current.getBoundingClientRect().height;u(`calc(100svh - ${m}px)`)},[c]);const p=m=>{i({},{action:m,method:"get"})};return t.jsxs(h.Fragment,{children:[t.jsxs(P,{maxWidth:"100vw",children:[t.jsxs(Ze,{ref:c,position:"relative",variant:"elevation",elevation:0,children:[t.jsxs(N,{variant:"dense",sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(_,{size:"small",onClick:l,sx:{flexGrow:0},children:t.jsx(et,{})}),s,n]}),t.jsx(F,{flexItem:!0,variant:"fullWidth"})]}),t.jsx(P,{height:d,overflow:"auto",children:r})]}),t.jsxs(re,{open:a,onClose:l,PaperProps:{square:!0,variant:"outlined",elevation:0,sx:{width:240,height:"100%",borderTopWidth:0,borderLeftWidth:0,borderBottomWidth:0}},children:[t.jsxs(N,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(_,{size:"small",onClick:l,children:t.jsx(tt,{})}),t.jsx(y,{fontWeight:"bold",children:"Navigation"})]}),t.jsx(F,{}),t.jsx(S,{disablePadding:!0,dense:!0,sx:{wordBreak:"break-word",whiteSpace:"wrap"},children:Tt.map(({label:m,path:x})=>t.jsx(C,{disableGutters:!0,children:t.jsx(st,{onClick:()=>p(x),children:t.jsx(k,{children:m})})},x))})]})]})},ue=()=>{const{status:e,statusText:s}=Qe();return t.jsx(A,{location:e,children:t.jsx(ne,{maxWidth:"md",children:t.jsxs(P,{padding:4,children:[t.jsx(y,{component:"h1",variant:"h1",children:e}),t.jsx(y,{paragraph:!0,component:"p",variant:"body1",children:s})]})})})},B=e=>{const{paths:s,breadcrumbsProps:r,typographyProps:n}=e,i=s.split("/");return t.jsx(rt,{...r,children:i.map((a,o)=>h.createElement(y,{...n,key:`${o}-${a}`,whiteSpace:"nowrap"},a))})},Ct=()=>t.jsx(A,{location:t.jsx(B,{paths:"~"}),children:t.jsx(y,{children:"Nothing to see here."})}),Pt=()=>{const e=localStorage.getItem("personal-access-token");return e===null?"-1":e},V=()=>{const e=Pt();return new ht({auth:e})},Ie=async()=>{const s=await V().paginate("GET /user/repos");return await Promise.all(s.map(async({name:n,full_name:i,topics:a,created_at:o,updated_at:l,description:c,id:d,html_url:u,homepage:p,pushed_at:m,archived:x,private:f})=>({id:d,opened_at:null,html_url:u,homepage:p,pushed_at:m,name:n,full_name:i,description:c,topics:a,created_at:o,updated_at:l,is_archived:x,is_private:f,readme:await Rt(i).catch(g=>{if(g.status!==404)throw g})})))},Rt=async e=>{const s=V(),[r,n]=e.split("/");return(await s.request("GET /repos/{owner}/{repo}/readme",{owner:r,repo:n})).data.content},kt=async(e,s)=>{const r=V(),[n,i]=e.split("/");return(await r.paginate("GET /repos/{owner}/{repo}/issues",{owner:n,repo:i,state:"all"})).map(({id:l,html_url:c,number:d,title:u,state:p,locked:m,created_at:x,updated_at:f,closed_at:g,body:R,user:L})=>({opened_at:"",owner_type:L===null?null:L.type,repo_id:s,repo_full_name:e,id:l,html_url:c,issue_number:d,title:u,state:p,locked:m,created_at:x,updated_at:f,closed_at:g,body:R}))},Et=async(e,s,r)=>{const n=V(),[i,a]=e.split("/");return(await n.paginate("GET /repos/{owner}/{repo}/issues/{issue_number}/comments",{owner:i,repo:a,issue_number:s})).map(({id:c,html_url:d,created_at:u,updated_at:p,body:m})=>({issue_id:r,html_url:d,id:c,created_at:u,updated_at:p,body:m}))},I=ft("primary",1,{upgrade(e,s){if(s<=0){e.deleteObjectStore("repos"),e.deleteObjectStore("issues"),e.deleteObjectStore("issueComments");const r=e.createObjectStore("repos",{keyPath:"id",autoIncrement:!1});r.createIndex("by-full_name","full_name",{unique:!0,multiEntry:!1}),r.createIndex("by-id","id",{unique:!0,multiEntry:!1}),e.createObjectStore("issues",{keyPath:"id",autoIncrement:!1}).createIndex("by-repo_id","repo_id",{multiEntry:!0,unique:!1}),e.createObjectStore("issueComments",{keyPath:"id",autoIncrement:!1}).createIndex("by-issue_id","issue_id",{multiEntry:!0,unique:!1})}}}),K=async()=>(await I).getAll("repos"),Te=async e=>(await I).getFromIndex("repos","by-full_name",e),Ce=async()=>{const e=await K(),s=new Set;for(const n of e)if(n.topics!==void 0)for(const i of n.topics)s.add(i);const r=[...s];return r.sort(),r},Pe=async()=>I.then(e=>e.getAll("issues")),Re=async e=>{const s=await Te(e);return s===void 0?[]:(await I).getAllFromIndex("issues","by-repo_id",s.id)},Ot=async(e,s)=>{const r=await Re(e);for(const n of r)if(n.issue_number===s)return n},Dt=async e=>(await I).getAllFromIndex("issueComments","by-issue_id",e),Nt=async e=>{const s=await I,r=e.map(async i=>{const a=await s.get("repos",i.full_name);let o=null;a!==void 0&&(o=a.opened_at);const l={...i,opened_at:o};return s.put("repos",l)});return await Promise.all(r)},Ft=async e=>{const s=await I,r=e.map(async i=>{const a=await s.get("issues",i.id);let o="";a!==void 0&&(o=a.opened_at);const l={...i,opened_at:o};return s.put("issues",l)});return await Promise.all(r)},At=async e=>{const s=await I;return await Promise.all(e.map(r=>s.put("issueComments",r)))},Lt=async e=>await Ie().then(s=>(Nt(s),[!0]),s=>(e(s),[!1])),Mt=async e=>{const s=await K();return await Promise.all(s.map(async r=>await kt(r.full_name,r.id).then(n=>(Ft(n),!0),n=>(e(n),!1))))},Wt=async e=>{const s=await Pe();return await Promise.all(s.map(async r=>await Et(r.repo_full_name,r.issue_number,r.id).then(n=>(At(n),!0),n=>(e(n),!1))))},Bt=async({request:e})=>{const s=new URL(e.url).searchParams,r=s.get("topics");let n=[];r!==null&&r!==""&&(n=r.split(",").filter(c=>c.length>0));const i=s.get("name");let a="";i!==null&&(a=i),document.title="Repositories";const o=await Ce();let l=await K()||await Ie();return l=oe(l,a,{keys:["full_name"]}),n.length>0&&(l=l.filter(c=>{const{topics:d}=c;return d===void 0?!1:n.every(u=>d.includes(u))})),{name:a,topicOptions:o,repos:l,topics:n}},zt=e=>xt().use(gt,{fragment:!0}).use(yt).use(bt).use(jt).use(wt).use(vt).use(_t,{css:"https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"}).use(St).processSync(e.normalize()).toString().replace("<table","<div style='display: block; width: 100%; overflow-x: auto'><table").replace("</table>","</table></div>"),te=e=>{const{markdownContent:s,emptyText:r,sx:n,...i}=e,a=h.useRef(null);return h.useEffect(()=>{if(s==null||a===null||a.current===null)return;const o=zt(s);a.current.innerHTML=o},[s]),t.jsx(y,{...i,ref:a,component:"div",display:"block",width:"100%",sx:{...n,overflowX:"auto",fontFamily:"IBM Plex Serif",wordBreak:"break-word",wordWrap:"break-word"},children:r})},$t=(e,s="-")=>e==null||e===""?s:Se(e).fromNow(),b=(e,s="-")=>e==null||e===""?s:Se(e).format("MMMM Do YYYY"),M=e=>{const s=b(e),r=$t(e);return`${s} (${r})`},Gt=[{label:"Title",render:e=>e.title},{label:"State",render:e=>fe(e.state)},{label:"Owner type",render:e=>e.owner_type??"Unknown"},{label:"Last modified",render:e=>e.updated_at?M(e.updated_at):"Never"},{label:"Closed",render:e=>e.closed_at?M(e.closed_at):"Not closed"},{label:"Created",render:e=>e.created_at?M(e.created_at):"Unknown"},{label:"Links",render:e=>t.jsx(y,{component:"a",href:e.html_url,target:"_blank",children:"Github issue"})}],Ut=()=>{const{issue:e,comments:s}=H(),[r,n]=h.useState(!1),i=()=>{n(!r)},a=()=>{n(!1)};return t.jsxs(h.Fragment,{children:[t.jsx(A,{location:t.jsx(B,{paths:`~/repositories/${e.repo_full_name}/issues/${e.issue_number}`,breadcrumbsProps:{sx:{overflow:"auto",flexGrow:{xs:0,sm:1}}}}),seconadaryAction:t.jsx(_,{onClick:i,size:"small",disableRipple:!0,children:t.jsx(he,{})}),children:t.jsx(ne,{maxWidth:"sm",children:t.jsxs(j,{spacing:2,padding:2,divider:t.jsx(F,{flexItem:!0,variant:"fullWidth"}),children:[t.jsx(nt,{variant:"outlined",sx:{padding:2},children:t.jsx(te,{markdownContent:e.body??void 0,emptyText:"This issue does not have a body or its body not cached."})}),s.map(o=>t.jsxs(P,{children:[t.jsxs(S,{dense:!0,disablePadding:!0,children:[t.jsx(C,{disablePadding:!0,children:t.jsx(k,{primary:"Created",secondary:(b(o.created_at),"Unknown")})}),t.jsx(C,{children:t.jsx(k,{primary:"Last updated",secondary:(b(o.updated_at),"Never")})})]}),t.jsx(te,{markdownContent:o.body??void 0,emptyText:"This issue does not have a body or its body not cached."})]},`comment-${o.id}`))]})})}),t.jsxs(re,{elevation:0,anchor:"right",variant:"temporary",open:r,onClose:a,children:[t.jsxs(N,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(y,{fontWeight:"bold",children:"Metadata"}),t.jsx(_,{size:"small",onClick:a,children:t.jsx(Y,{})})]}),t.jsx(F,{flexItem:!0,variant:"fullWidth"}),t.jsx(S,{disablePadding:!0,dense:!0,children:Gt.map(({label:o,render:l})=>t.jsx(C,{children:t.jsx(k,{secondary:l(e),children:o})},o))})]})]})},qt=async({params:e})=>{const s=e.owner,r=e.repo,n=e.issueNumber;if(s===void 0||r===void 0||n===void 0)throw new Response("",{status:400,statusText:"Bad requeset"});if(!Number.isSafeInteger(Number.parseInt(n)))throw new Response("",{status:400,statusText:"Bad requeset"});const i=`${s}/${r}`,a=await Ot(i,Number.parseInt(n));if(a===void 0)throw new Response("Not found",{status:404,statusText:"Issue does not exist or it is not cached."});const o=await I,l=new Date(Date.now()).toISOString(),c=await o.get("repos",i);return await o.put("repos",{...c,opened_at:l}),await o.put("issues",{...a,opened_at:l}),document.title=a.title,{issue:a,comments:await Dt(a.id)}},ke="issue-filter-pref-state",Ht="issue-filter-pref-owner-type",Ee=[{label:"All",value:"All"},{label:"Open",value:"open"},{label:"Closed",value:"closed"}],Oe=[{label:"All",value:"All"},{label:"Bot",value:"Bot"},{label:"User",value:"User"}],De="repo-filter-pref-topic-match-strategy",Ne="repo-filter-pref-visibility",Fe="repo-filter-pref-status",Ae=[{label:"Match all",value:"Match all"},{label:"Match any",value:"Match any"}],Le=[{label:"All",value:"All"},{label:"Private",value:"Private"},{label:"Public",value:"Public"}],Me=[{label:"All",value:"All"},{label:"Active",value:"Active"},{label:"Archived",value:"Archived"}],We=(e,s)=>{const r=e??!1,n=s??!1;return!r&&n?1:!r&&!n?0:r&&!n?-1:s.localeCompare(e)},Yt=(e,s)=>{const r=!!e,n=!!s;return r===n?0:r&&!n?-1:1},Vt=(e,s)=>{const r=e??!1,n=s??!1;return!r&&n?1:!r&&!n?0:r&&!n?-1:s-e},ie=()=>{const e=localStorage.getItem(Ne);return e!==null?e:"All"},Kt=e=>{localStorage.setItem(Ne,e)},le=()=>{const e=localStorage.getItem(Fe);return e!==null?e:"All"},Xt=e=>{localStorage.setItem(Fe,e)},ce=()=>{const e=localStorage.getItem(De);return e!==null?e:"Match all"},Jt=e=>{localStorage.setItem(De,e)},X=()=>{const e=localStorage.getItem(ke);return e!==null?e:"All"},Qt=e=>{localStorage.setItem(ke,e)},J=()=>{const e=localStorage.getItem("issue-filter-pref-owner-type");return e!==null?e:"User"},Zt=e=>{localStorage.setItem(Ht,e)},es=e=>{const{order:s,orderBy:r,onRequestSort:n,columnDefinition:i}=e,a=o=>l=>{n(o)};return t.jsx(lt,{children:t.jsx(xe,{children:i.map(({id:o,label:l},c)=>t.jsx(ge,{sortDirection:r===o?s:void 0,children:t.jsx(ct,{active:r===o,direction:r===o?s:"asc",onClick:a(o),children:l})},`cell-${c}`))})})},ts=e=>{const{item:s,columnDefinition:r}=e;return t.jsx(xe,{children:r.map(({render:n},i)=>t.jsx(ge,{children:n(s)},`data-cell-${i}`))})},Be=e=>{const{orderingFn:s,items:r,columnDefinition:n,defaultOrderBy:i}=e,[a,o]=h.useState("desc"),[l,c]=h.useState(i),d=p=>{o(l===p&&a==="asc"?"desc":"asc"),c(p)},u=h.useMemo(()=>{const p=s(l);if(p===void 0)return r;const m=[...r];return m.sort(p),a==="asc"&&m.reverse(),m},[a,l,r]);return t.jsx(at,{children:t.jsxs(ot,{children:[t.jsx(es,{columnDefinition:n,onRequestSort:d,order:a,orderBy:l}),t.jsx(it,{children:u.map((p,m)=>t.jsx(ts,{item:p,columnDefinition:n},`data-cell-item-${m}`))})]})})},v=e=>{const{options:s,subheader:r,...n}=e,i=s??[];return t.jsxs(ye,{...n,children:[r!==""&&r!==void 0&&t.jsx(W,{disableSticky:!0,children:r}),i.map(({value:a,label:o},l)=>t.jsx(be,{disableRipple:!0,value:a,children:o},`${a}-${l}`))]})},ze=e=>{const{options:s,subheader:r,...n}=e,i=s??[];return t.jsxs(ye,{...n,multiple:!0,children:[r!==""&&r!==void 0&&t.jsx(W,{disableSticky:!0,children:r}),i.map(({value:a,label:o},l)=>t.jsx(be,{disableRipple:!0,value:a,children:o},`${a}-${l}`))]})},$e=e=>{const{onEnter:s,onChange:r,...n}=e,i=o=>{if(o.key==="Enter"&&s!==void 0){console.log("entered"),s();return}},a=o=>{r!==void 0&&r(o.target.value.normalize())};return t.jsx(je,{...n,onKeyUp:i,onChange:a})},ss=[{id:"issue_number",label:"Issue number",render:e=>e.issue_number},{id:"title",label:"Title",render:e=>t.jsx(y,{component:q,to:{pathname:`/repositories/${e.repo_full_name}/issues/${e.issue_number}`},children:e.title})},{id:"repo_full_name",label:"Repository",render:e=>t.jsx(y,{component:q,to:{pathname:`/repositories/${e.repo_full_name}`},children:e.repo_full_name})},{id:"opened_at",label:"Last opened",render:e=>b(e.opened_at,"Never")},{id:"owner_type",label:"Type",render:e=>e.owner_type},{id:"state",label:"State",render:e=>fe(e.state)},{id:"updated_at",label:"Last updated",render:e=>b(e.updated_at,"Never")},{id:"created_at",label:"Created",render:e=>b(e.created_at,"Unknown")}],rs=e=>{let s;switch(e){case"issue_number":s=(r,n)=>Vt(r[e],n[e]);break;case"title":case"repo_full_name":case"owner_type":case"state":case"created_at":case"updated_at":s=(r,n)=>We(r[e],n[e])}return s},ee=e=>{const{text:s,children:r}=e;return t.jsx(C,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(k,{sx:{width:"max(200px, 40%)"},children:s}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:r})]})})},Ge=e=>{const{repoOptions:s,issues:r,title:n,repoFullNames:i,ownerType:a,state:o}=e,l=se(),[c,d]=h.useState(n??""),u=i??[],p=a??J(),m=o??X(),x=w=>{const E=w.target.value;l({title:c,state:m,ownerType:E,repoFullNames:u},{action:"./",method:"get"})},f=w=>{const E=w.target.value;l({title:c,state:E,ownerType:p,repoFullNames:u},{action:"./",method:"get"})},g=w=>{const E=w.target.value;l({title:c,state:m,ownerType:p,repoFullNames:E},{action:"./",method:"get"})},R=()=>{l({title:c,state:m,ownerType:p,repoFullNames:[]},{action:"./",method:"get"})},L=()=>{l({title:c,state:m,ownerType:p,repoFullNames:u},{action:"./",method:"get"})},[$,Q]=h.useState(!1),Z=()=>{Q(!$)};return t.jsxs(P,{children:[t.jsxs(N,{disableGutters:!0,variant:"dense",sx:{flexDirection:"row",width:"100%",flexWrap:"wrap",gap:1,alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(y,{children:["Showing ",r.length," ",r.length===1?"issue":"issues"]}),t.jsxs(j,{alignItems:"center",direction:"row",children:[t.jsx($e,{autoComplete:"off",placeholder:"Search issue",size:"small",value:c,onChange:d,onEnter:L}),t.jsx(_,{size:"small",onClick:Z,children:t.jsx(we,{})})]})]}),t.jsx(ve,{in:$,children:t.jsxs(S,{disablePadding:!0,children:[t.jsxs(ee,{text:"Repositories",children:[t.jsx(ze,{fullWidth:!0,displayEmpty:!0,subheader:"Repositories",renderValue:w=>`${w.length} selected`,size:"small",value:u,options:s,onChange:g}),t.jsx(_,{size:"small",onClick:R,children:t.jsx(Y,{})})]}),t.jsx(ee,{text:"State",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,subheader:"State",size:"small",value:m,options:Ee,onChange:f})}),t.jsx(ee,{text:"State",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,subheader:"Type",size:"small",value:p,options:Oe,onChange:x})})]})}),t.jsx(Be,{items:r,columnDefinition:ss,defaultOrderBy:"updated_at",orderingFn:rs})]})},ns=()=>{const{issues:e,repoOptions:s,title:r,ownerType:n,repoFullNames:i,state:a}=H();return t.jsx(A,{location:t.jsx(B,{paths:"~/issues",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsx(P,{paddingTop:2,paddingX:2,children:t.jsx(Ge,{issues:e,repoOptions:s,title:r,ownerType:n,repoFullNames:i,state:a})})})},as=(e,s,r,n,i,a)=>{let o=[...e];return n==="Private"&&(o=o.filter(l=>l.is_private)),n==="Public"&&(o=o.filter(l=>!l.is_private)),i==="Archived"&&(o=o.filter(l=>l.is_archived)),i==="Active"&&(o=o.filter(l=>!l.is_archived)),r.length>0&&a==="Match all"&&(o=o.filter(l=>r.every(c=>l.topics===void 0?!1:l.topics.includes(c)))),r.length>0&&a==="Match any"&&(o=o.filter(l=>r.some(c=>l.topics===void 0?!1:l.topics.includes(c)))),o=oe(o,s,{keys:["full_name"]}),o},Ue=(e,s,r,n,i)=>{let a=[...e];return r!=="All"&&(a=a.filter(o=>o.owner_type===r)),n.length>0&&(a=a.filter(o=>n.includes(o.repo_full_name))),i!=="All"&&(a=a.filter(o=>o.state===i)),a=oe(a,s,{keys:["title"]}),a},os=async({request:e})=>{document.title="issues";let s=await Pe();const n=[...new Set(s.map(({repo_full_name:p})=>p).filter(p=>p.length>0))];n.sort();const i=n.map(p=>({label:p,value:p})),a=new URL(e.url).searchParams,o=a.get("repoFullNames");let l=[];o!==null&&(l=o.normalize().trim().split(",").map(p=>p.trim()).filter(p=>p.length>0));const c=a.get("title")||"",d=a.get("ownerType")||J(),u=a.get("state")||X();return s=Ue(s,c,d,l,u),{issues:s,repoOptions:i,title:c,ownerType:d,repoFullNames:l,state:u}},is=e=>Ke(e).toString(),ls=[{label:"Description",render:e=>e.description??"No description"},{label:"Last pushed",render:e=>e.pushed_at?M(e.pushed_at):"Never"},{label:"Last updated",render:e=>e.updated_at?M(e.updated_at):"Never"},{label:"Created",render:e=>e.created_at?M(e.created_at):"Unknown"},{label:"Visibility",render:e=>e.is_private?"Private":"Public"},{label:"Status",render:e=>e.is_private?"Archived":"Active"},{label:"Links",render:e=>t.jsxs(j,{component:"span",flexDirection:"row",flexWrap:"wrap",gap:1,children:[t.jsx(y,{component:"a",href:e.html_url,target:"_blank",children:"GitHub repository"}),t.jsx(y,{component:"a",href:e.homepage??void 0,target:"_blank",children:"Homepage"})]})},{label:"Topics",render:e=>e.topics&&e.topics.length>0?t.jsx(j,{component:"span",gap:1,flexDirection:"row",flexWrap:"wrap",children:e.topics.map(s=>t.jsx(y,{component:q,to:{pathname:"/repositories",search:is({topics:s})},children:s},s))}):"No topic assigned"}],cs=()=>{const{repoOptions:e,repo:s,issues:r,title:n,ownerType:i,repoFullNames:a,state:o}=H(),[l,c]=h.useState(0),[d,u]=h.useState(!1),p=()=>{u(!d)},m=()=>{u(!1)};let x;return s.readme!==void 0&&(x=It.Buffer.from(s.readme,"base64").toString()),t.jsxs(A,{location:t.jsx(B,{paths:`~/repositories/${s.full_name}`,breadcrumbsProps:{sx:{overflow:"auto",flexGrow:{xs:0,sm:1}}}}),seconadaryAction:t.jsx(_,{disableRipple:!0,onClick:p,size:"small",sx:{flexGrow:0},children:t.jsx(he,{})}),children:[t.jsx(N,{disableGutters:!0,variant:"dense",children:t.jsxs(dt,{value:l,onChange:(f,g)=>c(g),children:[t.jsx(de,{value:0,label:"Readme"}),t.jsx(de,{value:1,label:"Issues"})]})}),t.jsx(F,{}),l===0&&t.jsx(ne,{maxWidth:"sm",children:t.jsx(te,{emptyText:"This repository does not contain a readme.",markdownContent:x})}),l===1&&t.jsx(P,{padding:2,children:t.jsx(Ge,{repoOptions:e,issues:r,title:n,ownerType:i,repoFullNames:a,state:o})}),t.jsxs(re,{elevation:0,anchor:"right",open:d,onClose:m,PaperProps:{sx:{width:240}},children:[t.jsxs(N,{variant:"dense",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(y,{fontWeight:"bold",children:"Metadata"}),t.jsx(_,{size:"small",onClick:m,children:t.jsx(Y,{})})]}),t.jsx(F,{flexItem:!0,variant:"fullWidth"}),t.jsx(S,{disablePadding:!0,dense:!0,children:ls.map(({label:f,render:g})=>t.jsx(C,{children:t.jsx(k,{secondary:g(s),children:f})},f))})]})]})},ds=async({params:e,request:s})=>{const r=e.owner,n=e.repo;if(r===void 0||n===void 0)throw new Response("",{status:400,statusText:"Bad requeset"});const i=`${r}/${n}`;let a=await Te(i);if(a===void 0)throw new Response("Not found",{status:404,statusText:"Repository not found in cache"});(await I).put("repos",{...a,opened_at:new Date(Date.now()).toISOString()}),document.title=a.name;const o=new URL(s.url).searchParams,l=o.get("title")||"",c=o.get("ownerType")||J(),d=o.get("state")||X();let u=await Re(a.full_name);const p=[a.full_name];u=Ue(u,l,c,p,d);const m=[{label:a.full_name,value:a.full_name}];return{repo:a,issues:u,title:l,ownerType:c,repoFullNames:p,state:d,repoOptions:m}},us=[{id:"full_name",label:"Name",render:e=>t.jsx(y,{component:q,to:`./${e.full_name}`,children:e.full_name})},{id:"opened_at",label:"Last opened",render:e=>b(e.opened_at,"Never")},{id:"is_archived",label:"Status",render:e=>e.is_archived?"Archived":"Active"},{id:"is_private",label:"Visibility",render:e=>e.is_private?"Private":"Public"},{id:"pushed_at",label:"Last pushed",render:e=>b(e.pushed_at,"Never")},{id:"updated_at",label:"Last updated",render:e=>b(e.updated_at,"Never")},{id:"created_at",label:"Created",render:e=>b(e.created_at,"Unknown")}],ps=e=>{switch(e){case"is_archived":case"is_private":return(s,r)=>Yt(s[e],r[e]);case"full_name":case"pushed_at":case"opened_at":case"created_at":case"updated_at":return(s,r)=>We(s[e],r[e])}},G=e=>{const{text:s,children:r}=e;return t.jsx(C,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(k,{sx:{width:"max(200px, 40%)"},children:s}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:r})]})})},ms=e=>{const{repos:s,topicOptions:r,name:n,topicMatchStrategy:i,status:a,topics:o,visibility:l}=e,c=se(),[d,u]=h.useState(n||""),p=o??[],m=i||ce(),x=l||ie(),f=a||le(),g=()=>{c({name:d,topics:p,topicMatchStrategy:m,visibility:x,status:f},{action:"./",method:"get"})},R=T=>{const O=T.target.value;c({name:d,topics:p,topicMatchStrategy:O,visibility:x,status:f},{action:"./",method:"get"})},L=T=>{const O=T.target.value;c({name:d,topics:p,topicMatchStrategy:m,visibility:x,status:O},{action:"./",method:"get"})},$=T=>{const O=T.target.value;c({name:d,topics:p,topicMatchStrategy:m,visibility:O,status:f},{action:"./",method:"get"})},Q=T=>{const O=T.target.value;c({name:d,topics:O,topicMatchStrategy:m,visibility:x,status:f},{action:"./",method:"get"})},Z=()=>{c({name:d,topics:[],topicMatchStrategy:m,visibility:x,status:f},{action:"./",method:"get"})},[w,E]=h.useState(!1),qe=()=>{E(!w)};return t.jsxs(P,{children:[t.jsxs(N,{disableGutters:!0,variant:"dense",sx:{flexDirection:"row",width:"100%",flexWrap:"wrap",gap:1,alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(y,{children:["Showing ",s.length," ",s.length===1?"repository":"repositories"]}),t.jsxs(j,{alignItems:"center",direction:"row",children:[t.jsx($e,{autoComplete:"off",placeholder:"Search repository",size:"small",value:d,onChange:u,onEnter:g}),t.jsx(_,{size:"small",onClick:qe,children:t.jsx(we,{})})]})]}),t.jsx(ve,{in:w,children:t.jsxs(S,{disablePadding:!0,children:[t.jsxs(G,{text:"Topics",children:[t.jsx(ze,{fullWidth:!0,displayEmpty:!0,subheader:"Topics",renderValue:T=>`${T.length} selected`,size:"small",value:p,options:r,onChange:Q}),t.jsx(_,{size:"small",onClick:Z,children:t.jsx(Y,{})})]}),t.jsx(G,{text:"Topic match strategy",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,subheader:"Match strategy",size:"small",value:m,options:Ae,onChange:R})}),t.jsx(G,{text:"Visibility",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,subheader:"Visibility",size:"small",value:x,options:Le,onChange:$})}),t.jsx(G,{text:"Status",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,subheader:"Status",size:"small",value:f,options:Me,onChange:L})})]})}),t.jsx(Be,{items:s,orderingFn:ps,defaultOrderBy:"pushed_at",columnDefinition:us})]})},hs=()=>{const{repos:e,topicOptions:s,topics:r,name:n,visibility:i,status:a,topicMatchStrategy:o}=H();return t.jsx(A,{location:t.jsx(B,{paths:"~/repositories",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsx(P,{padding:2,children:t.jsx(ms,{topicOptions:s,repos:e,topics:r,name:n,visibility:i,status:a,topicMatchStrategy:o})})})},fs=async({request:e})=>{document.title="repositories";const s=(await Ce()).map(u=>({label:u,value:u}));let r=await K();const n=new URL(e.url).searchParams,i=n.get("topics");let a=[];i!==null&&(a=i.normalize().trim().split(",").map(u=>u.trim()).filter(u=>u.length>0));const o=n.get("name")||"",l=n.get("status")||le(),c=n.get("visibility")||ie(),d=n.get("topicMatchStrategy")||ce();return r=as(r,o,a,c,l,d),{topicOptions:s,repos:r,topics:a,name:o,visibility:c,status:l,topicMatchStrategy:d}},D=e=>{const{secondary:s,primary:r,children:n}=e;return t.jsx(C,{disableGutters:!0,children:t.jsxs(j,{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"start",justifyContent:"space-between",children:[t.jsx(k,{primary:r,secondary:s,sx:{width:"max(200px, 40%)"}}),t.jsx(j,{alignItems:"center",flexDirection:"row",minWidth:"max(200px, 25%)",children:n})]})})},xs=()=>{const{enqueueSnackbar:e}=me(),[s,r]=h.useState(localStorage.getItem("personal-access-token")??""),n=a=>{const o=a.target.value.normalize();r(o)},i=()=>{localStorage.setItem("personal-access-token",s),e({message:"Updated personal access token",variant:"info"})};return t.jsxs(S,{disablePadding:!0,subheader:t.jsx(W,{disableGutters:!0,disableSticky:!0,children:"API"}),children:[t.jsx(D,{primary:"Personal access token (classic)",children:t.jsx(je,{fullWidth:!0,placeholder:"ghp_",type:"password",value:s,onChange:n,size:"small"})}),t.jsx(C,{disableGutters:!0,children:t.jsx(_e,{disableElevation:!0,size:"small",variant:"contained",onClick:i,children:"Update"})})]})},gs=()=>{const[e,s]=h.useState(J()),[r,n]=h.useState(X()),i=o=>{const l=o.target.value;Zt(l),s(l)},a=o=>{const l=o.target.value;Qt(l),n(l)};return t.jsxs(S,{disablePadding:!0,subheader:t.jsx(W,{disableGutters:!0,disableSticky:!0,children:"Issue filter preferences"}),children:[t.jsx(D,{primary:"Owner type",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,size:"small",value:e,options:Oe,onChange:i})}),t.jsx(D,{primary:"State",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,size:"small",value:r,options:Ee,onChange:a})})]})},ys=()=>{const[e,s]=h.useState(ce()),[r,n]=h.useState(ie()),[i,a]=h.useState(le()),o=d=>{const u=d.target.value;Jt(u),s(u)},l=d=>{const u=d.target.value;Kt(u),n(u)},c=d=>{const u=d.target.value;Xt(u),a(u)};return t.jsxs(S,{disablePadding:!0,subheader:t.jsx(W,{disableGutters:!0,disableSticky:!0,children:"Repository filter preferences"}),children:[t.jsx(D,{primary:"Match strategy",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,size:"small",value:e,options:Ae,onChange:o})}),t.jsx(D,{primary:"Visibility",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,size:"small",value:r,options:Le,onChange:l})}),t.jsx(D,{primary:"Status",children:t.jsx(v,{fullWidth:!0,displayEmpty:!0,size:"small",value:i,options:Me,onChange:c})})]})},pe=[{key:"last-sync-repos",successMsg:"repsitories",promise:e=>Lt(e)},{key:"last-sync-issues",successMsg:"issues",promise:e=>Mt(e)},{key:"last-sync-comments",successMsg:"comments",promise:e=>Wt(e)}],bs=[b(localStorage.getItem("last-sync-repos"),"Never"),b(localStorage.getItem("last-sync-issues"),"Never"),b(localStorage.getItem("last-sync-comments"),"Never")],js=()=>{const{enqueueSnackbar:e}=me(),s=localStorage.getItem("personal-access-token")??"",[r,n]=h.useState([!1,!1,!1]),[i,a]=h.useState(bs),o=d=>{throw e({message:String(d),variant:"error"}),d},l=async d=>{n(f=>{const g=[...f];return g[d]=!0,g});const{promise:u,successMsg:p,key:m}=pe[d];if((await u(o)).every(f=>f)){e({message:`Synced ${p}`,variant:"success"});const f=new Date(Date.now()).toISOString();localStorage.setItem(m,f),a(g=>{const R=[...g];return R[d]=b(f),R})}n(f=>{const g=[...f];return g[d]=!1,g})},c=h.useMemo(()=>!s,[s]);return t.jsx(S,{disablePadding:!0,subheader:t.jsx(W,{disableGutters:!0,disableSticky:!0,children:"Synchronization"}),children:pe.map(({successMsg:d},u)=>t.jsx(D,{primary:`Sync ${d}`,secondary:`Last sync: ${i[u]}`,children:t.jsx(_e,{fullWidth:!0,disableElevation:!0,disabled:c||r[u],size:"small",variant:"contained",onClick:()=>l(u),children:r[u]?t.jsx(ut,{disableShrink:!0,size:28}):`Sync ${d}`})},`sync-item-${u}`))})},ws=()=>t.jsx(A,{location:t.jsx(B,{paths:"~/settings",breadcrumbsProps:{sx:{flexGrow:1}}}),children:t.jsxs(j,{paddingTop:2,paddingX:2,spacing:1,divider:t.jsx(F,{variant:"middle"}),children:[t.jsx(ys,{}),t.jsx(gs,{}),t.jsx(xs,{}),t.jsx(js,{})]})}),U=ae({palette:{mode:"dark",primary:{main:z("#00D3D0",.7)},secondary:{main:"#D68F3E"},background:{default:"#1B1D2D",paper:"#1B1D2D"},text:{primary:z("#fff",.67),secondary:z("#fff",.5)}}}),vs=ae({components:{MuiBreadcrumbs:{styleOverrides:{ol:{flexWrap:"nowrap",width:"100%"}}},MuiCssBaseline:{styleOverrides:{html:{backgroundColor:U.palette.background},"*":{scrollbarWidth:"thin"},pre:{width:"100%",overflow:"auto"},table:{minWidth:"max-content",borderSpacing:"1rem 0.5rem"},a:{transition:"color 0.3s ease",color:z(U.palette.primary.main,.78),"&:hover":{color:z(U.palette.secondary.main,.78)}}}}}}),_s=ae({palette:U.palette,components:vs.components}),Ss=Xe([{index:!0,element:t.jsx(Ct,{}),loader:Bt,errorElement:t.jsx(ue,{})},{path:"/",errorElement:t.jsx(ue,{}),children:[{path:"/repositories",element:t.jsx(hs,{}),loader:fs},{path:"/repositories/:owner/:repo",element:t.jsx(cs,{}),loader:ds},{path:"/repositories/:owner/:repo/issues/:issueNumber",element:t.jsx(Ut,{}),loader:qt},{path:"/issues",element:t.jsx(ns,{}),loader:os},{path:"/settings",element:t.jsx(ws,{})}]}],{basename:"/"}),Is=()=>t.jsxs(pt,{theme:_s,children:[t.jsx(mt,{}),t.jsx(Ve,{preventDuplicate:!0,maxSnack:3,autoHideDuration:3500,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(Je,{router:Ss})})]});Ye.createRoot(document.getElementById("root")).render(t.jsx(He.StrictMode,{children:t.jsx(Is,{})}));
//# sourceMappingURL=index-DeRnqzgi.js.map
