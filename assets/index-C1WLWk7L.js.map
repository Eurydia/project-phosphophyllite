{"version":3,"file":"index-C1WLWk7L.js","sources":["../../src/views/WithAppBar.tsx","../../src/pages/ErrorBoundary.tsx","../../src/constants/ISSUE_FILTER_OPTIONS.ts","../../src/constants/REPO_FILTER_OPTIONS.ts","../../src/core/sorting.ts","../../src/core/time.ts","../../src/database/preferences.ts","../../src/components/StyledDataTable.tsx","../../src/components/StyledSelect.tsx","../../src/components/StyledSelectMultiple.tsx","../../src/components/StyledTextField.tsx","../../src/components/IssueDataTable.tsx","../../src/components/RepoDataTable.tsx","../../src/components/StyledBreadcrumbs.tsx","../../src/pages/HomePage/HomePage.tsx","../../src/database/migration.ts","../../src/database/api.ts","../../src/database/cached.ts","../../src/pages/HomePage/loader.ts","../../src/core/markdown.ts","../../src/components/Markdown.tsx","../../src/pages/IssueDetailsPage/IssueDetailsPage.tsx","../../src/pages/IssueDetailsPage/loader.tsx","../../src/pages/IssueListPage/IssueListPage.tsx","../../src/core/filtering.ts","../../src/pages/IssueListPage/loader.ts","../../src/core/query.ts","../../src/pages/RepoDetailsPage/RepoDetailsPage.tsx","../../src/pages/RepoDetailsPage/loader.tsx","../../src/pages/RepoListPage/RepoListPage.tsx","../../src/pages/RepoListPage/loader.ts","../../src/pages/SettingsPage/SettingRegions/WrappableListItem.tsx","../../src/pages/SettingsPage/SettingRegions/SettingRegionAPI.tsx","../../src/pages/SettingsPage/SettingRegions/SettingRegionIssueFilterPref.tsx","../../src/pages/SettingsPage/SettingRegions/SettingRegionRepoFilterPref.tsx","../../src/pages/SettingsPage/SettingRegions/SettingRegionSync.tsx","../../src/pages/SettingsPage/SettingsPage.tsx","../../src/theme.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import {\r\n\tCloseRounded,\r\n\tListRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tAppBar,\r\n\tBox,\r\n\tDivider,\r\n\tDrawer,\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemButton,\r\n\tListItemText,\r\n\tToolbar,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tFragment,\r\n\tReactNode,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\nimport { useSubmit } from \"react-router-dom\";\r\n\r\nconst nav: { label: string; path: string }[] = [\r\n\t{ label: \"~\", path: \"/\" },\r\n\t{\r\n\t\tlabel: \"repositories\",\r\n\t\tpath: \"/repositories\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"issues\",\r\n\t\tpath: \"/issues\",\r\n\t},\r\n\t{ label: \"settings\", path: \"/settings\" },\r\n];\r\n\r\ntype WithAppBarProps = {\r\n\tlocation: ReactNode;\r\n\tchildren: ReactNode;\r\n\tseconadaryAction?: ReactNode;\r\n};\r\nexport const WithAppBar: FC<WithAppBarProps> = (\r\n\tprops,\r\n) => {\r\n\tconst { location, children, seconadaryAction } =\r\n\t\tprops;\r\n\tconst submit = useSubmit();\r\n\tconst [drawerOpen, setDrawerOpen] =\r\n\t\tuseState(false);\r\n\tconst toggleDrawer = () => {\r\n\t\tsetDrawerOpen(!drawerOpen);\r\n\t};\r\n\tconst appBarRef = useRef<HTMLElement | null>(\r\n\t\tnull,\r\n\t);\r\n\tconst [contentHeight, setContentHeight] =\r\n\t\tuseState(\"0vh\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\tappBarRef === null ||\r\n\t\t\tappBarRef.current === null\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst appBarHeight =\r\n\t\t\tappBarRef.current.getBoundingClientRect()\r\n\t\t\t\t.height;\r\n\r\n\t\tsetContentHeight(\r\n\t\t\t`calc(100svh - ${appBarHeight}px)`,\r\n\t\t);\r\n\t}, [appBarRef]);\r\n\r\n\tconst redirectPath = (path: string) => {\r\n\t\tsubmit({}, { action: path, method: \"get\" });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Box maxWidth=\"100vw\">\r\n\t\t\t\t<AppBar\r\n\t\t\t\t\tref={appBarRef}\r\n\t\t\t\t\tposition=\"relative\"\r\n\t\t\t\t\tvariant=\"elevation\"\r\n\t\t\t\t\televation={0}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar\r\n\t\t\t\t\t\tvariant=\"dense\"\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\t\t\tflexWrap: \"nowrap\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tonClick={toggleDrawer}\r\n\t\t\t\t\t\t\tsx={{ flexGrow: 0 }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListRounded />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t{location}\r\n\t\t\t\t\t\t{seconadaryAction}\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t<Divider\r\n\t\t\t\t\t\tflexItem\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Drawer\r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={toggleDrawer}\r\n\t\t\t\tPaperProps={{\r\n\t\t\t\t\tsquare: true,\r\n\t\t\t\t\tvariant: \"outlined\",\r\n\t\t\t\t\televation: 0,\r\n\t\t\t\t\tsx: {\r\n\t\t\t\t\t\twidth: 240,\r\n\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\tborderTopWidth: 0,\r\n\t\t\t\t\t\tborderLeftWidth: 0,\r\n\t\t\t\t\t\tborderBottomWidth: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar\r\n\t\t\t\t\tvariant=\"dense\"\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={toggleDrawer}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CloseRounded />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Typography fontWeight=\"bold\">\r\n\t\t\t\t\t\tNavigation\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<List\r\n\t\t\t\t\tdisablePadding\r\n\t\t\t\t\tdense\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\twordBreak: \"break-word\",\r\n\t\t\t\t\t\twhiteSpace: \"wrap\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{nav.map(({ label, path }) => (\r\n\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\tdisableGutters\r\n\t\t\t\t\t\t\tkey={path}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemButton\r\n\t\t\t\t\t\t\t\tonClick={() => redirectPath(path)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemText>\r\n\t\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t\t</ListItemButton>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</List>\r\n\t\t\t</Drawer>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import {\r\n\tBox,\r\n\tContainer,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useRouteError } from \"react-router\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\n\r\nexport const ErrorBoundry: FC = () => {\r\n\tconst { status, statusText } =\r\n\t\tuseRouteError() as {\r\n\t\t\tstatus: string;\r\n\t\t\tstatusText: string;\r\n\t\t};\r\n\treturn (\r\n\t\t<WithAppBar location={status}>\r\n\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t<Box padding={4}>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tcomponent=\"h1\"\r\n\t\t\t\t\t\tvariant=\"h1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{status}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tparagraph\r\n\t\t\t\t\t\tcomponent=\"p\"\r\n\t\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{statusText}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Container>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { GenericSelectOptions } from \"~types/generics\";\r\n\r\nexport const ISSUE_FILTER_PREF_STATE_KEY =\r\n\t\"issue-filter-pref-state\";\r\n\r\nexport const ISSUE_FILTER_PREF_OWNER_TYPE_KEY =\r\n\t\"issue-filter-pref-owner-type\";\r\n\r\nexport const ISSUE_FILTER_STATE_OPTIONS: GenericSelectOptions<string>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tlabel: \"All\",\r\n\t\t\tvalue: \"All\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Open\",\r\n\t\t\tvalue: \"open\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Closed\",\r\n\t\t\tvalue: \"closed\",\r\n\t\t},\r\n\t];\r\n\r\nexport const ISSUE_FILTER_OWNER_TYPE_OPTIONS: GenericSelectOptions<string>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tlabel: \"All\",\r\n\t\t\tvalue: \"All\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Bot\",\r\n\t\t\tvalue: \"Bot\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"User\",\r\n\t\t\tvalue: \"User\",\r\n\t\t},\r\n\t];\r\n","import { GenericSelectOptions } from \"~types/generics\";\r\n\r\nexport const REPO_FILTER_PREF_TOPIC_MATCH_STRATEGY_KEY =\r\n\t\"repo-filter-pref-topic-match-strategy\";\r\nexport const REPO_FILTER_PREF_VISIBILITY_KEY =\r\n\t\"repo-filter-pref-visibility\";\r\nexport const REPO_FILTER_PREF_STATUS_KEY =\r\n\t\"repo-filter-pref-status\";\r\n\r\nexport const REPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS: GenericSelectOptions<string>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tlabel: \"Match all\",\r\n\t\t\tvalue: \"Match all\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Match any\",\r\n\t\t\tvalue: \"Match any\",\r\n\t\t},\r\n\t];\r\n\r\nexport const REPO_FILTER_VISIBILITY_OPTIONS: GenericSelectOptions<string>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tlabel: \"All\",\r\n\t\t\tvalue: \"All\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Private\",\r\n\t\t\tvalue: \"Private\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Public\",\r\n\t\t\tvalue: \"Public\",\r\n\t\t},\r\n\t];\r\n\r\nexport const REPO_FILTER_STATUS_OPTIONS: GenericSelectOptions<string>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tlabel: \"All\",\r\n\t\t\tvalue: \"All\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Active\",\r\n\t\t\tvalue: \"Active\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Archived\",\r\n\t\t\tvalue: \"Archived\",\r\n\t\t},\r\n\t];\r\n","export const orderByString = (\r\n\ta: string | null | undefined,\r\n\tb: string | null | undefined,\r\n): number => {\r\n\t// moves nullish values to the end\r\n\r\n\tconst a_ = a ?? false;\r\n\tconst b_ = b ?? false;\r\n\tif (!a_ && b_) {\r\n\t\treturn 1;\r\n\t}\r\n\tif (!a_ && !b_) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (a_ && !b_) {\r\n\t\treturn -1;\r\n\t}\r\n\treturn b!.localeCompare(a!);\r\n};\r\n\r\nexport const orderByBoolean = (\r\n\ta: boolean | null | undefined,\r\n\tb: boolean | null | undefined,\r\n) => {\r\n\tconst a_ = Boolean(a);\r\n\tconst b_ = Boolean(b);\r\n\tif (a_ === b_) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (a_ && !b_) {\r\n\t\treturn -1;\r\n\t}\r\n\treturn 1;\r\n};\r\n\r\nexport const orderByNumber = (\r\n\ta: number | null | undefined,\r\n\tb: number | null | undefined,\r\n) => {\r\n\tconst a_ = a ?? false;\r\n\tconst b_ = b ?? false;\r\n\tif (!a_ && b_) {\r\n\t\treturn 1;\r\n\t}\r\n\tif (!a_ && !b_) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (a_ && !b_) {\r\n\t\treturn -1;\r\n\t}\r\n\r\n\treturn b! - a!;\r\n};\r\n","import moment from \"moment\";\r\n\r\nexport const timeSince = (\r\n\tdateString: string | undefined | null,\r\n\tfallback: string = \"-\",\r\n) => {\r\n\tif (\r\n\t\tdateString === undefined ||\r\n\t\tdateString === null ||\r\n\t\tdateString === \"\"\r\n\t) {\r\n\t\treturn fallback;\r\n\t}\r\n\r\n\treturn moment(dateString).fromNow();\r\n};\r\n\r\nexport const normalizeDateString = (\r\n\tdateString: string | undefined | null,\r\n\tfallback: string = \"-\",\r\n) => {\r\n\tif (\r\n\t\tdateString === undefined ||\r\n\t\tdateString === null ||\r\n\t\tdateString === \"\"\r\n\t) {\r\n\t\treturn fallback;\r\n\t}\r\n\r\n\treturn moment(dateString).format(\r\n\t\t\"MMMM Do YYYY\",\r\n\t);\r\n};\r\n\r\nexport const toTimeStamp = (\r\n\tdateString: string | null | undefined,\r\n\tfallback: string,\r\n) => {\r\n\tif (\r\n\t\tdateString === undefined ||\r\n\t\tdateString === null ||\r\n\t\tdateString === \"\"\r\n\t) {\r\n\t\treturn fallback;\r\n\t}\r\n\tconst timeAt = normalizeDateString(dateString);\r\n\tconst delta = timeSince(dateString);\r\n\treturn `${timeAt} (${delta})`;\r\n};\r\n","import {\r\n\tISSUE_FILTER_PREF_OWNER_TYPE_KEY,\r\n\tISSUE_FILTER_PREF_STATE_KEY,\r\n\tREPO_FILTER_PREF_STATUS_KEY,\r\n\tREPO_FILTER_PREF_TOPIC_MATCH_STRATEGY_KEY,\r\n\tREPO_FILTER_PREF_VISIBILITY_KEY,\r\n} from \"~constants\";\r\n\r\n/////////////////////////////////////////////\r\n// Repo filter preferences\r\nexport const getRepoFilterPrefVisibility =\r\n\t(): string => {\r\n\t\tconst data = localStorage.getItem(\r\n\t\t\tREPO_FILTER_PREF_VISIBILITY_KEY,\r\n\t\t);\r\n\t\tif (data !== null) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\treturn \"All\";\r\n\t};\r\nexport const setRepoFilterPrefVisibility = (\r\n\tvalue: string,\r\n) => {\r\n\tlocalStorage.setItem(\r\n\t\tREPO_FILTER_PREF_VISIBILITY_KEY,\r\n\t\tvalue,\r\n\t);\r\n};\r\nexport const getRepoFilterPrefStatus =\r\n\t(): string => {\r\n\t\tconst data = localStorage.getItem(\r\n\t\t\tREPO_FILTER_PREF_STATUS_KEY,\r\n\t\t);\r\n\t\tif (data !== null) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\treturn \"All\";\r\n\t};\r\nexport const setRepoFilterPrefStatus = (\r\n\tvalue: string,\r\n) => {\r\n\tlocalStorage.setItem(\r\n\t\tREPO_FILTER_PREF_STATUS_KEY,\r\n\t\tvalue,\r\n\t);\r\n};\r\nexport const getRepoFilterPrefTopicMatchStrategy =\r\n\t() => {\r\n\t\tconst data = localStorage.getItem(\r\n\t\t\tREPO_FILTER_PREF_TOPIC_MATCH_STRATEGY_KEY,\r\n\t\t);\r\n\t\tif (data !== null) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\treturn \"Match all\";\r\n\t};\r\nexport const setRepoFilterPrefTopicMatchStrategy =\r\n\t(value: string) => {\r\n\t\tlocalStorage.setItem(\r\n\t\t\tREPO_FILTER_PREF_TOPIC_MATCH_STRATEGY_KEY,\r\n\t\t\tvalue,\r\n\t\t);\r\n\t};\r\n/////////////////////////////////////////////\r\n// Issues filter preferences\r\nexport const getIssueFilterPrefState =\r\n\t(): string => {\r\n\t\tconst data = localStorage.getItem(\r\n\t\t\tISSUE_FILTER_PREF_STATE_KEY,\r\n\t\t);\r\n\t\tif (data !== null) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\treturn \"All\";\r\n\t};\r\nexport const setIssueFilterPrefState = (\r\n\tvalue: string,\r\n) => {\r\n\tlocalStorage.setItem(\r\n\t\tISSUE_FILTER_PREF_STATE_KEY,\r\n\t\tvalue,\r\n\t);\r\n};\r\nexport const getIssueFilterPrefOwnerType =\r\n\t(): string => {\r\n\t\tconst data = localStorage.getItem(\r\n\t\t\t\"issue-filter-pref-owner-type\",\r\n\t\t);\r\n\t\tif (data !== null) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\treturn \"User\";\r\n\t};\r\nexport const setIssueFilterPrefOwnerType = (\r\n\tvalue: string,\r\n) => {\r\n\tlocalStorage.setItem(\r\n\t\tISSUE_FILTER_PREF_OWNER_TYPE_KEY,\r\n\t\tvalue,\r\n\t);\r\n};\r\n","import {\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableRow,\r\n\tTableSortLabel,\r\n} from \"@mui/material\";\r\nimport {\r\n\tMouseEvent,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport { GenericDataCell } from \"~types/generics\";\r\n\r\ntype StyledTableHeadProps<T> = {\r\n\torder: \"asc\" | \"desc\";\r\n\torderBy: keyof T;\r\n\tonRequestSort: (value: keyof T) => void;\r\n\tcolumnDefinition: GenericDataCell<T>[];\r\n};\r\nconst StyledTableHead = <T,>(\r\n\tprops: StyledTableHeadProps<T>,\r\n) => {\r\n\tconst {\r\n\t\torder,\r\n\t\torderBy,\r\n\t\tonRequestSort,\r\n\t\tcolumnDefinition,\r\n\t} = props;\r\n\r\n\tconst createSortHandler =\r\n\t\t(property: keyof T) =>\r\n\t\t(_: MouseEvent<unknown>) => {\r\n\t\t\tonRequestSort(property);\r\n\t\t};\r\n\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columnDefinition.map(\r\n\t\t\t\t\t({ id, label }, index) => (\r\n\t\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\t\tkey={`cell-${index}`}\r\n\t\t\t\t\t\t\tsortDirection={\r\n\t\t\t\t\t\t\t\torderBy === id ? order : undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\tactive={orderBy === id}\r\n\t\t\t\t\t\t\t\tdirection={\r\n\t\t\t\t\t\t\t\t\torderBy === id ? order : \"asc\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={createSortHandler(id)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t),\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n};\r\n\r\ntype StyledTableRowProps<T> = {\r\n\titem: T;\r\n\tcolumnDefinition: GenericDataCell<T>[];\r\n};\r\nconst StyledTableRow = <T,>(\r\n\tprops: StyledTableRowProps<T>,\r\n) => {\r\n\tconst { item, columnDefinition } = props;\r\n\r\n\treturn (\r\n\t\t<TableRow>\r\n\t\t\t{columnDefinition.map(\r\n\t\t\t\t({ render }, index) => (\r\n\t\t\t\t\t<TableCell key={`data-cell-${index}`}>\r\n\t\t\t\t\t\t{render(item)}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\ntype StyledDataTableProps<T> = {\r\n\titems: T[];\r\n\tcolumnDefinition: GenericDataCell<T>[];\r\n\tdefaultOrderBy: keyof T;\r\n\torderingFn: (\r\n\t\tproperty: keyof T,\r\n\t) => ((a: T, b: T) => number) | undefined;\r\n};\r\nexport const StyledDataTable = <T,>(\r\n\tprops: StyledDataTableProps<T>,\r\n) => {\r\n\tconst {\r\n\t\torderingFn,\r\n\t\titems,\r\n\t\tcolumnDefinition,\r\n\t\tdefaultOrderBy: orderBy,\r\n\t} = props;\r\n\r\n\tconst [order, setOrder] = useState<\r\n\t\t\"asc\" | \"desc\"\r\n\t>(\"desc\");\r\n\tconst [orderBy_, setOrderBy] =\r\n\t\tuseState(orderBy);\r\n\r\n\tconst handleRequestSort = (\r\n\t\tproperty: keyof T,\r\n\t) => {\r\n\t\tconst isAsc =\r\n\t\t\torderBy_ === property && order === \"asc\";\r\n\t\tsetOrder(isAsc ? \"desc\" : \"asc\");\r\n\t\tsetOrderBy(property);\r\n\t};\r\n\r\n\tconst items_ = useMemo(() => {\r\n\t\tconst orderFn:\r\n\t\t\t| ((a: T, b: T) => number)\r\n\t\t\t| undefined = orderingFn(orderBy_);\r\n\r\n\t\tif (orderFn === undefined) {\r\n\t\t\treturn items;\r\n\t\t}\r\n\t\tconst orderedItems_ = [...items];\r\n\t\torderedItems_.sort(orderFn);\r\n\t\tif (order === \"asc\") {\r\n\t\t\torderedItems_.reverse();\r\n\t\t}\r\n\t\treturn orderedItems_;\r\n\t}, [order, orderBy_, items]);\r\n\r\n\treturn (\r\n\t\t<TableContainer>\r\n\t\t\t<Table>\r\n\t\t\t\t<StyledTableHead\r\n\t\t\t\t\tcolumnDefinition={columnDefinition}\r\n\t\t\t\t\tonRequestSort={handleRequestSort}\r\n\t\t\t\t\torder={order}\r\n\t\t\t\t\torderBy={orderBy_}\r\n\t\t\t\t/>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{items_.map((item, index) => (\r\n\t\t\t\t\t\t<StyledTableRow\r\n\t\t\t\t\t\t\tkey={`data-cell-item-${index}`}\r\n\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\tcolumnDefinition={columnDefinition}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</TableContainer>\r\n\t);\r\n};\r\n","import {\r\n\tMenuItem,\r\n\tSelect,\r\n\tSelectProps,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\n\r\ntype StyledSelectProps = SelectProps<string> & {\r\n\toptions?: { label: string; value: string }[];\r\n};\r\nexport const StyledSelect: FC<\r\n\tStyledSelectProps\r\n> = (props) => {\r\n\tconst { options, ...rest } = props;\r\n\tconst options_ = options ?? [];\r\n\treturn (\r\n\t\t<Select {...rest}>\r\n\t\t\t{options_.map(({ value, label }, index) => (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tkey={`${value}-${index}`}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t))}\r\n\t\t</Select>\r\n\t);\r\n};\r\n","import {\r\n\tListSubheader,\r\n\tMenuItem,\r\n\tSelect,\r\n\tSelectProps,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\n\r\ntype StyledSelectMultipleProps = Omit<\r\n\tSelectProps<string[]>,\r\n\t\"multiple\"\r\n> & {\r\n\toptions?: { label: string; value: string }[];\r\n\tsubheader?: string;\r\n};\r\nexport const StyledSelectMultiple: FC<\r\n\tStyledSelectMultipleProps\r\n> = (props) => {\r\n\tconst { options, subheader, ...rest } = props;\r\n\tconst options_ = options ?? [];\r\n\treturn (\r\n\t\t<Select\r\n\t\t\t{...rest}\r\n\t\t\tmultiple\r\n\t\t>\r\n\t\t\t{subheader !== \"\" &&\r\n\t\t\t\tsubheader !== undefined && (\r\n\t\t\t\t\t<ListSubheader disableSticky>\r\n\t\t\t\t\t\t{subheader}\r\n\t\t\t\t\t</ListSubheader>\r\n\t\t\t\t)}\r\n\t\t\t{options_.map(({ value, label }, index) => (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tkey={`${value}-${index}`}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t))}\r\n\t\t</Select>\r\n\t);\r\n};\r\n","import {\r\n\tTextField,\r\n\tTextFieldProps,\r\n} from \"@mui/material\";\r\nimport {\r\n\tChangeEvent,\r\n\tFC,\r\n\tKeyboardEvent,\r\n} from \"react\";\r\n\r\ntype StyledTextFieldProps = Omit<\r\n\tTextFieldProps,\r\n\t\"onChange\"\r\n> & {\r\n\tonEnter?: () => void;\r\n\tonChange?: (v: string) => void;\r\n};\r\nexport const StyledTextField: FC<\r\n\tStyledTextFieldProps\r\n> = (props) => {\r\n\tconst { onEnter, onChange, ...rest } = props;\r\n\r\n\tconst handleKeyUp = (\r\n\t\te: KeyboardEvent<HTMLDivElement>,\r\n\t) => {\r\n\t\tif (\r\n\t\t\te.key === \"Enter\" &&\r\n\t\t\tonEnter !== undefined\r\n\t\t) {\r\n\t\t\tconsole.log(\"entered\");\r\n\t\t\tonEnter();\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\tconst handleChange = (\r\n\t\te: ChangeEvent<\r\n\t\t\tHTMLInputElement | HTMLTextAreaElement\r\n\t\t>,\r\n\t) => {\r\n\t\tif (onChange !== undefined) {\r\n\t\t\tonChange(e.target.value.normalize());\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\t{...rest}\r\n\t\t\tonKeyUp={handleKeyUp}\r\n\t\t\tonChange={handleChange}\r\n\t\t/>\r\n\t);\r\n};\r\n","import {\r\n\tClearRounded,\r\n\tExpandLessRounded,\r\n\tExpandMoreRounded,\r\n\tFilterListRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tBox,\r\n\tCollapse,\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tSelectChangeEvent,\r\n\tStack,\r\n\tToolbar,\r\n\tTypography,\r\n\tcapitalize,\r\n} from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tFragment,\r\n\tReactNode,\r\n\tuseState,\r\n} from \"react\";\r\nimport {\r\n\tLink,\r\n\tuseSubmit,\r\n} from \"react-router-dom\";\r\nimport {\r\n\tISSUE_FILTER_OWNER_TYPE_OPTIONS,\r\n\tISSUE_FILTER_STATE_OPTIONS,\r\n} from \"~constants\";\r\nimport {\r\n\torderByNumber,\r\n\torderByString,\r\n} from \"~core/sorting\";\r\nimport { normalizeDateString } from \"~core/time\";\r\nimport {\r\n\tgetIssueFilterPrefOwnerType,\r\n\tgetIssueFilterPrefState,\r\n} from \"~database/preferences\";\r\nimport { GenericSelectOptions } from \"~types/generics\";\r\nimport { RepoIssueSchema } from \"~types/schemas\";\r\nimport { StyledDataTable } from \"./StyledDataTable\";\r\nimport { StyledSelect } from \"./StyledSelect\";\r\nimport { StyledSelectMultiple } from \"./StyledSelectMultiple\";\r\nimport { StyledTextField } from \"./StyledTextField\";\r\n\r\ntype HeadCell = {\r\n\tid: keyof RepoIssueSchema;\r\n\tlabel: string;\r\n\trender: (issue: RepoIssueSchema) => ReactNode;\r\n};\r\nconst COLUMN_DEFINITION: HeadCell[] = [\r\n\t{\r\n\t\tid: \"title\",\r\n\t\tlabel: \"Title\",\r\n\t\trender: (issue) => (\r\n\t\t\t<Typography\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={`/repositories/${issue.repo_full_name}/issues/${issue.issue_number}`}\r\n\t\t\t>\r\n\t\t\t\t{issue.title}\r\n\t\t\t</Typography>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"repo_full_name\",\r\n\t\tlabel: \"Repository\",\r\n\t\trender: (issue) => (\r\n\t\t\t<Typography\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={`/repositories/${issue.repo_full_name}`}\r\n\t\t\t>\r\n\t\t\t\t{issue.repo_full_name}\r\n\t\t\t</Typography>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"issue_number\",\r\n\t\tlabel: \"Issue number\",\r\n\t\trender: (issue) => issue.issue_number,\r\n\t},\r\n\t{\r\n\t\tid: \"owner_type\",\r\n\t\tlabel: \"Type\",\r\n\t\trender: (issue) => issue.owner_type,\r\n\t},\r\n\t{\r\n\t\tid: \"state\",\r\n\t\tlabel: \"State\",\r\n\t\trender: (issue) => capitalize(issue.state),\r\n\t},\r\n\t{\r\n\t\tid: \"updated_at\",\r\n\t\tlabel: \"Last updated\",\r\n\t\trender: (issue) =>\r\n\t\t\tnormalizeDateString(\r\n\t\t\t\tissue.updated_at,\r\n\t\t\t\t\"Never\",\r\n\t\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"created_at\",\r\n\t\tlabel: \"Created\",\r\n\t\trender: (issue) =>\r\n\t\t\tnormalizeDateString(\r\n\t\t\t\tissue.created_at,\r\n\t\t\t\t\"Unknown\",\r\n\t\t\t),\r\n\t},\r\n];\r\n\r\nconst getOrderingFn = (\r\n\tproperty: keyof RepoIssueSchema,\r\n) => {\r\n\tlet orderFn:\r\n\t\t| ((\r\n\t\t\t\ta: RepoIssueSchema,\r\n\t\t\t\tb: RepoIssueSchema,\r\n\t\t  ) => number)\r\n\t\t| undefined;\r\n\tswitch (property) {\r\n\t\tcase \"issue_number\":\r\n\t\t\torderFn = (a, b) => {\r\n\t\t\t\treturn orderByNumber(\r\n\t\t\t\t\ta[property] as\r\n\t\t\t\t\t\t| number\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t\tb[property] as\r\n\t\t\t\t\t\t| number\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\tcase \"title\":\r\n\t\tcase \"repo_full_name\":\r\n\t\tcase \"owner_type\":\r\n\t\tcase \"state\":\r\n\t\tcase \"created_at\":\r\n\t\tcase \"updated_at\":\r\n\t\t\torderFn = (a, b) => {\r\n\t\t\t\treturn orderByString(\r\n\t\t\t\t\ta[property] as\r\n\t\t\t\t\t\t| string\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t\tb[property] as\r\n\t\t\t\t\t\t| string\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t}\r\n\treturn orderFn;\r\n};\r\n\r\ntype WrappableListItemProps = {\r\n\tchildren: ReactNode;\r\n\ttext: string;\r\n};\r\nconst WrappableListItem: FC<\r\n\tWrappableListItemProps\r\n> = (props) => {\r\n\tconst { text, children } = props;\r\n\treturn (\r\n\t\t<ListItem disableGutters>\r\n\t\t\t<Stack\r\n\t\t\t\twidth=\"100%\"\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\talignItems=\"start\"\r\n\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\twidth: \"max(200px, 40%)\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</ListItemText>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tminWidth=\"max(200px, 25%)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Stack>\r\n\t\t\t</Stack>\r\n\t\t</ListItem>\r\n\t);\r\n};\r\n\r\ntype StyledToolbarProps = {\r\n\ttitle: string;\r\n\trepoFullNames: string[];\r\n\townerType: string;\r\n\tstate: string;\r\n\titemCount: number;\r\n\trepoOptions: GenericSelectOptions<string>[];\r\n};\r\nconst StyledToolbar: FC<StyledToolbarProps> = (\r\n\tprops,\r\n) => {\r\n\tconst {\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t\ttitle: loadedTitle,\r\n\t\titemCount,\r\n\t\trepoOptions,\r\n\t} = props;\r\n\r\n\tconst submit = useSubmit();\r\n\tconst [title, setTitle] = useState(loadedTitle);\r\n\tconst handleSubmit = (\r\n\t\tkey: string | undefined = undefined,\r\n\t\tvalue: string | undefined = undefined,\r\n\t) => {\r\n\t\tconst query: Record<\r\n\t\t\tstring,\r\n\t\t\tstring | string[]\r\n\t\t> = {\r\n\t\t\ttitle,\r\n\t\t\tstate,\r\n\t\t\townerType,\r\n\t\t\trepoFullNames,\r\n\t\t};\r\n\t\tif (\r\n\t\t\tkey !== undefined &&\r\n\t\t\tvalue !== undefined\r\n\t\t) {\r\n\t\t\tquery[key] = value;\r\n\t\t}\r\n\t\tsubmit(query, {\r\n\t\t\taction: \"./\",\r\n\t\t\tmethod: \"get\",\r\n\t\t});\r\n\t};\r\n\tconst handleOwnerTypeChange = (\r\n\t\tevent: SelectChangeEvent<string>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"ownerType\", value);\r\n\t};\r\n\tconst handleStateChange = (\r\n\t\tevent: SelectChangeEvent<string>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"state\", value);\r\n\t};\r\n\tconst handleRepoFullNamesChange = (\r\n\t\tevent: SelectChangeEvent<string[]>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\r\n\t\t\t\"repoFullNames\",\r\n\t\t\tvalue.toString(),\r\n\t\t);\r\n\t};\r\n\tconst handleRepoFullNamesReset = () => {\r\n\t\thandleSubmit(\"repoFullNames\", \"\");\r\n\t};\r\n\r\n\tconst [filterOpen, setFilterOpen] =\r\n\t\tuseState(false);\r\n\tconst toggleFilter = () => {\r\n\t\tsetFilterOpen(!filterOpen);\r\n\t};\r\n\r\n\tlet itemCountMsg = `Showing ${itemCount}`;\r\n\tif (itemCount === 1) {\r\n\t\titemCountMsg = `${itemCountMsg} issue`;\r\n\t} else {\r\n\t\titemCountMsg = `${itemCountMsg} issues`;\r\n\t}\r\n\r\n\tlet expandIcon = filterOpen ? (\r\n\t\t<ExpandLessRounded />\r\n\t) : (\r\n\t\t<ExpandMoreRounded />\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Toolbar\r\n\t\t\t\tdisableGutters\r\n\t\t\t\tvariant=\"dense\"\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\tflexWrap: \"wrap\",\r\n\t\t\t\t\tgap: 1,\r\n\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StyledTextField\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"Search issue\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\tonChange={setTitle}\r\n\t\t\t\t\t\tonEnter={handleSubmit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={() => handleSubmit()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FilterListRounded />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={toggleFilter}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{expandIcon}\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Stack>\r\n\t\t\t\t<Typography>{itemCountMsg}</Typography>\r\n\t\t\t</Toolbar>\r\n\t\t\t<Collapse in={filterOpen}>\r\n\t\t\t\t<List disablePadding>\r\n\t\t\t\t\t<WrappableListItem text=\"Repositories\">\r\n\t\t\t\t\t\t<StyledSelectMultiple\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsubheader=\"Repositories\"\r\n\t\t\t\t\t\t\trenderValue={() =>\r\n\t\t\t\t\t\t\t\t`${repoFullNames.length} selected`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={repoFullNames}\r\n\t\t\t\t\t\t\toptions={repoOptions}\r\n\t\t\t\t\t\t\tonChange={handleRepoFullNamesChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tonClick={handleRepoFullNamesReset}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ClearRounded />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t\t<WrappableListItem text=\"State\">\r\n\t\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={state}\r\n\t\t\t\t\t\t\toptions={ISSUE_FILTER_STATE_OPTIONS}\r\n\t\t\t\t\t\t\tonChange={handleStateChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t\t<WrappableListItem text=\"Owner type\">\r\n\t\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={ownerType}\r\n\t\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\t\tISSUE_FILTER_OWNER_TYPE_OPTIONS\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={handleOwnerTypeChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t</List>\r\n\t\t\t</Collapse>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\ntype IssueDataTableProps = {\r\n\tdisableFilter?: boolean;\r\n\torderBy?: keyof RepoIssueSchema;\r\n\tissues: RepoIssueSchema[];\r\n\ttitle?: string;\r\n\townerType?: string;\r\n\trepoFullNames?: string[];\r\n\tstate?: string;\r\n\trepoOptions?: GenericSelectOptions<string>[];\r\n};\r\nexport const IssueDataTable: React.FC<\r\n\tIssueDataTableProps\r\n> = (props) => {\r\n\tconst {\r\n\t\torderBy,\r\n\t\tdisableFilter,\r\n\t\tissues,\r\n\t\trepoOptions: loadedRepoOptions,\r\n\t\ttitle: loadedTitle,\r\n\t\trepoFullNames: loadedRepoFullNames,\r\n\t\townerType: loadedOwnerType,\r\n\t\tstate: loadedState,\r\n\t} = props;\r\n\r\n\tconst title = loadedTitle ?? \"\";\r\n\tconst repoFullNames = loadedRepoFullNames ?? [];\r\n\tconst ownerType =\r\n\t\tloadedOwnerType ??\r\n\t\tgetIssueFilterPrefOwnerType();\r\n\tconst state =\r\n\t\tloadedState ?? getIssueFilterPrefState();\r\n\tconst repoOptions = loadedRepoOptions ?? [];\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t{!disableFilter && (\r\n\t\t\t\t<StyledToolbar\r\n\t\t\t\t\titemCount={issues.length}\r\n\t\t\t\t\townerType={ownerType}\r\n\t\t\t\t\trepoFullNames={repoFullNames}\r\n\t\t\t\t\trepoOptions={repoOptions}\r\n\t\t\t\t\tstate={state}\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<StyledDataTable\r\n\t\t\t\titems={issues}\r\n\t\t\t\tcolumnDefinition={COLUMN_DEFINITION}\r\n\t\t\t\tdefaultOrderBy={orderBy ?? \"updated_at\"}\r\n\t\t\t\torderingFn={getOrderingFn}\r\n\t\t\t/>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import {\r\n\tClearRounded,\r\n\tExpandLessRounded,\r\n\tExpandMoreRounded,\r\n\tFilterListRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tBox,\r\n\tCollapse,\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tSelectChangeEvent,\r\n\tStack,\r\n\tToolbar,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport {\r\n\tREPO_FILTER_STATUS_OPTIONS,\r\n\tREPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS,\r\n\tREPO_FILTER_VISIBILITY_OPTIONS,\r\n} from \"constants/REPO_FILTER_OPTIONS\";\r\nimport {\r\n\tFC,\r\n\tFragment,\r\n\tReactNode,\r\n\tuseState,\r\n} from \"react\";\r\nimport {\r\n\tLink,\r\n\tuseSubmit,\r\n} from \"react-router-dom\";\r\nimport {\r\n\torderByBoolean,\r\n\torderByString,\r\n} from \"~core/sorting\";\r\nimport { normalizeDateString } from \"~core/time\";\r\nimport {\r\n\tgetRepoFilterPrefStatus,\r\n\tgetRepoFilterPrefTopicMatchStrategy,\r\n\tgetRepoFilterPrefVisibility,\r\n} from \"~database/preferences\";\r\nimport { GenericSelectOptions } from \"~types/generics\";\r\nimport { RepoSchema } from \"~types/schemas\";\r\nimport { StyledDataTable } from \"./StyledDataTable\";\r\nimport { StyledSelect } from \"./StyledSelect\";\r\nimport { StyledSelectMultiple } from \"./StyledSelectMultiple\";\r\nimport { StyledTextField } from \"./StyledTextField\";\r\n\r\ntype DataCell = {\r\n\tid: keyof RepoSchema;\r\n\tlabel: string;\r\n\trender: (repo: RepoSchema) => ReactNode;\r\n};\r\nconst COLUMN_DEFINITION: DataCell[] = [\r\n\t{\r\n\t\tid: \"full_name\",\r\n\t\tlabel: \"Name\",\r\n\t\trender: (repo) => (\r\n\t\t\t<Typography\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={`/repositories/${repo.full_name}`}\r\n\t\t\t>\r\n\t\t\t\t{repo.full_name}\r\n\t\t\t</Typography>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"is_archived\",\r\n\t\tlabel: \"Status\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.is_archived ? \"Archived\" : \"Active\",\r\n\t},\r\n\t{\r\n\t\tid: \"is_private\",\r\n\t\tlabel: \"Visibility\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.is_private ? \"Private\" : \"Public\",\r\n\t},\r\n\t{\r\n\t\tid: \"pushed_at\",\r\n\t\tlabel: \"Last pushed\",\r\n\t\trender: (repo) =>\r\n\t\t\tnormalizeDateString(\r\n\t\t\t\trepo.pushed_at,\r\n\t\t\t\t\"Never\",\r\n\t\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"updated_at\",\r\n\t\tlabel: \"Last updated\",\r\n\t\trender: (repo) =>\r\n\t\t\tnormalizeDateString(\r\n\t\t\t\trepo.updated_at,\r\n\t\t\t\t\"Never\",\r\n\t\t\t),\r\n\t},\r\n\t{\r\n\t\tid: \"created_at\",\r\n\t\tlabel: \"Created\",\r\n\t\trender: (repo) =>\r\n\t\t\tnormalizeDateString(\r\n\t\t\t\trepo.created_at,\r\n\t\t\t\t\"Unknown\",\r\n\t\t\t),\r\n\t},\r\n];\r\n\r\nconst getOrderingFn = (\r\n\tproperty: keyof RepoSchema,\r\n):\r\n\t| ((a: RepoSchema, b: RepoSchema) => number)\r\n\t| undefined => {\r\n\tswitch (property) {\r\n\t\tcase \"is_archived\":\r\n\t\tcase \"is_private\":\r\n\t\t\treturn (a, b) =>\r\n\t\t\t\torderByBoolean(\r\n\t\t\t\t\ta[property] as\r\n\t\t\t\t\t\t| boolean\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t\tb[property] as\r\n\t\t\t\t\t\t| boolean\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t);\r\n\t\tcase \"full_name\":\r\n\t\tcase \"pushed_at\":\r\n\t\tcase \"created_at\":\r\n\t\tcase \"updated_at\":\r\n\t\t\treturn (a, b) =>\r\n\t\t\t\torderByString(\r\n\t\t\t\t\ta[property] as\r\n\t\t\t\t\t\t| string\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t\tb[property] as\r\n\t\t\t\t\t\t| string\r\n\t\t\t\t\t\t| undefined\r\n\t\t\t\t\t\t| null,\r\n\t\t\t\t);\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\ntype WrappableListItemProps = {\r\n\tchildren: ReactNode;\r\n\ttext: string;\r\n};\r\nconst WrappableListItem: FC<\r\n\tWrappableListItemProps\r\n> = (props) => {\r\n\tconst { text, children } = props;\r\n\treturn (\r\n\t\t<ListItem disableGutters>\r\n\t\t\t<Stack\r\n\t\t\t\twidth=\"100%\"\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\talignItems=\"start\"\r\n\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\twidth: \"max(200px, 40%)\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</ListItemText>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tminWidth=\"max(200px, 25%)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Stack>\r\n\t\t\t</Stack>\r\n\t\t</ListItem>\r\n\t);\r\n};\r\n\r\ntype StyledToolbarProps = {\r\n\tname: string;\r\n\ttopics: string[];\r\n\tvisibility: string;\r\n\tstatus: string;\r\n\ttopicMatchStrategy: string;\r\n\titemCount: number;\r\n\ttopicOptions: GenericSelectOptions<string>[];\r\n};\r\nconst StyledToolbar: FC<StyledToolbarProps> = (\r\n\tprops,\r\n) => {\r\n\tconst {\r\n\t\tname: loadedName,\r\n\t\tstatus,\r\n\t\ttopics,\r\n\t\tvisibility,\r\n\t\ttopicMatchStrategy,\r\n\t\titemCount,\r\n\t\ttopicOptions,\r\n\t} = props;\r\n\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [name, setName] = useState(loadedName);\r\n\tconst handleSubmit = (\r\n\t\tkey: string | undefined = undefined,\r\n\t\tvalue: string | undefined = undefined,\r\n\t) => {\r\n\t\tconst query: Record<\r\n\t\t\tstring,\r\n\t\t\tstring | string[]\r\n\t\t> = {\r\n\t\t\tname,\r\n\t\t\ttopics,\r\n\t\t\ttopicMatchStrategy,\r\n\t\t\tvisibility,\r\n\t\t\tstatus,\r\n\t\t};\r\n\t\tif (\r\n\t\t\tkey !== undefined &&\r\n\t\t\tvalue !== undefined\r\n\t\t) {\r\n\t\t\tquery[key] = value;\r\n\t\t}\r\n\t\tsubmit(query, {\r\n\t\t\taction: \"./\",\r\n\t\t\tmethod: \"get\",\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleNameSubmit = () => {\r\n\t\thandleSubmit(\"name\", name);\r\n\t};\r\n\tconst handleTopicMatchStrategyChange = (\r\n\t\tevent: SelectChangeEvent<string>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"topicMatchStrategy\", value);\r\n\t};\r\n\tconst handleStatusChange = (\r\n\t\tevent: SelectChangeEvent<string>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"status\", value);\r\n\t};\r\n\tconst handleVisibilityChange = (\r\n\t\tevent: SelectChangeEvent<string>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"visibility\", value);\r\n\t};\r\n\tconst handleTopicsChange = (\r\n\t\tevent: SelectChangeEvent<string[]>,\r\n\t) => {\r\n\t\tconst value = event.target.value;\r\n\t\thandleSubmit(\"topics\", value.toString());\r\n\t};\r\n\tconst handleTopicsReset = () => {\r\n\t\thandleSubmit(\"topics\", \"\");\r\n\t};\r\n\r\n\tconst [filterOpen, setFilterOpen] =\r\n\t\tuseState(false);\r\n\tconst toggleFilter = () => {\r\n\t\tsetFilterOpen(!filterOpen);\r\n\t};\r\n\r\n\tlet itemCountMsg = `Showing ${itemCount}`;\r\n\tif (itemCount === 1) {\r\n\t\titemCountMsg = `${itemCountMsg} repository`;\r\n\t} else {\r\n\t\titemCountMsg = `${itemCountMsg} repositories`;\r\n\t}\r\n\r\n\tconst expandIcon = filterOpen ? (\r\n\t\t<ExpandLessRounded />\r\n\t) : (\r\n\t\t<ExpandMoreRounded />\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Toolbar\r\n\t\t\t\tdisableGutters\r\n\t\t\t\tvariant=\"dense\"\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\tflexWrap: \"wrap\",\r\n\t\t\t\t\tgap: 1,\r\n\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StyledTextField\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"Search repository\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\tonChange={setName}\r\n\t\t\t\t\t\tonEnter={handleNameSubmit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={() => handleSubmit()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FilterListRounded />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={toggleFilter}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{expandIcon}\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Stack>\r\n\t\t\t\t<Typography>{itemCountMsg}</Typography>\r\n\t\t\t</Toolbar>\r\n\t\t\t<Collapse in={filterOpen}>\r\n\t\t\t\t<List disablePadding>\r\n\t\t\t\t\t<WrappableListItem text=\"Topics\">\r\n\t\t\t\t\t\t<StyledSelectMultiple\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsubheader=\"Topics\"\r\n\t\t\t\t\t\t\trenderValue={() =>\r\n\t\t\t\t\t\t\t\t`${itemCount} selected`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={topics}\r\n\t\t\t\t\t\t\toptions={topicOptions}\r\n\t\t\t\t\t\t\tonChange={handleTopicsChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tonClick={handleTopicsReset}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ClearRounded />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t\t<WrappableListItem text=\"Topic match strategy\">\r\n\t\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={topicMatchStrategy}\r\n\t\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\t\tREPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={\r\n\t\t\t\t\t\t\t\thandleTopicMatchStrategyChange\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t\t<WrappableListItem text=\"Visibility\">\r\n\t\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={visibility}\r\n\t\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\t\tREPO_FILTER_VISIBILITY_OPTIONS\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={handleVisibilityChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t\t<WrappableListItem text=\"Status\">\r\n\t\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={status}\r\n\t\t\t\t\t\t\toptions={REPO_FILTER_STATUS_OPTIONS}\r\n\t\t\t\t\t\t\tonChange={handleStatusChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t</List>\r\n\t\t\t</Collapse>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\ntype RepoDataTableProps = {\r\n\tdisableFilter?: boolean;\r\n\torderBy?: keyof RepoSchema;\r\n\trepos: RepoSchema[];\r\n\ttopicOptions?: GenericSelectOptions<string>[];\r\n\tname?: string;\r\n\ttopics?: string[];\r\n\ttopicMatchStrategy?: string;\r\n\tvisibility?: string;\r\n\tstatus?: string;\r\n};\r\nexport const RepoDataTable: React.FC<\r\n\tRepoDataTableProps\r\n> = (props) => {\r\n\tconst {\r\n\t\torderBy,\r\n\t\tdisableFilter,\r\n\t\trepos,\r\n\t\ttopicOptions: loadedTopicOptions,\r\n\t\tname: loadedName,\r\n\t\ttopicMatchStrategy: loadedTopicMatchStrategy,\r\n\t\tstatus: loadedStatus,\r\n\t\ttopics: loadedTopics,\r\n\t\tvisibility: loadedVisibility,\r\n\t} = props;\r\n\r\n\tconst name = loadedName ?? \"\";\r\n\tconst topics = loadedTopics ?? [];\r\n\tconst topicMatchStrategy =\r\n\t\tloadedTopicMatchStrategy ||\r\n\t\tgetRepoFilterPrefTopicMatchStrategy();\r\n\tconst visibility =\r\n\t\tloadedVisibility ||\r\n\t\tgetRepoFilterPrefVisibility();\r\n\tconst status =\r\n\t\tloadedStatus || getRepoFilterPrefStatus();\r\n\tconst topicOptions = loadedTopicOptions ?? [];\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t{!disableFilter && (\r\n\t\t\t\t<StyledToolbar\r\n\t\t\t\t\titemCount={repos.length}\r\n\t\t\t\t\tname={name}\r\n\t\t\t\t\tstatus={status}\r\n\t\t\t\t\ttopicMatchStrategy={topicMatchStrategy}\r\n\t\t\t\t\ttopicOptions={topicOptions}\r\n\t\t\t\t\ttopics={topics}\r\n\t\t\t\t\tvisibility={visibility}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<StyledDataTable\r\n\t\t\t\titems={repos}\r\n\t\t\t\torderingFn={getOrderingFn}\r\n\t\t\t\tdefaultOrderBy={orderBy ?? \"pushed_at\"}\r\n\t\t\t\tcolumnDefinition={COLUMN_DEFINITION}\r\n\t\t\t/>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import {\r\n\tBreadcrumbs,\r\n\tBreadcrumbsProps,\r\n\tTypography,\r\n\tTypographyProps,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\ntype StyledBreadcrumbs = {\r\n\tpath: string;\r\n\tbreadcrumbsProps?: BreadcrumbsProps;\r\n\ttypographyProps?: Omit<TypographyProps, \"ref\">;\r\n};\r\nexport const StyledBreadcrumbs: FC<\r\n\tStyledBreadcrumbs\r\n> = (props) => {\r\n\tconst {\r\n\t\tpath: path,\r\n\t\tbreadcrumbsProps,\r\n\t\ttypographyProps,\r\n\t} = props;\r\n\r\n\tconst paths = path.normalize().split(\"/\");\r\n\tconst _paths = paths\r\n\t\t.filter((path) => path.trim().length > 0)\r\n\t\t.map((path, index) => (\r\n\t\t\t<Typography\r\n\t\t\t\t{...typographyProps}\r\n\t\t\t\tkey={`${index}-${path}`}\r\n\t\t\t\tcolor=\"text.secondary\"\r\n\t\t\t\twhiteSpace=\"nowrap\"\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={\r\n\t\t\t\t\t\"/\" +\r\n\t\t\t\t\tpaths.slice(1, index + 1).join(\"/\")\r\n\t\t\t\t}\r\n\t\t\t\tsx={{\r\n\t\t\t\t\ttextDecoration: \"none\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{path}\r\n\t\t\t</Typography>\r\n\t\t));\r\n\r\n\treturn (\r\n\t\t<Breadcrumbs {...breadcrumbsProps}>\r\n\t\t\t{_paths}\r\n\t\t</Breadcrumbs>\r\n\t);\r\n};\r\n","import {\r\n\tCard,\r\n\tCardHeader,\r\n\tStack,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { IssueDataTable } from \"~components/IssueDataTable\";\r\nimport { RepoDataTable } from \"~components/RepoDataTable\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nexport const HomePage: FC = () => {\r\n\tconst {\r\n\t\tactiveRepos,\r\n\t\tarchivedRepos,\r\n\t\tclosedIssues,\r\n\t\topenIssues,\r\n\t\trecentRepos,\r\n\t\trecentIssues,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath=\"~\"\r\n\t\t\t\t\tbreadcrumbsProps={{\r\n\t\t\t\t\t\tsx: { flexGrow: 1 },\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Stack\r\n\t\t\t\tspacing={2}\r\n\t\t\t\tpadding={4}\r\n\t\t\t>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tgap={1}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Card\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tsx={{ flexGrow: 1, minWidth: 250 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={activeRepos}\r\n\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\tactiveRepos > 1\r\n\t\t\t\t\t\t\t\t\t? \"Active repositories\"\r\n\t\t\t\t\t\t\t\t\t: \"Active repositoriy\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttitleTypographyProps={{\r\n\t\t\t\t\t\t\t\tcolor: \"secondary\",\r\n\t\t\t\t\t\t\t\tfontWeight: \"900\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<Card\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tsx={{ flexGrow: 1, minWidth: 250 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={archivedRepos}\r\n\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\tarchivedRepos > 1\r\n\t\t\t\t\t\t\t\t\t? \"Archived repositories\"\r\n\t\t\t\t\t\t\t\t\t: \"Archived repositoriy\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttitleTypographyProps={{\r\n\t\t\t\t\t\t\t\tcolor: \"secondary\",\r\n\t\t\t\t\t\t\t\tfontWeight: \"900\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<Card\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tsx={{ flexGrow: 1, minWidth: 250 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={openIssues}\r\n\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\topenIssues > 1\r\n\t\t\t\t\t\t\t\t\t? \"Open issues\"\r\n\t\t\t\t\t\t\t\t\t: \"Open issue\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttitleTypographyProps={{\r\n\t\t\t\t\t\t\t\tcolor: \"secondary\",\r\n\t\t\t\t\t\t\t\tfontWeight: \"900\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<Card\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tsx={{ flexGrow: 1, minWidth: 250 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={closedIssues}\r\n\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\tclosedIssues > 1\r\n\t\t\t\t\t\t\t\t\t? \"Closed issues\"\r\n\t\t\t\t\t\t\t\t\t: \"Closed issue\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttitleTypographyProps={{\r\n\t\t\t\t\t\t\t\tcolor: \"secondary\",\r\n\t\t\t\t\t\t\t\tfontWeight: \"900\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Stack>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tfontSize=\"large\"\r\n\t\t\t\t\tfontWeight=\"bold\"\r\n\t\t\t\t>\r\n\t\t\t\t\tRecent repositories\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<RepoDataTable\r\n\t\t\t\t\trepos={recentRepos}\r\n\t\t\t\t\torderBy=\"pushed_at\"\r\n\t\t\t\t\tdisableFilter\r\n\t\t\t\t/>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tfontSize=\"large\"\r\n\t\t\t\t\tfontWeight=\"bold\"\r\n\t\t\t\t>\r\n\t\t\t\t\tRecent issues\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<IssueDataTable\r\n\t\t\t\t\tissues={recentIssues}\r\n\t\t\t\t\torderBy=\"updated_at\"\r\n\t\t\t\t\tdisableFilter\r\n\t\t\t\t/>\r\n\t\t\t</Stack>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\r\n\tDBSchema,\r\n\tIDBPDatabase,\r\n\topenDB,\r\n} from \"idb\";\r\nimport {\r\n\tCollectionSchema,\r\n\tRepoIssueCommentSchema,\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\n\r\ninterface Database extends DBSchema {\r\n\tcollections: {\r\n\t\tkey: string;\r\n\t\tvalue: CollectionSchema;\r\n\t};\r\n\trepos: {\r\n\t\tkey: string;\r\n\t\tvalue: RepoSchema;\r\n\t\tindexes: {\r\n\t\t\t\"by-full_name\": string;\r\n\t\t\t\"by-id\": number;\r\n\t\t};\r\n\t};\r\n\tissues: {\r\n\t\tkey: number;\r\n\t\tvalue: RepoIssueSchema;\r\n\t\tindexes: {\r\n\t\t\t\"by-repo_id\": number;\r\n\t\t};\r\n\t};\r\n\tissueComments: {\r\n\t\tkey: number;\r\n\t\tvalue: RepoIssueCommentSchema;\r\n\t\tindexes: {\r\n\t\t\t\"by-issue_id\": number;\r\n\t\t};\r\n\t};\r\n}\r\n\r\nconst db1 = (db: IDBPDatabase<Database>) => {\r\n\tconst repoStore = db.createObjectStore(\r\n\t\t\"repos\",\r\n\t\t{\r\n\t\t\tkeyPath: \"id\",\r\n\t\t\tautoIncrement: false,\r\n\t\t},\r\n\t);\r\n\trepoStore.createIndex(\r\n\t\t\"by-full_name\",\r\n\t\t\"full_name\",\r\n\t\t{\r\n\t\t\tunique: true,\r\n\t\t\tmultiEntry: false,\r\n\t\t},\r\n\t);\r\n\trepoStore.createIndex(\"by-id\", \"id\", {\r\n\t\tunique: true,\r\n\t\tmultiEntry: false,\r\n\t});\r\n\tconst issueStore = db.createObjectStore(\r\n\t\t\"issues\",\r\n\t\t{\r\n\t\t\tkeyPath: \"id\",\r\n\t\t\tautoIncrement: false,\r\n\t\t},\r\n\t);\r\n\tissueStore.createIndex(\r\n\t\t\"by-repo_id\",\r\n\t\t\"repo_id\",\r\n\t\t{ multiEntry: true, unique: false },\r\n\t);\r\n\tconst issueCommentStore = db.createObjectStore(\r\n\t\t\"issueComments\",\r\n\t\t{\r\n\t\t\tkeyPath: \"id\",\r\n\t\t\tautoIncrement: false,\r\n\t\t},\r\n\t);\r\n\tissueCommentStore.createIndex(\r\n\t\t\"by-issue_id\",\r\n\t\t\"issue_id\",\r\n\t\t{ multiEntry: true, unique: false },\r\n\t);\r\n};\r\n\r\nconst db2 = (db: IDBPDatabase<Database>) => {\r\n\tdb.createObjectStore(\"collections\", {\r\n\t\tkeyPath: \"name\",\r\n\t\tautoIncrement: false,\r\n\t});\r\n};\r\n\r\nexport const dbPromise = openDB<Database>(\r\n\t\"primary\",\r\n\t2,\r\n\t{\r\n\t\tupgrade(db, oldVersion) {\r\n\t\t\tif (oldVersion < 1) {\r\n\t\t\t\tdb1(db);\r\n\t\t\t}\r\n\t\t\tif (oldVersion < 2) {\r\n\t\t\t\tdb2(db);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n);\r\n","import { Octokit } from \"octokit\";\r\nimport {\r\n\tRepoIssueCommentSchema,\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\n\r\nconst getToken = () => {\r\n\tconst token = localStorage.getItem(\r\n\t\t\"personal-access-token\",\r\n\t);\r\n\tif (token === null) {\r\n\t\treturn \"-1\";\r\n\t}\r\n\treturn token;\r\n};\r\n\r\nconst getOctokit = () => {\r\n\tconst token = getToken();\r\n\treturn new Octokit({ auth: token });\r\n};\r\n\r\nexport const getRepo = async (\r\n\tfullName: string,\r\n) => {\r\n\tconst repos = await getRepos();\r\n\tfor (const repo of repos) {\r\n\t\tif (repo.full_name === fullName) {\r\n\t\t\treturn repo;\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\nexport const getRepos = async () => {\r\n\tconst octokit = getOctokit();\r\n\tconst pages = await octokit.paginate(\r\n\t\t\"GET /user/repos\",\r\n\t);\r\n\tconst req = pages.map(\r\n\t\tasync ({\r\n\t\t\tname,\r\n\t\t\tfull_name,\r\n\t\t\ttopics,\r\n\t\t\tcreated_at,\r\n\t\t\tupdated_at,\r\n\t\t\tdescription,\r\n\t\t\tid,\r\n\t\t\thtml_url,\r\n\t\t\thomepage,\r\n\t\t\tpushed_at,\r\n\t\t\tarchived: is_archived,\r\n\t\t\tprivate: is_private,\r\n\t\t}) => ({\r\n\t\t\tid,\r\n\t\t\thtml_url,\r\n\t\t\thomepage,\r\n\t\t\tpushed_at,\r\n\t\t\tname,\r\n\t\t\tfull_name,\r\n\t\t\tdescription,\r\n\t\t\ttopics,\r\n\t\t\tcreated_at,\r\n\t\t\tupdated_at,\r\n\t\t\tis_archived,\r\n\t\t\tis_private,\r\n\t\t\treadme: await getRepoReadMe(\r\n\t\t\t\tfull_name,\r\n\t\t\t).catch((err) => {\r\n\t\t\t\tif (err.status === 404) {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tthrow err;\r\n\t\t\t}),\r\n\t\t}),\r\n\t);\r\n\r\n\tconst repos: RepoSchema[] = await Promise.all(\r\n\t\treq,\r\n\t);\r\n\r\n\treturn repos;\r\n};\r\n\r\nconst getRepoReadMe = async (\r\n\tfullName: string,\r\n) => {\r\n\tconst ocktokit = getOctokit();\r\n\tconst [owner, repo] = fullName.split(\"/\");\r\n\tconst res = await ocktokit.request(\r\n\t\t\"GET /repos/{owner}/{repo}/readme\",\r\n\t\t{\r\n\t\t\towner,\r\n\t\t\trepo,\r\n\t\t},\r\n\t);\r\n\treturn res.data.content;\r\n};\r\n\r\nexport const getRepoIssues = async (\r\n\tfullName: string,\r\n\trepoId: number,\r\n) => {\r\n\tconst ocktokit = getOctokit();\r\n\tconst [owner, repo] = fullName.split(\"/\");\r\n\tconst response = await ocktokit.paginate(\r\n\t\t\"GET /repos/{owner}/{repo}/issues\",\r\n\t\t{\r\n\t\t\towner,\r\n\t\t\trepo,\r\n\t\t\tstate: \"all\",\r\n\t\t},\r\n\t);\r\n\tconst issues: RepoIssueSchema[] = response.map(\r\n\t\t({\r\n\t\t\tid,\r\n\t\t\thtml_url,\r\n\t\t\tnumber: issue_number,\r\n\t\t\ttitle,\r\n\t\t\tstate,\r\n\t\t\tlocked,\r\n\t\t\tcreated_at,\r\n\t\t\tupdated_at,\r\n\t\t\tclosed_at,\r\n\t\t\tbody,\r\n\t\t\tuser,\r\n\t\t}) => ({\r\n\t\t\towner_type:\r\n\t\t\t\tuser === null ? null : user.type,\r\n\t\t\trepo_id: repoId,\r\n\t\t\trepo_full_name: fullName,\r\n\t\t\tid,\r\n\t\t\thtml_url,\r\n\t\t\tissue_number,\r\n\t\t\ttitle,\r\n\t\t\tstate,\r\n\t\t\tlocked,\r\n\t\t\tcreated_at,\r\n\t\t\tupdated_at,\r\n\t\t\tclosed_at,\r\n\t\t\tbody,\r\n\t\t}),\r\n\t);\r\n\treturn issues;\r\n};\r\n\r\nexport const getRepoIssueComment = async (\r\n\tfullName: string,\r\n\tissueNumber: number,\r\n\tissueId: number,\r\n) => {\r\n\tconst ocktokit = getOctokit();\r\n\tconst [owner, repo] = fullName.split(\"/\");\r\n\tconst response = await ocktokit.paginate(\r\n\t\t\"GET /repos/{owner}/{repo}/issues/{issue_number}/comments\",\r\n\t\t{\r\n\t\t\towner,\r\n\t\t\trepo,\r\n\t\t\tissue_number: issueNumber,\r\n\t\t},\r\n\t);\r\n\tconst comments: RepoIssueCommentSchema[] =\r\n\t\tresponse.map(\r\n\t\t\t({\r\n\t\t\t\tid,\r\n\t\t\t\thtml_url,\r\n\t\t\t\tcreated_at,\r\n\t\t\t\tupdated_at,\r\n\t\t\t\tbody,\r\n\t\t\t}) => ({\r\n\t\t\t\tissue_id: issueId,\r\n\t\t\t\thtml_url,\r\n\t\t\t\tid,\r\n\t\t\t\tcreated_at,\r\n\t\t\t\tupdated_at,\r\n\t\t\t\tbody,\r\n\t\t\t}),\r\n\t\t);\r\n\treturn comments;\r\n};\r\n","import { dbPromise } from \"~database/migration\";\r\nimport {\r\n\tRepoIssueCommentSchema,\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\nimport {\r\n\tgetRepoIssueComment,\r\n\tgetRepoIssues,\r\n\tgetRepos,\r\n} from \"./api\";\r\n\r\nexport const getCachedRepos = async () => {\r\n\treturn (await dbPromise).getAll(\"repos\");\r\n};\r\n\r\nexport const getCachedRepo = async (\r\n\tfullName: string,\r\n) => {\r\n\treturn (await dbPromise).getFromIndex(\r\n\t\t\"repos\",\r\n\t\t\"by-full_name\",\r\n\t\tfullName,\r\n\t);\r\n};\r\n\r\nexport const getCachedTopics = async () => {\r\n\tconst repos = await getCachedRepos();\r\n\tconst uniqueTopics = new Set<string>();\r\n\tfor (const repo of repos) {\r\n\t\tif (repo.topics === undefined) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tfor (const topic of repo.topics) {\r\n\t\t\tuniqueTopics.add(topic);\r\n\t\t}\r\n\t}\r\n\tconst topics = [...uniqueTopics];\r\n\ttopics.sort();\r\n\treturn topics;\r\n};\r\n\r\nexport const getCachedIssues = async () => {\r\n\treturn dbPromise.then((db) =>\r\n\t\tdb.getAll(\"issues\"),\r\n\t);\r\n};\r\n\r\nexport const getCachedRepoIssues = async (\r\n\trepoFullName: string,\r\n) => {\r\n\tconst repo = await getCachedRepo(repoFullName);\r\n\tif (repo === undefined) {\r\n\t\treturn [];\r\n\t}\r\n\treturn (await dbPromise).getAllFromIndex(\r\n\t\t\"issues\",\r\n\t\t\"by-repo_id\",\r\n\t\trepo.id,\r\n\t);\r\n};\r\n\r\nexport const getCachedRepoIssue = async (\r\n\trepoFullName: string,\r\n\tissueNumber: number,\r\n) => {\r\n\tconst issues = await getCachedRepoIssues(\r\n\t\trepoFullName,\r\n\t);\r\n\tfor (const issue of issues) {\r\n\t\tif (issue.issue_number === issueNumber) {\r\n\t\t\treturn issue;\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\nexport const getCachedIssueComments = async (\r\n\tissueId: number,\r\n) => {\r\n\treturn (await dbPromise).getAllFromIndex(\r\n\t\t\"issueComments\",\r\n\t\t\"by-issue_id\",\r\n\t\tissueId,\r\n\t);\r\n};\r\n\r\nconst updateCachedRepos = async (\r\n\trepos: RepoSchema[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\tconst req = repos.map((repo) =>\r\n\t\tdb.put(\"repos\", repo),\r\n\t);\r\n\tconst res = await Promise.all(req);\r\n\treturn res;\r\n};\r\n\r\nconst updateCachedRepoIssues = async (\r\n\tissues: RepoIssueSchema[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\tconst req = issues.map((issue) =>\r\n\t\tdb.put(\"issues\", issue),\r\n\t);\r\n\tconst res = await Promise.all(req);\r\n\treturn res;\r\n};\r\n\r\nconst updateCachedRepoIssueComments = async (\r\n\tissueComments: RepoIssueCommentSchema[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\treturn await Promise.all(\r\n\t\tissueComments.map((comment) =>\r\n\t\t\tdb.put(\"issueComments\", comment),\r\n\t\t),\r\n\t);\r\n};\r\n\r\nexport const syncCachedRepos = async (\r\n\tonFailure: (err: any) => void,\r\n) => {\r\n\treturn await getRepos().then(\r\n\t\t(res) => {\r\n\t\t\tupdateCachedRepos(res);\r\n\t\t\treturn [true];\r\n\t\t},\r\n\t\t(err) => {\r\n\t\t\tonFailure(err);\r\n\t\t\treturn [false];\r\n\t\t},\r\n\t);\r\n};\r\nexport const syncCachedRepoIssues = async (\r\n\tonFailure: (err: any) => void,\r\n) => {\r\n\tconst cachedRepos = await getCachedRepos();\r\n\treturn await Promise.all(\r\n\t\tcachedRepos.map(async (repo) => {\r\n\t\t\treturn await getRepoIssues(\r\n\t\t\t\trepo.full_name,\r\n\t\t\t\trepo.id,\r\n\t\t\t).then(\r\n\t\t\t\t(res) => {\r\n\t\t\t\t\tupdateCachedRepoIssues(res);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\t(err) => {\r\n\t\t\t\t\tonFailure(err);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}),\r\n\t);\r\n};\r\nexport const syncCachedRepoIssueComments = async (\r\n\tonFailure: (err: any) => void,\r\n) => {\r\n\tconst cachedIssues = await getCachedIssues();\r\n\treturn await Promise.all(\r\n\t\tcachedIssues.map(async (issue) => {\r\n\t\t\treturn await getRepoIssueComment(\r\n\t\t\t\tissue.repo_full_name,\r\n\t\t\t\tissue.issue_number,\r\n\t\t\t\tissue.id,\r\n\t\t\t).then(\r\n\t\t\t\t(res) => {\r\n\t\t\t\t\tupdateCachedRepoIssueComments(res);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\t(err) => {\r\n\t\t\t\t\tonFailure(err);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}),\r\n\t);\r\n};\r\n\r\nexport const getCollections = async () => {\r\n\tconst db = await dbPromise;\r\n\treturn await db.getAll(\"collections\");\r\n};\r\nexport const getCollection = async (\r\n\tname: string,\r\n) => {\r\n\tconst db = await dbPromise;\r\n\treturn await db.get(\"collections\", name);\r\n};\r\n\r\nexport const addCollection = async (\r\n\tname: string,\r\n\tdescription: string,\r\n\trepos: string[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\treturn db.add(\"collections\", {\r\n\t\tname,\r\n\t\tdescription,\r\n\t\trepos,\r\n\t});\r\n};\r\n\r\nexport const updateCollection = async (\r\n\tname: string,\r\n\tdescription: string,\r\n\trepos: string[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\treturn db.put(\"collections\", {\r\n\t\tname,\r\n\t\tdescription,\r\n\t\trepos,\r\n\t});\r\n};\r\n","import { LoaderFunction } from \"react-router-dom\";\r\nimport { orderByString } from \"~core/sorting\";\r\nimport {\r\n\tgetCachedIssues,\r\n\tgetCachedRepos,\r\n} from \"~database/cached\";\r\nimport {\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\tactiveRepos: number;\r\n\tarchivedRepos: number;\r\n\topenIssues: number;\r\n\tclosedIssues: number;\r\n\trecentRepos: RepoSchema[];\r\n\trecentIssues: RepoIssueSchema[];\r\n};\r\nexport const loaderHome: LoaderFunction =\r\n\tasync (): Promise<LoaderData> => {\r\n\t\tdocument.title = \"~\";\r\n\r\n\t\tconst repos = await getCachedRepos();\r\n\t\tconst issues = (\r\n\t\t\tawait getCachedIssues()\r\n\t\t).filter(\r\n\t\t\t({ owner_type }) => owner_type === \"User\",\r\n\t\t);\r\n\r\n\t\tconst activeRepos = repos.filter(\r\n\t\t\t({ is_archived }) => !is_archived,\r\n\t\t).length;\r\n\t\tconst archivedRepos =\r\n\t\t\trepos.length - activeRepos;\r\n\r\n\t\tconst openIssues = issues.filter(\r\n\t\t\t({ state }) => state === \"open\",\r\n\t\t).length;\r\n\t\tconst closedIssues =\r\n\t\t\tissues.length - openIssues;\r\n\r\n\t\trepos.sort(\r\n\t\t\t({ pushed_at: a }, { pushed_at: b }) =>\r\n\t\t\t\torderByString(a, b),\r\n\t\t);\r\n\t\tissues.sort(\r\n\t\t\t({ updated_at: a }, { updated_at: b }) =>\r\n\t\t\t\torderByString(a, b),\r\n\t\t);\r\n\t\tconst recentRepos = repos.slice(0, 5);\r\n\t\tconst recentIssues = issues.slice(0, 5);\r\n\r\n\t\tconst loaderData: LoaderData = {\r\n\t\t\tactiveRepos,\r\n\t\t\tarchivedRepos,\r\n\t\t\topenIssues,\r\n\t\t\tclosedIssues,\r\n\t\t\trecentIssues,\r\n\t\t\trecentRepos,\r\n\t\t};\r\n\r\n\t\treturn loaderData;\r\n\t};\r\n","import rehypeDocument from \"rehype-document\";\r\nimport rehypeKatex from \"rehype-katex\";\r\nimport rehypeSanitize from \"rehype-sanitize\";\r\nimport rehypeStringify from \"rehype-stringify\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport remarkMath from \"remark-math\";\r\nimport remarkParse from \"remark-parse\";\r\nimport remarkRehype from \"remark-rehype\";\r\nimport { unified } from \"unified\";\r\n\r\nexport const parseMarkdown = (\r\n\tcontent: string,\r\n) => {\r\n\treturn unified()\r\n\t\t.use(remarkParse, {\r\n\t\t\tfragment: true,\r\n\t\t})\r\n\t\t.use(remarkGfm)\r\n\t\t.use(remarkMath)\r\n\t\t.use(remarkRehype)\r\n\t\t.use(rehypeSanitize)\r\n\t\t.use(rehypeKatex)\r\n\t\t.use(rehypeDocument, {\r\n\t\t\tcss: \"https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css\",\r\n\t\t})\r\n\t\t.use(rehypeStringify)\r\n\t\t.processSync(content.normalize())\r\n\t\t.toString()\r\n\t\t.replace(\r\n\t\t\t`<table`,\r\n\t\t\t`<div style='display: block; width: 100%; overflow-x: auto'><table`,\r\n\t\t)\r\n\t\t.replace(`</table>`, `</table></div>`);\r\n};\r\n","import {\r\n\tTypography,\r\n\tTypographyProps,\r\n} from \"@mui/material\";\r\nimport { FC, useEffect, useRef } from \"react\";\r\nimport { parseMarkdown } from \"~core/markdown\";\r\n\r\ntype MarkdownProps = Omit<\r\n\tTypographyProps,\r\n\t\"ref\"\r\n> & {\r\n\tmarkdownContent: string | undefined | null;\r\n\temptyText: string | undefined;\r\n};\r\nexport const Markdown: FC<MarkdownProps> = (\r\n\tprops,\r\n) => {\r\n\tconst {\r\n\t\tmarkdownContent: content,\r\n\t\temptyText,\r\n\t\tsx,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tconst contentRef =\r\n\t\tuseRef<HTMLDivElement | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\tcontent === undefined ||\r\n\t\t\tcontent === null ||\r\n\t\t\tcontentRef === null ||\r\n\t\t\tcontentRef.current === null\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst innerHtml = parseMarkdown(content);\r\n\t\tcontentRef.current.innerHTML = innerHtml;\r\n\t}, [content]);\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\t{...rest}\r\n\t\t\tref={contentRef}\r\n\t\t\tcomponent=\"div\"\r\n\t\t\tdisplay=\"block\"\r\n\t\t\twidth=\"100%\"\r\n\t\t\tsx={{\r\n\t\t\t\t...sx,\r\n\t\t\t\toverflowX: \"auto\",\r\n\t\t\t\tfontFamily: \"IBM Plex Serif\",\r\n\t\t\t\twordBreak: \"break-word\",\r\n\t\t\t\twordWrap: \"break-word\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{emptyText}\r\n\t\t</Typography>\r\n\t);\r\n};\r\n","import {\r\n\tBox,\r\n\tContainer,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tSxProps,\r\n\tTheme,\r\n\tTypography,\r\n\tcapitalize,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nimport { ReactNode } from \"react\";\r\nimport { Markdown } from \"~components/Markdown\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport {\r\n\tnormalizeDateString,\r\n\ttoTimeStamp,\r\n} from \"~core/time\";\r\nimport {\r\n\tRepoIssueCommentSchema,\r\n\tRepoIssueSchema,\r\n} from \"~types/schemas\";\r\n\r\nconst METADATA_DEFINITIONS: {\r\n\tflexGrow: number;\r\n\tlabel: string;\r\n\trender: (repo: RepoIssueSchema) => ReactNode;\r\n}[] = [\r\n\t{\r\n\t\tlabel: \"Last updated\",\r\n\t\trender: (issue) =>\r\n\t\t\ttoTimeStamp(issue.updated_at, \"Never\"),\r\n\t\tflexGrow: 1,\r\n\t},\r\n\t{\r\n\t\tlabel: \"Created\",\r\n\t\trender: (issue) =>\r\n\t\t\ttoTimeStamp(issue.created_at, \"Unknown\"),\r\n\t\tflexGrow: 1,\r\n\t},\r\n\t{\r\n\t\tlabel: \"Closed\",\r\n\t\trender: (issue) =>\r\n\t\t\ttoTimeStamp(issue.closed_at, \"Not closed\"),\r\n\t\tflexGrow: 1,\r\n\t},\r\n\t{\r\n\t\tlabel: \"State\",\r\n\t\trender: (issue) => capitalize(issue.state),\r\n\t\tflexGrow: 0,\r\n\t},\r\n\t{\r\n\t\tlabel: \"Owner type\",\r\n\t\trender: (issue) =>\r\n\t\t\tissue.owner_type ?? \"Unknown\",\r\n\t\tflexGrow: 0,\r\n\t},\r\n];\r\n\r\ntype IssueMetaDataListProps = {\r\n\tissue: RepoIssueSchema;\r\n};\r\nconst IssueMetaData: FC<\r\n\tIssueMetaDataListProps\r\n> = (props) => {\r\n\tconst { issue } = props;\r\n\treturn (\r\n\t\t<List\r\n\t\t\tdense\r\n\t\t\tdisablePadding\r\n\t\t\tsx={{\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\tflexWrap: \"wrap\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{METADATA_DEFINITIONS.map(\r\n\t\t\t\t({ label, render, flexGrow }) => (\r\n\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\tdisableGutters\r\n\t\t\t\t\t\tdisablePadding\r\n\t\t\t\t\t\tkey={label}\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\tflexGrow,\r\n\t\t\t\t\t\t\twidth: 240,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={render(issue)}\r\n\t\t\t\t\t\t\tsecondary={label}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</List>\r\n\t);\r\n};\r\n\r\ntype IssueCommentProps = {\r\n\tcomment: RepoIssueCommentSchema;\r\n\tindex: number;\r\n};\r\nconst IssueComment: FC<IssueCommentProps> = (\r\n\tprops,\r\n) => {\r\n\tconst { index, comment } = props;\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Typography\r\n\t\t\t\tfontWeight=\"bold\"\r\n\t\t\t\tcomponent=\"a\"\r\n\t\t\t\thref={comment.html_url}\r\n\t\t\t\tsx={{\r\n\t\t\t\t\ttextDecoration: \"none\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tComment #{index}\r\n\t\t\t</Typography>\r\n\t\t\t<List\r\n\t\t\t\tdense\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={normalizeDateString(\r\n\t\t\t\t\t\tcomment.created_at,\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tsecondary=\"Created\"\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\tflexGrow: 1,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={normalizeDateString(\r\n\t\t\t\t\t\tcomment.updated_at,\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tsecondary=\"Last updated\"\r\n\t\t\t\t/>\r\n\t\t\t</List>\r\n\t\t\t<Markdown\r\n\t\t\t\tmarkdownContent={\r\n\t\t\t\t\tcomment.body ?? undefined\r\n\t\t\t\t}\r\n\t\t\t\temptyText=\"This comment does not have a body or its body not is cached.\"\r\n\t\t\t/>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport const IssueDetailsPage: FC = () => {\r\n\tconst { issue, comments } =\r\n\t\tuseLoaderData() as LoaderData;\r\n\r\n\tconst path = `~/repositories/${issue.repo_full_name}/issues/${issue.issue_number}`;\r\n\tconst breadcrumbsProps: SxProps<Theme> = {\r\n\t\tsx: {\r\n\t\t\toverflow: \"auto\",\r\n\t\t\tflexGrow: { xs: 0, sm: 1 },\r\n\t\t},\r\n\t};\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath={path}\r\n\t\t\t\t\tbreadcrumbsProps={breadcrumbsProps}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Container\r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tpaddingY: 4,\r\n\t\t\t\t\tgap: 2,\r\n\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tfontWeight=\"bold\"\r\n\t\t\t\t\t\tfontSize=\"x-large\"\r\n\t\t\t\t\t\tcomponent=\"a\"\r\n\t\t\t\t\t\thref={issue.html_url}\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\ttextDecoration: \"none\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{issue.title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<IssueMetaData issue={issue} />\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tmarkdownContent={\r\n\t\t\t\t\t\t\tissue.body ?? undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\temptyText=\"This issue does not have a body or its body is not cached.\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{comments.map((comment, index) => (\r\n\t\t\t\t\t<IssueComment\r\n\t\t\t\t\t\tkey={`comment-${comment.id}`}\r\n\t\t\t\t\t\tindex={index + 1}\r\n\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</Container>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { LoaderFunction } from \"react-router\";\r\nimport {\r\n\tgetCachedIssueComments,\r\n\tgetCachedRepoIssue,\r\n} from \"~database/cached\";\r\nimport {\r\n\tRepoIssueCommentSchema,\r\n\tRepoIssueSchema,\r\n} from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\tissue: RepoIssueSchema;\r\n\tcomments: RepoIssueCommentSchema[];\r\n};\r\nexport const loader: LoaderFunction = async ({\r\n\tparams,\r\n}) => {\r\n\tconst owner = params.owner;\r\n\tconst repoName = params.repo;\r\n\tconst issueNumber = params.issueNumber;\r\n\tif (\r\n\t\towner === undefined ||\r\n\t\trepoName === undefined ||\r\n\t\tissueNumber === undefined\r\n\t) {\r\n\t\tthrow new Response(\"\", {\r\n\t\t\tstatus: 400,\r\n\t\t\tstatusText: \"Bad requeset\",\r\n\t\t});\r\n\t}\r\n\tif (\r\n\t\t!Number.isSafeInteger(\r\n\t\t\tNumber.parseInt(issueNumber),\r\n\t\t)\r\n\t) {\r\n\t\tthrow new Response(\"\", {\r\n\t\t\tstatus: 400,\r\n\t\t\tstatusText: \"Bad requeset\",\r\n\t\t});\r\n\t}\r\n\r\n\tconst fullName = `${owner}/${repoName}`;\r\n\tconst issue = await getCachedRepoIssue(\r\n\t\tfullName,\r\n\t\tNumber.parseInt(issueNumber),\r\n\t);\r\n\tif (issue === undefined) {\r\n\t\tthrow new Response(\"Not found\", {\r\n\t\t\tstatus: 404,\r\n\t\t\tstatusText:\r\n\t\t\t\t\"Issue does not exist or it is not cached.\",\r\n\t\t});\r\n\t}\r\n\tdocument.title = issue.title;\r\n\tconst loaderData: LoaderData = {\r\n\t\tissue,\r\n\t\tcomments: await getCachedIssueComments(\r\n\t\t\tissue.id,\r\n\t\t),\r\n\t};\r\n\r\n\treturn loaderData;\r\n};\r\n","import { Box } from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useLoaderData } from \"react-router-dom\";\r\nimport { IssueDataTable } from \"~components/IssueDataTable\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nexport const IssueListPage: FC = () => {\r\n\tconst {\r\n\t\tissues,\r\n\t\trepoOptions,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath=\"~/issues\"\r\n\t\t\t\t\tbreadcrumbsProps={{\r\n\t\t\t\t\t\tsx: { flexGrow: 1 },\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Box\r\n\t\t\t\tpaddingTop={2}\r\n\t\t\t\tpaddingX={2}\r\n\t\t\t>\r\n\t\t\t\t<IssueDataTable\r\n\t\t\t\t\tissues={issues}\r\n\t\t\t\t\trepoOptions={repoOptions}\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\townerType={ownerType}\r\n\t\t\t\t\trepoFullNames={repoFullNames}\r\n\t\t\t\t\tstate={state}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { matchSorter } from \"match-sorter\";\r\nimport {\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\n\r\nexport const filterRepos = (\r\n\trepos: RepoSchema[],\r\n\tname: string,\r\n\ttopics: string[],\r\n\tvisibility: string,\r\n\tstatus: string,\r\n\ttopicFilterMode: string,\r\n) => {\r\n\tlet items = [...repos];\r\n\r\n\tif (visibility === \"Private\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => item.is_private,\r\n\t\t);\r\n\t}\r\n\tif (visibility === \"Public\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => !item.is_private,\r\n\t\t);\r\n\t}\r\n\r\n\tif (status === \"Archived\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => item.is_archived,\r\n\t\t);\r\n\t}\r\n\tif (status === \"Active\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => !item.is_archived,\r\n\t\t);\r\n\t}\r\n\r\n\tif (\r\n\t\ttopics.length > 0 &&\r\n\t\ttopicFilterMode === \"Match all\"\r\n\t) {\r\n\t\titems = items.filter((item) =>\r\n\t\t\ttopics.every((topic) => {\r\n\t\t\t\tif (item.topics === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn item.topics.includes(topic);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\tif (\r\n\t\ttopics.length > 0 &&\r\n\t\ttopicFilterMode === \"Match any\"\r\n\t) {\r\n\t\titems = items.filter((item) =>\r\n\t\t\ttopics.some((topic) => {\r\n\t\t\t\tif (item.topics === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn item.topics.includes(topic);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\titems = matchSorter(items, name, {\r\n\t\tkeys: [\"full_name\"],\r\n\t});\r\n\treturn items;\r\n};\r\n\r\nexport const filterIssues = (\r\n\tissues: RepoIssueSchema[],\r\n\ttitle: string,\r\n\townerType: string,\r\n\trepoFullNames: string[],\r\n\tstate: string,\r\n) => {\r\n\tlet items = [...issues];\r\n\r\n\tif (ownerType !== \"All\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => item.owner_type === ownerType,\r\n\t\t);\r\n\t}\r\n\tif (repoFullNames.length > 0) {\r\n\t\titems = items.filter((item) =>\r\n\t\t\trepoFullNames.includes(item.repo_full_name),\r\n\t\t);\r\n\t}\r\n\tif (state !== \"All\") {\r\n\t\titems = items.filter(\r\n\t\t\t(item) => item.state === state,\r\n\t\t);\r\n\t}\r\n\r\n\titems = matchSorter(items, title, {\r\n\t\tkeys: [\"title\"],\r\n\t});\r\n\treturn items;\r\n};\r\n","import { LoaderFunction } from \"react-router-dom\";\r\nimport { filterIssues } from \"~core/filtering\";\r\nimport { getCachedIssues } from \"~database/index\";\r\nimport {\r\n\tgetIssueFilterPrefOwnerType,\r\n\tgetIssueFilterPrefState,\r\n} from \"~database/preferences\";\r\nimport { GenericSelectOptions } from \"~types/generics\";\r\nimport { RepoIssueSchema } from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\tissues: RepoIssueSchema[];\r\n\trepoOptions: GenericSelectOptions<string>[];\r\n\ttitle: string;\r\n\townerType: string;\r\n\trepoFullNames: string[];\r\n\tstate: string;\r\n};\r\nexport const loader: LoaderFunction = async ({\r\n\trequest,\r\n}): Promise<LoaderData> => {\r\n\tdocument.title = \"issues\";\r\n\tlet issues = await getCachedIssues();\r\n\r\n\tconst uniqueRepoOptions = new Set(\r\n\t\tissues\r\n\t\t\t.map(({ repo_full_name }) => repo_full_name)\r\n\t\t\t.filter((value) => value.length > 0),\r\n\t);\r\n\tconst options = [...uniqueRepoOptions];\r\n\toptions.sort();\r\n\tconst repoOptions: GenericSelectOptions<string>[] =\r\n\t\toptions.map((value) => ({\r\n\t\t\tlabel: value,\r\n\t\t\tvalue,\r\n\t\t}));\r\n\r\n\tconst searchParams = new URL(request.url)\r\n\t\t.searchParams;\r\n\r\n\tconst repoFullNamesParam = searchParams.get(\r\n\t\t\"repoFullNames\",\r\n\t);\r\n\tlet repoFullNames: string[] = [];\r\n\tif (repoFullNamesParam !== null) {\r\n\t\trepoFullNames = repoFullNamesParam\r\n\t\t\t.normalize()\r\n\t\t\t.trim()\r\n\t\t\t.split(\",\")\r\n\t\t\t.map((item) => item.trim())\r\n\t\t\t.filter((item) => item.length > 0);\r\n\t}\r\n\r\n\tconst title = searchParams.get(\"title\") || \"\";\r\n\r\n\tconst ownerType =\r\n\t\tsearchParams.get(\"ownerType\") ||\r\n\t\tgetIssueFilterPrefOwnerType();\r\n\tconst state =\r\n\t\tsearchParams.get(\"state\") ||\r\n\t\tgetIssueFilterPrefState();\r\n\r\n\tissues = filterIssues(\r\n\t\tissues,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t);\r\n\r\n\treturn {\r\n\t\tissues,\r\n\t\trepoOptions,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t};\r\n};\r\n","import {\r\n\tURLSearchParamsInit,\r\n\tcreateSearchParams,\r\n} from \"react-router-dom\";\r\nimport { SortRule } from \"~types/generics\";\r\n\r\nexport const sortItems = <T>(\r\n\trule: string | null,\r\n\tsortRules: SortRule<T>[],\r\n\titems: T[],\r\n) => {\r\n\tif (sortRules.length <= 0) {\r\n\t\treturn;\r\n\t}\r\n\tlet compareFn = sortRules[0].compareFn;\r\n\tif (!rule) {\r\n\t\tfor (const sortRule of sortRules) {\r\n\t\t\tif (sortRule.value === rule) {\r\n\t\t\t\tcompareFn = sortRule.compareFn;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\titems.sort(compareFn);\r\n};\r\n\r\nexport const extractFilterTags = (\r\n\tqueryString: string | null,\r\n): string[] => {\r\n\tlet filterTags: string[] = [];\r\n\tif (queryString) {\r\n\t\tfilterTags = queryString\r\n\t\t\t.normalize()\r\n\t\t\t.split(\",\");\r\n\t}\r\n\treturn filterTags;\r\n};\r\n\r\nexport const toSearchParam = (\r\n\tquery: URLSearchParamsInit,\r\n) => {\r\n\treturn createSearchParams(query).toString();\r\n};\r\n","import {\r\n\tChevronLeftRounded,\r\n\tClearRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tBox,\r\n\tContainer,\r\n\tDivider,\r\n\tDrawer,\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tStack,\r\n\tTab,\r\n\tTabs,\r\n\tToolbar,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { Buffer } from \"buffer\";\r\nimport { FC, ReactNode, useState } from \"react\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport {\r\n\tLink,\r\n\tuseSubmit,\r\n} from \"react-router-dom\";\r\nimport { IssueDataTable } from \"~components/IssueDataTable\";\r\nimport { Markdown } from \"~components/Markdown\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport { toSearchParam } from \"~core/query\";\r\nimport { toTimeStamp } from \"~core/time\";\r\nimport { RepoSchema } from \"~types/schemas\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nconst REPO_METADATA_DEFINITIONS: {\r\n\tlabel: string;\r\n\trender: (repo: RepoSchema) => ReactNode;\r\n}[] = [\r\n\t{\r\n\t\tlabel: \"Description\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.description ?? \"No description\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Last pushed\",\r\n\t\trender: (repo) =>\r\n\t\t\ttoTimeStamp(repo.pushed_at, \"Never\"),\r\n\t},\r\n\t{\r\n\t\tlabel: \"Last updated\",\r\n\t\trender: (repo) =>\r\n\t\t\ttoTimeStamp(repo.updated_at, \"Never\"),\r\n\t},\r\n\t{\r\n\t\tlabel: \"Created\",\r\n\t\trender: (repo) =>\r\n\t\t\ttoTimeStamp(repo.created_at, \"Unknown\"),\r\n\t},\r\n\t{\r\n\t\tlabel: \"Visibility\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.is_private ? \"Private\" : \"Public\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Status\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.is_private ? \"Archived\" : \"Active\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Links\",\r\n\t\trender: (repo) => (\r\n\t\t\t<Stack\r\n\t\t\t\tcomponent=\"span\"\r\n\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\tgap={1}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tcomponent=\"a\"\r\n\t\t\t\t\thref={repo.html_url}\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\tGitHub repository\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tcomponent=\"a\"\r\n\t\t\t\t\thref={repo.homepage ?? undefined}\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\tHomepage\r\n\t\t\t\t</Typography>\r\n\t\t\t</Stack>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tlabel: \"Topics\",\r\n\t\trender: (repo) =>\r\n\t\t\trepo.topics && repo.topics.length > 0 ? (\r\n\t\t\t\t<Stack\r\n\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\tgap={1}\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{repo.topics.map((topic) => (\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tkey={topic}\r\n\t\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: \"/repositories\",\r\n\t\t\t\t\t\t\t\tsearch: toSearchParam({\r\n\t\t\t\t\t\t\t\t\ttopics: topic,\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{topic}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Stack>\r\n\t\t\t) : (\r\n\t\t\t\t\"No topic assigned\"\r\n\t\t\t),\r\n\t},\r\n];\r\n\r\ntype RepoDetailsPageProps = { tab: number };\r\nexport const RepoDetailsPage: FC<\r\n\tRepoDetailsPageProps\r\n> = (props) => {\r\n\tconst { tab } = props;\r\n\tconst {\r\n\t\trepoOptions,\r\n\t\trepo,\r\n\t\tissues,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\tconst submit = useSubmit();\r\n\tconst handleTabChange = (\r\n\t\t_: React.SyntheticEvent<Element, Event>,\r\n\t\tvalue: number,\r\n\t) => {\r\n\t\tlet path = `/repositories/${repo.full_name}`;\r\n\t\tif (value === 1) {\r\n\t\t\tpath = `${path}/issues`;\r\n\t\t}\r\n\t\tsubmit({}, { action: path, method: \"get\" });\r\n\t};\r\n\r\n\tconst [drawerOpen, setDrawerOpen] =\r\n\t\tuseState(false);\r\n\tconst toggleDrawer = () => {\r\n\t\tsetDrawerOpen(!drawerOpen);\r\n\t};\r\n\tconst closeDrawer = () => {\r\n\t\tsetDrawerOpen(false);\r\n\t};\r\n\r\n\tlet decodedReadme: string | undefined;\r\n\tif (repo.readme !== undefined) {\r\n\t\tdecodedReadme = Buffer.from(\r\n\t\t\trepo.readme,\r\n\t\t\t\"base64\",\r\n\t\t).toString();\r\n\t}\r\n\r\n\tlet path = `~/repositories/${repo.full_name}`;\r\n\tif (tab === 1) {\r\n\t\tpath = `${path}/issues`;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath={path}\r\n\t\t\t\t\tbreadcrumbsProps={{\r\n\t\t\t\t\t\tsx: {\r\n\t\t\t\t\t\t\toverflow: \"auto\",\r\n\t\t\t\t\t\t\tflexGrow: { xs: 0, sm: 1 },\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tseconadaryAction={\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tonClick={toggleDrawer}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\tflexGrow: 0,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ChevronLeftRounded />\r\n\t\t\t\t</IconButton>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Toolbar\r\n\t\t\t\tdisableGutters\r\n\t\t\t\tvariant=\"dense\"\r\n\t\t\t>\r\n\t\t\t\t<Tabs\r\n\t\t\t\t\tvalue={tab}\r\n\t\t\t\t\tonChange={handleTabChange}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tvalue={0}\r\n\t\t\t\t\t\tlabel=\"Readme\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tvalue={1}\r\n\t\t\t\t\t\tlabel=\"Issues\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Tabs>\r\n\t\t\t</Toolbar>\r\n\t\t\t<Divider />\r\n\t\t\t{tab !== 1 ? (\r\n\t\t\t\t<Container\r\n\t\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\t\tsx={{ paddingY: 4 }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\temptyText=\"This repository does not contain a readme.\"\r\n\t\t\t\t\t\tmarkdownContent={decodedReadme}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Container>\r\n\t\t\t) : (\r\n\t\t\t\t<Box padding={2}>\r\n\t\t\t\t\t<IssueDataTable\r\n\t\t\t\t\t\trepoOptions={repoOptions}\r\n\t\t\t\t\t\tissues={issues}\r\n\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\townerType={ownerType}\r\n\t\t\t\t\t\trepoFullNames={repoFullNames}\r\n\t\t\t\t\t\tstate={state}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t\t<Drawer\r\n\t\t\t\televation={0}\r\n\t\t\t\tanchor=\"right\"\r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={closeDrawer}\r\n\t\t\t\tPaperProps={{\r\n\t\t\t\t\tsx: { width: 240 },\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar\r\n\t\t\t\t\tvariant=\"dense\"\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Typography fontWeight=\"bold\">\r\n\t\t\t\t\t\tMetadata\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={closeDrawer}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ClearRounded />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t\t<Divider\r\n\t\t\t\t\tflexItem\r\n\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t/>\r\n\t\t\t\t<List\r\n\t\t\t\t\tdisablePadding\r\n\t\t\t\t\tdense\r\n\t\t\t\t>\r\n\t\t\t\t\t{REPO_METADATA_DEFINITIONS.map(\r\n\t\t\t\t\t\t({ label, render }) => (\r\n\t\t\t\t\t\t\t<ListItem key={label}>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tsecondary={render(repo)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</Drawer>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { LoaderFunction } from \"react-router\";\r\nimport { filterIssues } from \"~core/filtering\";\r\nimport {\r\n\tgetCachedRepo,\r\n\tgetCachedRepoIssues,\r\n} from \"~database/cached\";\r\nimport {\r\n\tgetIssueFilterPrefOwnerType,\r\n\tgetIssueFilterPrefState,\r\n} from \"~database/preferences\";\r\nimport { GenericSelectOptions } from \"~types/generics\";\r\nimport {\r\n\tRepoIssueSchema,\r\n\tRepoSchema,\r\n} from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\trepo: RepoSchema;\r\n\tissues: RepoIssueSchema[];\r\n\ttitle: string;\r\n\townerType: string;\r\n\trepoFullNames: string[];\r\n\trepoOptions: GenericSelectOptions<string>[];\r\n\tstate: string;\r\n};\r\nexport const loader: LoaderFunction = async ({\r\n\tparams,\r\n\trequest,\r\n}) => {\r\n\tconst owner = params.owner;\r\n\tconst repoName = params.repo;\r\n\tif (\r\n\t\towner === undefined ||\r\n\t\trepoName === undefined\r\n\t) {\r\n\t\tthrow new Response(\"\", {\r\n\t\t\tstatus: 400,\r\n\t\t\tstatusText: \"Bad requeset\",\r\n\t\t});\r\n\t}\r\n\r\n\tconst fullName = `${owner}/${repoName}`;\r\n\tlet repo = await getCachedRepo(fullName);\r\n\tif (repo === undefined) {\r\n\t\tthrow new Response(\"Not found\", {\r\n\t\t\tstatus: 404,\r\n\t\t\tstatusText: \"Repository not found in cache\",\r\n\t\t});\r\n\t}\r\n\tdocument.title = repo.name;\r\n\r\n\tconst searchParams = new URL(request.url)\r\n\t\t.searchParams;\r\n\tconst title = searchParams.get(\"title\") || \"\";\r\n\tconst ownerType =\r\n\t\tsearchParams.get(\"ownerType\") ||\r\n\t\tgetIssueFilterPrefOwnerType();\r\n\tconst state =\r\n\t\tsearchParams.get(\"state\") ||\r\n\t\tgetIssueFilterPrefState();\r\n\r\n\tlet issues = await getCachedRepoIssues(\r\n\t\trepo.full_name,\r\n\t);\r\n\tconst repoFullNames: string[] = [\r\n\t\trepo.full_name,\r\n\t];\r\n\tissues = filterIssues(\r\n\t\tissues,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t);\r\n\r\n\tconst repoOptions: GenericSelectOptions<string>[] =\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tlabel: repo.full_name,\r\n\t\t\t\tvalue: repo.full_name,\r\n\t\t\t},\r\n\t\t];\r\n\tconst loaderData: LoaderData = {\r\n\t\trepo,\r\n\t\tissues,\r\n\t\ttitle,\r\n\t\townerType,\r\n\t\trepoFullNames,\r\n\t\tstate,\r\n\t\trepoOptions,\r\n\t};\r\n\r\n\treturn loaderData;\r\n};\r\n","import { Box } from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useLoaderData } from \"react-router-dom\";\r\nimport { RepoDataTable } from \"~components/RepoDataTable\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nexport const RepoListPage: FC = () => {\r\n\tconst {\r\n\t\trepos,\r\n\t\ttopicOptions,\r\n\t\ttopics,\r\n\t\tname,\r\n\t\tvisibility,\r\n\t\tstatus,\r\n\t\ttopicMatchStrategy,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath=\"~/repositories\"\r\n\t\t\t\t\tbreadcrumbsProps={{\r\n\t\t\t\t\t\tsx: { flexGrow: 1 },\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Box padding={2}>\r\n\t\t\t\t<RepoDataTable\r\n\t\t\t\t\ttopicOptions={topicOptions}\r\n\t\t\t\t\trepos={repos}\r\n\t\t\t\t\ttopics={topics}\r\n\t\t\t\t\tname={name}\r\n\t\t\t\t\tvisibility={visibility}\r\n\t\t\t\t\tstatus={status}\r\n\t\t\t\t\ttopicMatchStrategy={topicMatchStrategy}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { LoaderFunction } from \"react-router-dom\";\r\nimport { filterRepos } from \"~core/filtering\";\r\nimport {\r\n\tgetCachedRepos,\r\n\tgetCachedTopics,\r\n} from \"~database/index\";\r\nimport {\r\n\tgetRepoFilterPrefStatus,\r\n\tgetRepoFilterPrefTopicMatchStrategy,\r\n\tgetRepoFilterPrefVisibility,\r\n} from \"~database/preferences\";\r\nimport { GenericSelectOptions } from \"~types/generics\";\r\nimport { RepoSchema } from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\trepos: RepoSchema[];\r\n\ttopicOptions: GenericSelectOptions<string>[];\r\n\ttopics: string[];\r\n\tname: string;\r\n\tvisibility: string;\r\n\tstatus: string;\r\n\ttopicMatchStrategy: string;\r\n};\r\nexport const loader: LoaderFunction = async ({\r\n\trequest,\r\n}): Promise<LoaderData> => {\r\n\tdocument.title = \"repositories\";\r\n\tconst topicOptions: GenericSelectOptions<string>[] =\r\n\t\t(await getCachedTopics()).map((topic) => {\r\n\t\t\treturn { label: topic, value: topic };\r\n\t\t});\r\n\tlet repos = await getCachedRepos();\r\n\r\n\tconst searchParams = new URL(request.url)\r\n\t\t.searchParams;\r\n\tconst topicsParam = searchParams.get(\"topics\");\r\n\tlet topics: string[] = [];\r\n\tif (topicsParam !== null) {\r\n\t\ttopics = topicsParam\r\n\t\t\t.normalize()\r\n\t\t\t.trim()\r\n\t\t\t.split(\",\")\r\n\t\t\t.map((topic) => topic.trim())\r\n\t\t\t.filter((topic) => topic.length > 0);\r\n\t}\r\n\r\n\tconst name = searchParams.get(\"name\") || \"\";\r\n\tconst status =\r\n\t\tsearchParams.get(\"status\") ||\r\n\t\tgetRepoFilterPrefStatus();\r\n\tconst visibility =\r\n\t\tsearchParams.get(\"visibility\") ||\r\n\t\tgetRepoFilterPrefVisibility();\r\n\tconst topicMatchStrategy =\r\n\t\tsearchParams.get(\"topicMatchStrategy\") ||\r\n\t\tgetRepoFilterPrefTopicMatchStrategy();\r\n\trepos = filterRepos(\r\n\t\trepos,\r\n\t\tname,\r\n\t\ttopics,\r\n\t\tvisibility,\r\n\t\tstatus,\r\n\t\ttopicMatchStrategy,\r\n\t);\r\n\r\n\treturn {\r\n\t\ttopicOptions,\r\n\t\trepos,\r\n\t\ttopics,\r\n\t\tname,\r\n\t\tvisibility,\r\n\t\tstatus,\r\n\t\ttopicMatchStrategy,\r\n\t};\r\n};\r\n","import {\r\n\tListItem,\r\n\tListItemText,\r\n\tStack,\r\n} from \"@mui/material\";\r\nimport { FC, ReactNode } from \"react\";\r\n\r\ntype WrappableListItemProps = {\r\n\tchildren?: ReactNode;\r\n\tprimary?: string;\r\n\tsecondary?: string;\r\n};\r\nexport const WrappableListItem: FC<\r\n\tWrappableListItemProps\r\n> = (props) => {\r\n\tconst { secondary, primary, children } = props;\r\n\treturn (\r\n\t\t<ListItem disableGutters>\r\n\t\t\t<Stack\r\n\t\t\t\twidth=\"100%\"\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\talignItems=\"start\"\r\n\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={primary}\r\n\t\t\t\t\tsecondary={secondary}\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\twidth: \"max(200px, 40%)\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tminWidth=\"max(200px, 25%)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Stack>\r\n\t\t\t</Stack>\r\n\t\t</ListItem>\r\n\t);\r\n};\r\n","import {\r\n\tButton,\r\n\tList,\r\n\tListItem,\r\n\tListSubheader,\r\n\tTextField,\r\n} from \"@mui/material\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { ChangeEvent, FC, useState } from \"react\";\r\nimport { WrappableListItem } from \"./WrappableListItem\";\r\n\r\nexport const SettingRegionAPI: FC = () => {\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\r\n\tconst [\r\n\t\tpersonalAccessToken,\r\n\t\tsetPersonalAccessToken,\r\n\t] = useState(\r\n\t\tlocalStorage.getItem(\r\n\t\t\t\"personal-access-token\",\r\n\t\t) ?? \"\",\r\n\t);\r\n\r\n\tconst handlePasswordChange = (\r\n\t\tevent: ChangeEvent<\r\n\t\t\tHTMLInputElement | HTMLTextAreaElement\r\n\t\t>,\r\n\t) => {\r\n\t\tconst value = event.target.value.normalize();\r\n\t\tsetPersonalAccessToken(value);\r\n\t};\r\n\r\n\tconst commitChanges = () => {\r\n\t\tlocalStorage.setItem(\r\n\t\t\t\"personal-access-token\",\r\n\t\t\tpersonalAccessToken,\r\n\t\t);\r\n\t\tenqueueSnackbar({\r\n\t\t\tmessage: \"Updated personal access token\",\r\n\t\t\tvariant: \"info\",\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<List\r\n\t\t\tdisablePadding\r\n\t\t\tsubheader={\r\n\t\t\t\t<ListSubheader\r\n\t\t\t\t\tdisableGutters\r\n\t\t\t\t\tdisableSticky\r\n\t\t\t\t>\r\n\t\t\t\t\tAPI\r\n\t\t\t\t</ListSubheader>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<WrappableListItem primary=\"Personal access token (classic)\">\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tplaceholder=\"ghp_\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tvalue={personalAccessToken}\r\n\t\t\t\t\tonChange={handlePasswordChange}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t/>\r\n\t\t\t</WrappableListItem>\r\n\t\t\t<ListItem disableGutters>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={commitChanges}\r\n\t\t\t\t>\r\n\t\t\t\t\tUpdate\r\n\t\t\t\t</Button>\r\n\t\t\t</ListItem>\r\n\t\t</List>\r\n\t);\r\n};\r\n","import {\r\n\tList,\r\n\tListSubheader,\r\n\tSelectChangeEvent,\r\n} from \"@mui/material\";\r\nimport { FC, useState } from \"react\";\r\nimport { StyledSelect } from \"~components/StyledSelect\";\r\nimport {\r\n\tISSUE_FILTER_OWNER_TYPE_OPTIONS,\r\n\tISSUE_FILTER_STATE_OPTIONS,\r\n} from \"~constants\";\r\nimport {\r\n\tgetIssueFilterPrefOwnerType,\r\n\tgetIssueFilterPrefState,\r\n\tsetIssueFilterPrefOwnerType,\r\n\tsetIssueFilterPrefState,\r\n} from \"~database/preferences\";\r\nimport { WrappableListItem } from \"./WrappableListItem\";\r\n\r\nexport const SettingRegionIssueFilterPref: FC =\r\n\t() => {\r\n\t\tconst [ownerType, setOwnerType] = useState(\r\n\t\t\tgetIssueFilterPrefOwnerType(),\r\n\t\t);\r\n\t\tconst [state, setState] = useState(\r\n\t\t\tgetIssueFilterPrefState(),\r\n\t\t);\r\n\r\n\t\tconst handleOwnerTypeChange = (\r\n\t\t\tevent: SelectChangeEvent<string>,\r\n\t\t) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tsetIssueFilterPrefOwnerType(value);\r\n\t\t\tsetOwnerType(value);\r\n\t\t};\r\n\t\tconst handleStateChange = (\r\n\t\t\tevent: SelectChangeEvent<string>,\r\n\t\t) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tsetIssueFilterPrefState(value);\r\n\t\t\tsetState(value);\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<List\r\n\t\t\t\tdisablePadding\r\n\t\t\t\tsubheader={\r\n\t\t\t\t\t<ListSubheader\r\n\t\t\t\t\t\tdisableGutters\r\n\t\t\t\t\t\tdisableSticky\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tIssue filter preferences\r\n\t\t\t\t\t</ListSubheader>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<WrappableListItem primary=\"Owner type\">\r\n\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={ownerType}\r\n\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\tISSUE_FILTER_OWNER_TYPE_OPTIONS\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={handleOwnerTypeChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</WrappableListItem>\r\n\t\t\t\t<WrappableListItem primary=\"State\">\r\n\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={state}\r\n\t\t\t\t\t\toptions={ISSUE_FILTER_STATE_OPTIONS}\r\n\t\t\t\t\t\tonChange={handleStateChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</WrappableListItem>\r\n\t\t\t</List>\r\n\t\t);\r\n\t};\r\n","import {\r\n\tList,\r\n\tListSubheader,\r\n\tSelectChangeEvent,\r\n} from \"@mui/material\";\r\nimport { FC, useState } from \"react\";\r\nimport { StyledSelect } from \"~components/StyledSelect\";\r\nimport {\r\n\tREPO_FILTER_STATUS_OPTIONS,\r\n\tREPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS,\r\n\tREPO_FILTER_VISIBILITY_OPTIONS,\r\n} from \"~constants\";\r\nimport {\r\n\tgetRepoFilterPrefStatus,\r\n\tgetRepoFilterPrefTopicMatchStrategy,\r\n\tgetRepoFilterPrefVisibility,\r\n\tsetRepoFilterPrefStatus,\r\n\tsetRepoFilterPrefTopicMatchStrategy,\r\n\tsetRepoFilterPrefVisibility,\r\n} from \"~database/preferences\";\r\nimport { WrappableListItem } from \"./WrappableListItem\";\r\n\r\nexport const SettingRegionRepoFilterPref: FC =\r\n\t() => {\r\n\t\tconst [mode, setMode] = useState(\r\n\t\t\tgetRepoFilterPrefTopicMatchStrategy(),\r\n\t\t);\r\n\t\tconst [visibility, setVisibility] = useState(\r\n\t\t\tgetRepoFilterPrefVisibility(),\r\n\t\t);\r\n\t\tconst [status, setStatus] = useState(\r\n\t\t\tgetRepoFilterPrefStatus(),\r\n\t\t);\r\n\r\n\t\tconst handleTopicMatchStrategyChange = (\r\n\t\t\tevent: SelectChangeEvent<string>,\r\n\t\t) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tsetRepoFilterPrefTopicMatchStrategy(value);\r\n\t\t\tsetMode(value);\r\n\t\t};\r\n\t\tconst handleVisiblityChange = (\r\n\t\t\tevent: SelectChangeEvent<string>,\r\n\t\t) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tsetRepoFilterPrefVisibility(value);\r\n\t\t\tsetVisibility(value);\r\n\t\t};\r\n\t\tconst handleStatusChange = (\r\n\t\t\tevent: SelectChangeEvent<string>,\r\n\t\t) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tsetRepoFilterPrefStatus(value);\r\n\t\t\tsetStatus(value);\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<List\r\n\t\t\t\tdisablePadding\r\n\t\t\t\tsubheader={\r\n\t\t\t\t\t<ListSubheader\r\n\t\t\t\t\t\tdisableGutters\r\n\t\t\t\t\t\tdisableSticky\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tRepository filter preferences\r\n\t\t\t\t\t</ListSubheader>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<WrappableListItem primary=\"Match strategy\">\r\n\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={mode}\r\n\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\tREPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={\r\n\t\t\t\t\t\t\thandleTopicMatchStrategyChange\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</WrappableListItem>\r\n\t\t\t\t<WrappableListItem primary=\"Visibility\">\r\n\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={visibility}\r\n\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\tREPO_FILTER_VISIBILITY_OPTIONS\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={handleVisiblityChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</WrappableListItem>\r\n\t\t\t\t<WrappableListItem primary=\"Status\">\r\n\t\t\t\t\t<StyledSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={status}\r\n\t\t\t\t\t\toptions={REPO_FILTER_STATUS_OPTIONS}\r\n\t\t\t\t\t\tonChange={handleStatusChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</WrappableListItem>\r\n\t\t\t</List>\r\n\t\t);\r\n\t};\r\n","import {\r\n\tButton,\r\n\tCircularProgress,\r\n\tList,\r\n\tListSubheader,\r\n} from \"@mui/material\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { FC, useState } from \"react\";\r\nimport { normalizeDateString } from \"~core/time\";\r\nimport {\r\n\tsyncCachedRepoIssueComments,\r\n\tsyncCachedRepoIssues,\r\n\tsyncCachedRepos,\r\n} from \"~database/cached\";\r\nimport { WrappableListItem } from \"./WrappableListItem\";\r\n\r\nconst SYNC_DETAILS: {\r\n\tkey: string;\r\n\tsuccessMsg: string;\r\n\tpromise: (\r\n\t\tonFailure: (err: any) => void,\r\n\t) => Promise<boolean[]>;\r\n}[] = [\r\n\t{\r\n\t\tkey: \"last-sync-repos\",\r\n\t\tsuccessMsg: \"repsitories\",\r\n\t\tpromise: (onFailure) =>\r\n\t\t\tsyncCachedRepos(onFailure),\r\n\t},\r\n\t{\r\n\t\tkey: \"last-sync-issues\",\r\n\t\tsuccessMsg: \"issues\",\r\n\t\tpromise: (onFailure) =>\r\n\t\t\tsyncCachedRepoIssues(onFailure),\r\n\t},\r\n\t{\r\n\t\tkey: \"last-sync-comments\",\r\n\t\tsuccessMsg: \"comments\",\r\n\t\tpromise: (onFailure) =>\r\n\t\t\tsyncCachedRepoIssueComments(onFailure),\r\n\t},\r\n];\r\n\r\nconst LAST_SYNC = [\r\n\tnormalizeDateString(\r\n\t\tlocalStorage.getItem(\"last-sync-repos\"),\r\n\t\t\"Never\",\r\n\t),\r\n\tnormalizeDateString(\r\n\t\tlocalStorage.getItem(\"last-sync-issues\"),\r\n\t\t\"Never\",\r\n\t),\r\n\tnormalizeDateString(\r\n\t\tlocalStorage.getItem(\"last-sync-comments\"),\r\n\t\t\"Never\",\r\n\t),\r\n];\r\n\r\nexport const SettingRegionSync: FC = () => {\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\r\n\tconst [syncing, setSyncing] = useState([\r\n\t\tfalse,\r\n\t\tfalse,\r\n\t\tfalse,\r\n\t]);\r\n\tconst [lastSyncs, setLastSync] =\r\n\t\tuseState(LAST_SYNC);\r\n\r\n\tconst enqueueError = (err: any) => {\r\n\t\tenqueueSnackbar({\r\n\t\t\tmessage: String(err),\r\n\t\t\tvariant: \"error\",\r\n\t\t});\r\n\t\tthrow err;\r\n\t};\r\n\r\n\tconst handleSync = async (index: number) => {\r\n\t\tsetSyncing((prev) => {\r\n\t\t\tconst next = [...prev];\r\n\t\t\tnext[index] = true;\r\n\t\t\treturn next;\r\n\t\t});\r\n\r\n\t\tconst { promise, successMsg, key } =\r\n\t\t\tSYNC_DETAILS[index];\r\n\t\tconst res = await promise(enqueueError);\r\n\t\tif (res.every((r) => r)) {\r\n\t\t\tenqueueSnackbar({\r\n\t\t\t\tmessage: `Synced ${successMsg}`,\r\n\t\t\t\tvariant: \"success\",\r\n\t\t\t});\r\n\t\t\tconst timestamp = new Date(\r\n\t\t\t\tDate.now(),\r\n\t\t\t).toISOString();\r\n\t\t\tlocalStorage.setItem(key, timestamp);\r\n\t\t\tsetLastSync((prev) => {\r\n\t\t\t\tconst next = [...prev];\r\n\t\t\t\tnext[index] =\r\n\t\t\t\t\tnormalizeDateString(timestamp);\r\n\t\t\t\treturn next;\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetSyncing((prev) => {\r\n\t\t\tconst next = [...prev];\r\n\t\t\tnext[index] = false;\r\n\t\t\treturn next;\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<List\r\n\t\t\tdisablePadding\r\n\t\t\tsubheader={\r\n\t\t\t\t<ListSubheader\r\n\t\t\t\t\tdisableGutters\r\n\t\t\t\t\tdisableSticky\r\n\t\t\t\t>\r\n\t\t\t\t\tSynchronization\r\n\t\t\t\t</ListSubheader>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{SYNC_DETAILS.map(\r\n\t\t\t\t({ successMsg }, index) => (\r\n\t\t\t\t\t<WrappableListItem\r\n\t\t\t\t\t\tkey={`sync-item-${index}`}\r\n\t\t\t\t\t\tprimary={`Sync ${successMsg}`}\r\n\t\t\t\t\t\tsecondary={`Last sync: ${lastSyncs[index]}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tdisabled={syncing[index]}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={() => handleSync(index)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{syncing[index] ? (\r\n\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\tdisableShrink\r\n\t\t\t\t\t\t\t\t\tsize={28}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t`Sync ${successMsg}`\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</WrappableListItem>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</List>\r\n\t);\r\n};\r\n","import { Divider, Stack } from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { StyledBreadcrumbs } from \"~components/StyledBreadcrumbs\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { SettingRegionAPI } from \"./SettingRegions/SettingRegionAPI\";\r\nimport { SettingRegionIssueFilterPref } from \"./SettingRegions/SettingRegionIssueFilterPref\";\r\nimport { SettingRegionRepoFilterPref } from \"./SettingRegions/SettingRegionRepoFilterPref\";\r\nimport { SettingRegionSync } from \"./SettingRegions/SettingRegionSync\";\r\n\r\nexport const SettingsPage: FC = () => {\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={\r\n\t\t\t\t<StyledBreadcrumbs\r\n\t\t\t\t\tpath=\"~/settings\"\r\n\t\t\t\t\tbreadcrumbsProps={{\r\n\t\t\t\t\t\tsx: { flexGrow: 1 },\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Stack\r\n\t\t\t\tpaddingTop={2}\r\n\t\t\t\tpaddingX={2}\r\n\t\t\t\tspacing={1}\r\n\t\t\t\tdivider={<Divider variant=\"middle\" />}\r\n\t\t\t>\r\n\t\t\t\t<SettingRegionRepoFilterPref />\r\n\t\t\t\t<SettingRegionIssueFilterPref />\r\n\t\t\t\t<SettingRegionAPI />\r\n\t\t\t\t<SettingRegionSync />\r\n\t\t\t</Stack>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\r\n\talpha,\r\n\tcreateTheme,\r\n} from \"@mui/material\";\r\n\r\nconst themePalette = createTheme({\r\n\tpalette: {\r\n\t\tmode: \"dark\",\r\n\t\tprimary: {\r\n\t\t\tmain: alpha(\"#00D3D0\", 0.7),\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#D68F3E\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: \"#1B1D2D\",\r\n\t\t\tpaper: \"#1B1D2D\",\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\tprimary: alpha(\"#fff\", 0.67),\r\n\t\t\tsecondary: alpha(\"#fff\", 0.5),\r\n\t\t},\r\n\t},\r\n});\r\nconst themeComponent = createTheme({\r\n\tcomponents: {\r\n\t\tMuiBreadcrumbs: {\r\n\t\t\tstyleOverrides: {\r\n\t\t\t\tol: {\r\n\t\t\t\t\tflexWrap: \"nowrap\",\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiCssBaseline: {\r\n\t\t\tstyleOverrides: {\r\n\t\t\t\t\"html\": {\r\n\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\tthemePalette.palette.background,\r\n\t\t\t\t},\r\n\t\t\t\t\"*\": {\r\n\t\t\t\t\tscrollbarWidth: \"thin\",\r\n\t\t\t\t},\r\n\t\t\t\t\"pre\": {\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\toverflow: \"auto\",\r\n\t\t\t\t},\r\n\t\t\t\t\"table\": {\r\n\t\t\t\t\tminWidth: \"max-content\",\r\n\t\t\t\t\tborderSpacing: \"1rem 0.5rem\",\r\n\t\t\t\t},\r\n\t\t\t\t\"a\": {\r\n\t\t\t\t\t\"transition\": \"color 0.3s ease\",\r\n\t\t\t\t\t\"color\": alpha(\r\n\t\t\t\t\t\tthemePalette.palette.primary.main,\r\n\t\t\t\t\t\t0.78,\r\n\t\t\t\t\t),\r\n\t\t\t\t\t\"&:hover\": {\r\n\t\t\t\t\t\tcolor: alpha(\r\n\t\t\t\t\t\t\tthemePalette.palette.secondary.main,\r\n\t\t\t\t\t\t\t0.78,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const themeComposed = createTheme({\r\n\tpalette: themePalette.palette,\r\n\tcomponents: themeComponent.components,\r\n});\r\n","import {\r\n\tCssBaseline,\r\n\tThemeProvider,\r\n} from \"@mui/material\";\r\nimport { SnackbarProvider } from \"notistack\";\r\nimport { FC } from \"react\";\r\nimport {\r\n\tRouterProvider,\r\n\tcreateHashRouter,\r\n\tredirect,\r\n} from \"react-router-dom\";\r\nimport { ErrorBoundry } from \"~pages/ErrorBoundary\";\r\nimport {\r\n\tHome,\r\n\tloaderHome,\r\n} from \"~pages/HomePage\";\r\nimport {\r\n\tIssueDetailsPage,\r\n\tloaderIssueDetailsPage,\r\n} from \"~pages/IssueDetailsPage\";\r\nimport {\r\n\tIssueListPage,\r\n\tloaderIssueListPage,\r\n} from \"~pages/IssueListPage\";\r\nimport {\r\n\tRepoDetailsPage,\r\n\tloaderRepoDetailsPage,\r\n} from \"~pages/RepoDetailsPage\";\r\nimport {\r\n\tRepoListPage,\r\n\tloaderRepoListPage,\r\n} from \"~pages/RepoListPage\";\r\nimport { SettingsPage } from \"~pages/SettingsPage/SettingsPage\";\r\nimport { themeComposed } from \"./theme\";\r\n\r\nconst router = createHashRouter(\r\n\t[\r\n\t\t{\r\n\t\t\tindex: true,\r\n\t\t\telement: <Home />,\r\n\t\t\tloader: loaderHome,\r\n\t\t\terrorElement: <ErrorBoundry />,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: \"/\",\r\n\t\t\terrorElement: <ErrorBoundry />,\r\n\t\t\tchildren: [\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/repositories\",\r\n\t\t\t\t\telement: <RepoListPage />,\r\n\t\t\t\t\tloader: loaderRepoListPage,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/repositories/:owner\",\r\n\t\t\t\t\telement: null,\r\n\t\t\t\t\tloader: ({ params }) =>\r\n\t\t\t\t\t\tredirect(\r\n\t\t\t\t\t\t\t`/repositories/?name=${params.owner}`,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/repositories/:owner/:repo\",\r\n\t\t\t\t\telement: <RepoDetailsPage tab={0} />,\r\n\t\t\t\t\tloader: loaderRepoDetailsPage,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/repositories/:owner/:repo/issues\",\r\n\t\t\t\t\telement: <RepoDetailsPage tab={1} />,\r\n\t\t\t\t\tloader: loaderRepoDetailsPage,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/repositories/:owner/:repo/issues/:issueNumber\",\r\n\t\t\t\t\telement: <IssueDetailsPage />,\r\n\t\t\t\t\tloader: loaderIssueDetailsPage,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/issues\",\r\n\t\t\t\t\telement: <IssueListPage />,\r\n\t\t\t\t\tloader: loaderIssueListPage,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: \"/settings\",\r\n\t\t\t\t\telement: <SettingsPage />,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t],\r\n\t{\r\n\t\tbasename: \"/\",\r\n\t},\r\n);\r\n\r\nexport const App: FC = () => {\r\n\treturn (\r\n\t\t<ThemeProvider theme={themeComposed}>\r\n\t\t\t<CssBaseline />\r\n\t\t\t<SnackbarProvider\r\n\t\t\t\tpreventDuplicate\r\n\t\t\t\tmaxSnack={3}\r\n\t\t\t\tautoHideDuration={1750}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<RouterProvider router={router} />\r\n\t\t\t</SnackbarProvider>\r\n\t\t</ThemeProvider>\r\n\t);\r\n};\r\n","import \"@fontsource/ibm-plex-serif/300.css\";\r\nimport \"@fontsource/ibm-plex-serif/400.css\";\r\nimport \"@fontsource/ibm-plex-serif/500.css\";\r\nimport \"@fontsource/ibm-plex-serif/700.css\";\r\nimport \"@fontsource/roboto/300.css\";\r\nimport \"@fontsource/roboto/400.css\";\r\nimport \"@fontsource/roboto/500.css\";\r\nimport \"@fontsource/roboto/700.css\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport { App } from \"./App.tsx\";\r\n\r\nReactDOM.createRoot(\r\n\tdocument.getElementById(\"root\")!,\r\n).render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n);\r\n"],"names":["nav","WithAppBar","props","location","children","seconadaryAction","submit","useSubmit","drawerOpen","setDrawerOpen","useState","toggleDrawer","appBarRef","useRef","contentHeight","setContentHeight","useEffect","appBarHeight","redirectPath","path","Fragment","jsxs","Box","AppBar","Toolbar","jsx","IconButton","ListRounded","Divider","Drawer","CloseRounded","Typography","List","label","ListItem","ListItemButton","ListItemText","ErrorBoundry","status","statusText","useRouteError","Container","ISSUE_FILTER_PREF_STATE_KEY","ISSUE_FILTER_PREF_OWNER_TYPE_KEY","ISSUE_FILTER_STATE_OPTIONS","ISSUE_FILTER_OWNER_TYPE_OPTIONS","REPO_FILTER_PREF_TOPIC_MATCH_STRATEGY_KEY","REPO_FILTER_PREF_VISIBILITY_KEY","REPO_FILTER_PREF_STATUS_KEY","REPO_FILTER_TOPIC_MATCH_STRATEGY_OPTIONS","REPO_FILTER_VISIBILITY_OPTIONS","REPO_FILTER_STATUS_OPTIONS","orderByString","a","b","a_","b_","orderByBoolean","orderByNumber","timeSince","dateString","fallback","moment","normalizeDateString","toTimeStamp","timeAt","delta","getRepoFilterPrefVisibility","data","setRepoFilterPrefVisibility","value","getRepoFilterPrefStatus","setRepoFilterPrefStatus","getRepoFilterPrefTopicMatchStrategy","setRepoFilterPrefTopicMatchStrategy","getIssueFilterPrefState","setIssueFilterPrefState","getIssueFilterPrefOwnerType","setIssueFilterPrefOwnerType","StyledTableHead","order","orderBy","onRequestSort","columnDefinition","createSortHandler","property","_","TableHead","TableRow","id","index","TableCell","TableSortLabel","StyledTableRow","item","render","StyledDataTable","orderingFn","items","setOrder","orderBy_","setOrderBy","handleRequestSort","items_","useMemo","orderFn","orderedItems_","TableContainer","Table","TableBody","StyledSelect","options","rest","options_","Select","MenuItem","StyledSelectMultiple","subheader","ListSubheader","StyledTextField","onEnter","onChange","handleKeyUp","e","handleChange","TextField","COLUMN_DEFINITION","issue","Link","capitalize","getOrderingFn","WrappableListItem","text","Stack","StyledToolbar","ownerType","repoFullNames","state","loadedTitle","itemCount","repoOptions","title","setTitle","handleSubmit","key","query","handleOwnerTypeChange","event","handleStateChange","handleRepoFullNamesChange","handleRepoFullNamesReset","filterOpen","setFilterOpen","toggleFilter","itemCountMsg","expandIcon","ExpandLessRounded","ExpandMoreRounded","FilterListRounded","Collapse","ClearRounded","IssueDataTable","disableFilter","issues","loadedRepoOptions","loadedRepoFullNames","loadedOwnerType","loadedState","repo","loadedName","topics","visibility","topicMatchStrategy","topicOptions","name","setName","handleNameSubmit","handleTopicMatchStrategyChange","handleStatusChange","handleVisibilityChange","handleTopicsChange","handleTopicsReset","RepoDataTable","repos","loadedTopicOptions","loadedTopicMatchStrategy","loadedStatus","loadedTopics","loadedVisibility","StyledBreadcrumbs","breadcrumbsProps","typographyProps","paths","_paths","createElement","Breadcrumbs","HomePage","activeRepos","archivedRepos","closedIssues","openIssues","recentRepos","recentIssues","useLoaderData","Card","CardHeader","db1","db","repoStore","db2","dbPromise","openDB","oldVersion","getToken","token","getOctokit","Octokit","getRepos","req","full_name","created_at","updated_at","description","html_url","homepage","pushed_at","is_archived","is_private","getRepoReadMe","err","fullName","ocktokit","owner","getRepoIssues","repoId","issue_number","locked","closed_at","body","user","getRepoIssueComment","issueNumber","issueId","getCachedRepos","getCachedRepo","getCachedTopics","uniqueTopics","topic","getCachedIssues","getCachedRepoIssues","repoFullName","getCachedRepoIssue","getCachedIssueComments","updateCachedRepos","updateCachedRepoIssues","updateCachedRepoIssueComments","issueComments","comment","syncCachedRepos","onFailure","res","syncCachedRepoIssues","cachedRepos","syncCachedRepoIssueComments","cachedIssues","loaderHome","owner_type","parseMarkdown","content","unified","remarkParse","remarkGfm","remarkMath","remarkRehype","rehypeSanitize","rehypeKatex","rehypeDocument","rehypeStringify","Markdown","emptyText","sx","contentRef","innerHtml","METADATA_DEFINITIONS","IssueMetaData","flexGrow","IssueComment","IssueDetailsPage","comments","loader","params","repoName","IssueListPage","filterRepos","topicFilterMode","matchSorter","filterIssues","request","repo_full_name","searchParams","repoFullNamesParam","toSearchParam","createSearchParams","REPO_METADATA_DEFINITIONS","RepoDetailsPage","tab","handleTabChange","closeDrawer","decodedReadme","Buffer","ChevronLeftRounded","Tabs","Tab","RepoListPage","topicsParam","secondary","primary","SettingRegionAPI","enqueueSnackbar","useSnackbar","personalAccessToken","setPersonalAccessToken","handlePasswordChange","commitChanges","Button","SettingRegionIssueFilterPref","setOwnerType","setState","SettingRegionRepoFilterPref","mode","setMode","setVisibility","setStatus","handleVisiblityChange","SYNC_DETAILS","LAST_SYNC","SettingRegionSync","syncing","setSyncing","lastSyncs","setLastSync","enqueueError","handleSync","prev","next","promise","successMsg","r","timestamp","CircularProgress","SettingsPage","themePalette","createTheme","alpha","themeComponent","themeComposed","router","createHashRouter","Home","loaderRepoListPage","redirect","loaderRepoDetailsPage","loaderIssueDetailsPage","loaderIssueListPage","App","ThemeProvider","CssBaseline","SnackbarProvider","RouterProvider","ReactDOM","React"],"mappings":"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"}