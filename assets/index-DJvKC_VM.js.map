{"version":3,"file":"index-DJvKC_VM.js","sources":["../../src/assets/HexagonGroup.tsx","../../src/views/WithAppBar.tsx","../../src/pages/ErrorBoundary.tsx","../../src/core/query.ts","../../src/database/index.ts","../../src/pages/Home/loader.ts","../../src/components/PoppoverButton.tsx","../../src/components/SortRuleMenu.tsx","../../src/components/TagAutocomplete.tsx","../../src/pages/Home/helper.tsx","../../src/pages/Home/Home.tsx","../../src/theme.tsx","../../src/components/StyledEditor.tsx","../../src/core/markdown.ts","../../src/pages/Project/ProjectCreate/Layout.tsx","../../src/pages/Project/ProjectCreate/ProjectCreate.tsx","../../src/pages/Project/ProjectCreate/loader.ts","../../src/pages/Project/ProjectInfo/loader.tsx","../../src/pages/Project/ProjectInfo/Layout.tsx","../../src/pages/Project/ProjectInfo/ProjectInfo.tsx","../../src/pages/Ticket/TicketCreate/Layout.tsx","../../src/pages/Ticket/TicketCreate/TicketCreate.tsx","../../src/pages/Ticket/TicketCreate/loader.ts","../../src/pages/Ticket/TicketInfo/loader.tsx","../../src/pages/Ticket/TicketInfo/Layout.tsx","../../src/pages/Ticket/TicketInfo/TicketInfo.tsx","../../src/pages/TicketHome/helper.tsx","../../src/pages/TicketHome/loader.ts","../../src/pages/TicketHome/TicketHome.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import {\r\n\tSvgIcon,\r\n\tSvgIconProps,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\n\r\nexport const IconHexagonMultiple: FC<\r\n\tSvgIconProps\r\n> = (props) => {\r\n\treturn (\r\n\t\t<SvgIcon {...props}>\r\n\t\t\t<svg\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\theight=\"1em\"\r\n\t\t\t\twidth=\"1em\"\r\n\t\t\t>\r\n\t\t\t\t<path d=\"M10.25 2c.19 0 .36.11.44.26l2.22 3.96.09.28-.09.28-2.22 3.96c-.08.15-.25.26-.44.26h-4.5c-.19 0-.36-.11-.44-.26L3.09 6.78 3 6.5l.09-.28 2.22-3.96c.08-.15.25-.26.44-.26h4.5m0 11c.19 0 .36.11.44.26l2.22 3.96.09.28-.09.28-2.22 3.96c-.08.15-.25.26-.44.26h-4.5c-.19 0-.36-.11-.44-.26l-2.22-3.96L3 17.5l.09-.28 2.22-3.96c.08-.15.25-.26.44-.26h4.5m9.25-5.5c.19 0 .36.11.44.26l2.22 3.96.09.28-.09.28-2.22 3.96c-.08.15-.25.26-.44.26H15c-.19 0-.36-.11-.44-.26l-2.22-3.96-.09-.28.09-.28 2.22-3.96c.08-.15.25-.26.44-.26h4.5z\" />\r\n\t\t\t</svg>\r\n\t\t</SvgIcon>\r\n\t);\r\n};\r\n","import {\r\n\tGrid,\r\n\tIconButton,\r\n\tPaper,\r\n\tStack,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { FC, Fragment, ReactNode } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { IconHexagonMultiple } from \"~assets/HexagonGroup\";\r\n\r\ntype WithAppBarProps = {\r\n\tlocation: ReactNode;\r\n\tchildren: ReactNode;\r\n\tseconadaryNav?: ReactNode;\r\n};\r\nexport const WithAppBar: FC<WithAppBarProps> = (\r\n\tprops,\r\n) => {\r\n\tconst { location, children, seconadaryNav } =\r\n\t\tprops;\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Paper\r\n\t\t\t\tsquare\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tsx={{\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\tpaddingY: 1,\r\n\t\t\t\t\tpaddingX: 2,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={1}\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\txs={1}\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisableRipple\r\n\t\t\t\t\t\t\ttitle=\"Home\"\r\n\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\tto=\"/\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<IconHexagonMultiple />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\txs={5}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\toverflow=\"hidden\"\r\n\t\t\t\t\t\t\twhiteSpace=\"nowrap\"\r\n\t\t\t\t\t\t\ttextOverflow=\"ellipsis\"\r\n\t\t\t\t\t\t\tfontWeight=\"500\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{location}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\txs={6}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Stack\r\n\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\tjustifyContent=\"end\"\r\n\t\t\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{seconadaryNav}\r\n\t\t\t\t\t\t</Stack>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Paper>\r\n\t\t\t{children}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import { FC, useEffect } from \"react\";\r\nimport {\r\n\tBox,\r\n\tContainer,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport {\r\n\tErrorResponse,\r\n\tuseRouteError,\r\n} from \"react-router\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\n\r\nexport const Error: FC = () => {\r\n\tconst error = useRouteError() as ErrorResponse;\r\n\tuseEffect(() => {\r\n\t\tdocument.title = `${error.status} ${error.statusText}`;\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<WithAppBar location={error.statusText}>\r\n\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t<Box padding={4}>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tcomponent=\"h1\"\r\n\t\t\t\t\t\tvariant=\"h1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{error.status}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tparagraph\r\n\t\t\t\t\t\tcomponent=\"p\"\r\n\t\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{error.statusText}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Container>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { SortRule } from \"~types/generics\";\r\n\r\nexport const sortItems = <T>(\r\n\trule: string | null,\r\n\tsortRules: SortRule<T>[],\r\n\titems: T[],\r\n) => {\r\n\tif (sortRules.length <= 0) {\r\n\t\treturn;\r\n\t}\r\n\tlet compareFn = sortRules[0].compareFn;\r\n\tif (!rule) {\r\n\t\tfor (const sortRule of sortRules) {\r\n\t\t\tif (sortRule.value === rule) {\r\n\t\t\t\tcompareFn = sortRule.compareFn;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\titems.sort(compareFn);\r\n};\r\n\r\nexport const extractFilterTags = (\r\n\tqueryString: string | null,\r\n): string[] => {\r\n\tlet filterTags: string[] = [];\r\n\tif (queryString) {\r\n\t\tfilterTags = queryString\r\n\t\t\t.normalize()\r\n\t\t\t.split(\",\");\r\n\t}\r\n\treturn filterTags;\r\n};\r\n","import { DBSchema, openDB } from \"idb\";\r\nimport LZString from \"lz-string\";\r\n\r\nimport {\r\n\tProjectSchema,\r\n\tTicketSchema,\r\n} from \"~types/schemas\";\r\n\r\ninterface Database extends DBSchema {\r\n\tprojects: {\r\n\t\tkey: number;\r\n\t\tvalue: ProjectSchema;\r\n\t};\r\n\ttickets: {\r\n\t\tkey: number;\r\n\t\tvalue: TicketSchema;\r\n\t\tindexes: {\r\n\t\t\t\"by-project-id\": number;\r\n\t\t};\r\n\t};\r\n}\r\nconst dbPromise = openDB<Database>(\"primary\", 2, {\r\n\tupgrade(db) {\r\n\t\tif (db.version >= 2) {\r\n\t\t\tconst ticketStore = db.createObjectStore(\r\n\t\t\t\t\"tickets\",\r\n\t\t\t\t{\r\n\t\t\t\t\tkeyPath: \"ticketId\",\r\n\t\t\t\t\tautoIncrement: true,\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t\tticketStore.createIndex(\r\n\t\t\t\t\"by-project-id\",\r\n\t\t\t\t\"projectId\",\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (db.version >= 1) {\r\n\t\t\tdb.createObjectStore(\"projects\", {\r\n\t\t\t\tkeyPath: \"projectId\",\r\n\t\t\t\tautoIncrement: true,\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n});\r\n\r\nexport const createProject = async (\r\n\tname: string,\r\n\tdescription: string,\r\n\ttags: string[],\r\n) => {\r\n\tconst db = await dbPromise;\r\n\treturn await db.add(\"projects\", {\r\n\t\tname: name.normalize(),\r\n\t\ttags: tags.map((tag) => tag.normalize()),\r\n\t\tlastModified: new Date(Date.now()),\r\n\t\tdateCreated: new Date(Date.now()),\r\n\t\tdescription: LZString.compressToUTF16(\r\n\t\t\tdescription.normalize(),\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const updateProject = async (\r\n\tprojectId: number,\r\n\tname: string,\r\n\tdescription: string,\r\n\ttags: string[],\r\n) => {\r\n\tconst prev = await (\r\n\t\tawait dbPromise\r\n\t).get(\"projects\", projectId);\r\n\r\n\treturn (await dbPromise).put(\"projects\", {\r\n\t\tprojectId,\r\n\t\tname: name.normalize().trim(),\r\n\t\ttags: tags.map((tag) => tag.normalize()),\r\n\t\tdateCreated: !prev\r\n\t\t\t? new Date(Date.now())\r\n\t\t\t: prev.dateCreated,\r\n\t\tlastModified: new Date(Date.now()),\r\n\t\tdescription: LZString.compressToUTF16(\r\n\t\t\tdescription.normalize().trim(),\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const getProject = async (\r\n\tprojectId: number,\r\n) => {\r\n\tconst project = await (\r\n\t\tawait dbPromise\r\n\t).get(\"projects\", projectId);\r\n\tif (!project) {\r\n\t\treturn undefined;\r\n\t}\r\n\tproject.description =\r\n\t\tLZString.decompressFromUTF16(\r\n\t\t\tproject.description,\r\n\t\t);\r\n\treturn project;\r\n};\r\n\r\nexport const getProjectAll = async () => {\r\n\tconst projects = await (\r\n\t\tawait dbPromise\r\n\t).getAll(\"projects\");\r\n\tfor (let i = 0; i < projects.length; i++) {\r\n\t\tprojects[i].description =\r\n\t\t\tLZString.decompressFromUTF16(\r\n\t\t\t\tprojects[i].description,\r\n\t\t\t);\r\n\t}\r\n\treturn projects;\r\n};\r\n\r\nexport const createTicket = async (\r\n\tprojectId: number,\r\n\ttitle: string,\r\n\tcontent: string,\r\n\ttags: string[],\r\n) => {\r\n\treturn await (\r\n\t\tawait dbPromise\r\n\t).add(\"tickets\", {\r\n\t\tprojectId,\r\n\t\ttitle: title.normalize(),\r\n\t\ttags: tags.map((tag) => tag.normalize()),\r\n\t\tlastModified: new Date(Date.now()),\r\n\t\tdateCreated: new Date(Date.now()),\r\n\t\tcontent: LZString.compressToUTF16(\r\n\t\t\tcontent.normalize(),\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const updateTicket = async (\r\n\tticketId: number,\r\n\ttitle: string,\r\n\tcontent: string,\r\n\ttags: string[],\r\n) => {\r\n\tconst prev = await (\r\n\t\tawait dbPromise\r\n\t).get(\"tickets\", ticketId);\r\n\r\n\tif (!prev || !prev.projectId) {\r\n\t\treturn ticketId;\r\n\t}\r\n\r\n\treturn (await dbPromise).put(\"tickets\", {\r\n\t\tticketId,\r\n\t\tprojectId: prev.projectId,\r\n\t\ttitle: title.normalize(),\r\n\t\ttags: tags.map((tag) => tag.normalize()),\r\n\t\tdateCreated: prev.dateCreated,\r\n\t\tlastModified: new Date(Date.now()),\r\n\t\tcontent: LZString.compressToUTF16(\r\n\t\t\tcontent.normalize(),\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const getTicket = async (\r\n\tticketId: number,\r\n) => {\r\n\tconst ticket = await (\r\n\t\tawait dbPromise\r\n\t).get(\"tickets\", ticketId);\r\n\r\n\tif (!ticket) {\r\n\t\treturn undefined;\r\n\t}\r\n\tticket.content = LZString.decompressFromUTF16(\r\n\t\tticket.content,\r\n\t);\r\n\treturn ticket;\r\n};\r\n\r\nexport const getTicketAll = async () => {\r\n\tconst tickets = await (\r\n\t\tawait dbPromise\r\n\t).getAll(\"tickets\");\r\n\r\n\tfor (let i = 0; i < tickets.length; i++) {\r\n\t\ttickets[i].content =\r\n\t\t\tLZString.decompressFromUTF16(\r\n\t\t\t\ttickets[i].content,\r\n\t\t\t);\r\n\t}\r\n\treturn tickets;\r\n};\r\n\r\nexport const getTicketAllFromProject = async (\r\n\tprojectId: number,\r\n) => {\r\n\tconst tickets = await (\r\n\t\tawait dbPromise\r\n\t).getAllFromIndex(\r\n\t\t\"tickets\",\r\n\t\t\"by-project-id\",\r\n\t\tprojectId,\r\n\t);\r\n\tfor (let i = 0; i < tickets.length; i++) {\r\n\t\ttickets[i].content =\r\n\t\t\tLZString.decompressFromUTF16(\r\n\t\t\t\ttickets[i].content,\r\n\t\t\t);\r\n\t}\r\n\treturn tickets;\r\n};\r\n\r\nexport const getTagsAll = async () => {\r\n\tconst projects = await getProjectAll();\r\n\tconst tickets = await getTicketAll();\r\n\r\n\tconst uniqueTags: Set<string> = new Set([\r\n\t\t\"open\",\r\n\t\t\"close\",\r\n\t]);\r\n\tfor (const project of projects) {\r\n\t\tfor (const tag of project.tags) {\r\n\t\t\tuniqueTags.add(tag);\r\n\t\t}\r\n\t}\r\n\tfor (const ticket of tickets) {\r\n\t\tfor (const tag of ticket.tags) {\r\n\t\t\tuniqueTags.add(tag);\r\n\t\t}\r\n\t}\r\n\tconst tags: string[] = [...uniqueTags];\r\n\ttags.sort();\r\n\treturn tags;\r\n};\r\n","import { LoaderFunction } from \"react-router-dom\";\r\nimport {\r\n\textractFilterTags,\r\n\tsortItems,\r\n} from \"~core/query\";\r\nimport {\r\n\tgetProjectAll,\r\n\tgetTagsAll,\r\n} from \"~database\";\r\nimport { SortRule } from \"~types/generics\";\r\nimport { ProjectSchema } from \"~types/schemas\";\r\n\r\nexport const sortRules: SortRule<ProjectSchema>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tvalue: \"lastModified\",\r\n\t\t\tlabel: \"Last modified (0-9)\",\r\n\t\t\tcompareFn: (a, b) =>\r\n\t\t\t\tb.lastModified.getTime() -\r\n\t\t\t\ta.lastModified.getTime(),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: \"name\",\r\n\t\t\tlabel: \"Name (A-Z)\",\r\n\t\t\tcompareFn: (a, b) =>\r\n\t\t\t\ta.name.localeCompare(b.name),\r\n\t\t},\r\n\t];\r\n\r\nexport type LoaderData = {\r\n\ttagOptions: string[];\r\n\tfilterTags: string[];\r\n\tsortRule: string | null;\r\n\tprojects: ProjectSchema[];\r\n};\r\n\r\nexport const loaderHome: LoaderFunction = async ({\r\n\trequest,\r\n}) => {\r\n\tdocument.title = \"Projects\";\r\n\tconst url = new URL(request.url);\r\n\r\n\tconst projects = await getProjectAll();\r\n\tconst tagOptions = await getTagsAll();\r\n\r\n\tconst paramTags = url.searchParams.get(\"tags\");\r\n\tconst sortRule =\r\n\t\turl.searchParams.get(\"sortRule\");\r\n\r\n\tconst filterTags = extractFilterTags(paramTags);\r\n\tsortItems(sortRule, sortRules, projects);\r\n\treturn {\r\n\t\tsortRule,\r\n\t\tprojects,\r\n\t\tfilterTags,\r\n\t\ttagOptions,\r\n\t};\r\n};\r\n","import {\r\n\tFC,\r\n\tFragment,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\n\r\nimport {\r\n\tButton,\r\n\tButtonProps,\r\n\tPopover,\r\n\tPopoverProps,\r\n} from \"@mui/material\";\r\n\r\ntype PopoverButtonProps = Omit<\r\n\tPopoverProps,\r\n\t\"open\"\r\n> & {\r\n\tbuttonProps: ButtonProps;\r\n};\r\n\r\nexport const PopoverButton: FC<\r\n\tPopoverButtonProps\r\n> = (props) => {\r\n\tconst { buttonProps, ...popoverProps } = props;\r\n\r\n\tconst buttonRef =\r\n\t\tuseRef<HTMLButtonElement | null>(null);\r\n\tconst [menuAnchor, setMenuAnchor] =\r\n\t\tuseState<HTMLButtonElement | null>(null);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button\r\n\t\t\t\t{...buttonProps}\r\n\t\t\t\tref={buttonRef}\r\n\t\t\t\tonClick={() =>\r\n\t\t\t\t\tsetMenuAnchor(buttonRef.current)\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\tSort\r\n\t\t\t</Button>\r\n\t\t\t<Popover\r\n\t\t\t\t{...popoverProps}\r\n\t\t\t\tanchorEl={menuAnchor}\r\n\t\t\t\topen={menuAnchor !== null}\r\n\t\t\t\tonClose={() => setMenuAnchor(null)}\r\n\t\t\t/>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import { CheckRounded } from \"@mui/icons-material\";\r\nimport {\r\n\tListItemIcon,\r\n\tListItemText,\r\n\tMenuItem,\r\n\tMenuList,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\n\r\ntype SortRuleMenuProps = {\r\n\trule: string | null;\r\n\tsortRules: { label: string; value: string }[];\r\n\tonChange: (sortRule: string) => void;\r\n};\r\nexport const SortRuleMenu: FC<\r\n\tSortRuleMenuProps\r\n> = (props) => {\r\n\tconst { sortRules, rule, onChange } = props;\r\n\treturn (\r\n\t\t<MenuList>\r\n\t\t\t{sortRules.map(\r\n\t\t\t\t({ label, value }, index) => (\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tkey={value}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonClick={() => onChange(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t{value === rule && <CheckRounded />}\r\n\t\t\t\t\t\t\t{(rule === null || rule === \"\") &&\r\n\t\t\t\t\t\t\t\tindex === 0 && <CheckRounded />}\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText>{label}</ListItemText>\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</MenuList>\r\n\t);\r\n};\r\n","import {\r\n\tAutocomplete,\r\n\tTextField,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\n\r\ntype StyledAutocompleteProps = {\r\n\tfullWidth?: boolean;\r\n\twidth?: string;\r\n\toptions: string[];\r\n\tvalue: string[];\r\n\tonChange: (value: string[]) => void;\r\n};\r\nexport const StyledAutocomplete: FC<\r\n\tStyledAutocompleteProps\r\n> = (props) => {\r\n\tconst {\r\n\t\twidth,\r\n\t\tfullWidth,\r\n\t\toptions,\r\n\t\tvalue,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<Autocomplete\r\n\t\t\tfreeSolo\r\n\t\t\tfullWidth={fullWidth}\r\n\t\t\tmultiple\r\n\t\t\tlimitTags={3}\r\n\t\t\tsize=\"small\"\r\n\t\t\toptions={options}\r\n\t\t\tvalue={value}\r\n\t\t\tonChange={(_, values) => onChange(values)}\r\n\t\t\trenderInput={(params) => (\r\n\t\t\t\t<TextField\r\n\t\t\t\t\t{...params}\r\n\t\t\t\t\tlabel=\"Tags\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\tsx={{\r\n\t\t\t\twidth,\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n","import { OpenInNewRounded } from \"@mui/icons-material\";\r\nimport {\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemIcon,\r\n\tListItemSecondaryAction,\r\n\tListItemText,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { ProjectSchema } from \"~types/schemas\";\r\n\r\ntype ProjectListProps = {\r\n\tprojects: ProjectSchema[];\r\n};\r\nexport const ProjectList: FC<ProjectListProps> = (\r\n\tprops,\r\n) => {\r\n\tconst { projects } = props;\r\n\r\n\tif (projects.length === 0) {\r\n\t\treturn (\r\n\t\t\t<Typography\r\n\t\t\t\tvariant=\"body1\"\r\n\t\t\t\tfontStyle=\"italic\"\r\n\t\t\t>\r\n\t\t\t\tNo project to display.\r\n\t\t\t</Typography>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<List>\r\n\t\t\t{projects.map(\r\n\t\t\t\t({ name, tags, projectId }, index) => (\r\n\t\t\t\t\t<ListItem key={`project-${index}`}>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tjustifyContent=\"cetner\"\r\n\t\t\t\t\t\t\t\tfontWeight=\"bolder\"\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tfontSize=\"large\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{projectId}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\ttitle={name}\r\n\t\t\t\t\t\t\tprimaryTypographyProps={{\r\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\r\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t\t\twidth: \"50%\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsecondary={tags.join(\", \")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\ttitle=\"Open\"\r\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\tto={`/project/${projectId}`}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<OpenInNewRounded />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</List>\r\n\t);\r\n};\r\n","import {\r\n\tCreateNewFolderRounded,\r\n\tExpandMoreRounded,\r\n\tFilterListRounded,\r\n} from \"@mui/icons-material\";\r\nimport { Button, Stack } from \"@mui/material\";\r\nimport { FC, useState } from \"react\";\r\nimport {\r\n\tLink as RouterLink,\r\n\tuseLoaderData,\r\n\tuseSubmit,\r\n} from \"react-router-dom\";\r\nimport { PopoverButton } from \"~components/PoppoverButton\";\r\nimport { SortRuleMenu } from \"~components/SortRuleMenu\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { ProjectList } from \"./helper\";\r\nimport { LoaderData, sortRules } from \"./loader\";\r\n\r\nexport const Home: FC = () => {\r\n\tconst {\r\n\t\tprojects,\r\n\t\tsortRule,\r\n\t\tfilterTags,\r\n\t\ttagOptions,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\tconst submit = useSubmit();\r\n\tconst [selectedTags, setSelectedTags] =\r\n\t\tuseState(filterTags);\r\n\r\n\tconst handleSortRuleChange = (\r\n\t\tvalue: string,\r\n\t) => {\r\n\t\tsubmit(\r\n\t\t\t{\r\n\t\t\t\tsortRule: value,\r\n\t\t\t\ttags: selectedTags,\r\n\t\t\t},\r\n\t\t\t{ action: \"/\", method: \"get\" },\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleFilterSubmit = () => {\r\n\t\tsubmit(\r\n\t\t\t{\r\n\t\t\t\tsortRule: sortRule || \"\",\r\n\t\t\t\ttags: selectedTags,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\taction: \"/\",\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation=\"Projects\"\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\tstartIcon={<CreateNewFolderRounded />}\r\n\t\t\t\t\tto=\"/project/create\"\r\n\t\t\t\t>\r\n\t\t\t\t\tnew project\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Stack\r\n\t\t\t\tspacing={2}\r\n\t\t\t\tpadding={2}\r\n\t\t\t>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\tspacing={1}\r\n\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\tonChange={setSelectedTags}\r\n\t\t\t\t\t\twidth=\"70%\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonClick={handleFilterSubmit}\r\n\t\t\t\t\t\tstartIcon={<FilterListRounded />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tfilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<PopoverButton\r\n\t\t\t\t\t\tbuttonProps={{\r\n\t\t\t\t\t\t\tdisableElevation: true,\r\n\t\t\t\t\t\t\tvariant: \"outlined\",\r\n\t\t\t\t\t\t\tstartIcon: <ExpandMoreRounded />,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SortRuleMenu\r\n\t\t\t\t\t\t\tsortRules={sortRules}\r\n\t\t\t\t\t\t\trule={sortRule}\r\n\t\t\t\t\t\t\tonChange={handleSortRuleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PopoverButton>\r\n\t\t\t\t</Stack>\r\n\t\t\t\t<ProjectList projects={projects} />\r\n\t\t\t</Stack>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\r\n\talpha,\r\n\tcreateTheme,\r\n} from \"@mui/material\";\r\n\r\nconst themePalette = createTheme({\r\n\tpalette: {\r\n\t\tmode: \"dark\",\r\n\t\tprimary: {\r\n\t\t\tmain: \"#00D3D0\",\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#D68F3E\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: \"#1B1D2D\",\r\n\t\t\tpaper: \"#1B1D2D\",\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\tprimary: alpha(\"#fff\", 0.78),\r\n\t\t\tsecondary: alpha(\"#fff\", 0.57),\r\n\t\t},\r\n\t},\r\n});\r\nconst themeComponent = createTheme({\r\n\tcomponents: {\r\n\t\tMuiCssBaseline: {\r\n\t\t\tstyleOverrides: {\r\n\t\t\t\thtml: {\r\n\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\tthemePalette.palette.background,\r\n\t\t\t\t},\r\n\t\t\t\tpre: {\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\toverflow: \"auto\",\r\n\t\t\t\t\tscrollbarWidth: \"thin\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const themeComposed = createTheme({\r\n\tpalette: themePalette.palette,\r\n\tcomponents: themeComponent.components,\r\n});\r\n","import { FC } from \"react\";\r\nimport {\r\n\tEditor,\r\n\tEditorProps,\r\n\tloader,\r\n} from \"@monaco-editor/react\";\r\nimport { themeComposed } from \"theme\";\r\n\r\nconst editorLoader = await loader.init();\r\neditorLoader.editor.defineTheme(\"markdown-dark\", {\r\n\tbase: \"vs-dark\",\r\n\tinherit: true,\r\n\trules: [\r\n\t\t{\r\n\t\t\tbackground: \"2E3440\",\r\n\t\t\ttoken: \"\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"616e88\",\r\n\t\t\ttoken: \"comment\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"a3be8c\",\r\n\t\t\ttoken: \"string\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"b48ead\",\r\n\t\t\ttoken: \"constant.numeric\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"81a1c1\",\r\n\t\t\ttoken: \"constant.language\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"81a1c1\",\r\n\t\t\ttoken: \"keyword\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"81a1c1\",\r\n\t\t\ttoken: \"storage\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"81a1c1\",\r\n\t\t\ttoken: \"storage.type\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"8fbcbb\",\r\n\t\t\ttoken: \"entity.name.class\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"8fbcbb\",\r\n\t\t\tfontStyle: \"  bold\",\r\n\t\t\ttoken: \"entity.other.inherited-class\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"88c0d0\",\r\n\t\t\ttoken: \"entity.name.function\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"81a1c1\",\r\n\t\t\ttoken: \"entity.name.tag\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"8fbcbb\",\r\n\t\t\ttoken: \"entity.other.attribute-name\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"88c0d0\",\r\n\t\t\ttoken: \"support.function\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"f8f8f0\",\r\n\t\t\tbackground: \"f92672\",\r\n\t\t\ttoken: \"invalid\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"f8f8f0\",\r\n\t\t\tbackground: \"ae81ff\",\r\n\t\t\ttoken: \"invalid.deprecated\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"b48ead\",\r\n\t\t\ttoken: \"constant.color.other.rgb-value\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"ebcb8b\",\r\n\t\t\ttoken: \"constant.character.escape\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tforeground: \"8fbcbb\",\r\n\t\t\ttoken: \"variable.other.constant\",\r\n\t\t},\r\n\t],\r\n\tcolors: {\r\n\t\t\"editor.foreground\": \"#D8DEE9\",\r\n\t\t\"editor.background\":\r\n\t\t\tthemeComposed.palette.background.default,\r\n\t\t\"editor.selectionBackground\": \"#434C5ECC\",\r\n\t\t\"editor.lineHighlightBackground\": \"#3B4252\",\r\n\t\t\"editorCursor.foreground\": \"#D8DEE9\",\r\n\t\t\"editorWhitespace.foreground\": \"#434C5ECC\",\r\n\t},\r\n});\r\neditorLoader.editor.setTheme(\"markdown-dark\");\r\nexport const StyledEditor: FC<EditorProps> = (\r\n\tprops,\r\n) => {\r\n\treturn (\r\n\t\t<Editor\r\n\t\t\t{...props}\r\n\t\t\tlanguage=\"markdown\"\r\n\t\t\tdefaultLanguage=\"markdown\"\r\n\t\t\ttheme=\"markdown-dark\"\r\n\t\t\toptions={{\r\n\t\t\t\tminimap: { enabled: false },\r\n\t\t\t\twordWrap: \"on\",\r\n\t\t\t\twordBreak: \"normal\",\r\n\t\t\t\tfolding: false,\r\n\t\t\t\tfontSize: 18,\r\n\t\t\t\tfontFamily: \"Fira Code\",\r\n\t\t\t\tfontLigatures: true,\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n","import rehypeDocument from \"rehype-document\";\r\nimport rehypeKatex from \"rehype-katex\";\r\nimport rehypeSanitize from \"rehype-sanitize\";\r\nimport rehypeStringify from \"rehype-stringify\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport remarkMath from \"remark-math\";\r\nimport remarkParse from \"remark-parse\";\r\nimport remarkRehype from \"remark-rehype\";\r\nimport { unified } from \"unified\";\r\n\r\nexport const parseMarkdown = (\r\n\tcontent: string,\r\n) => {\r\n\treturn unified()\r\n\t\t.use(remarkParse, {\r\n\t\t\tfragment: true,\r\n\t\t})\r\n\t\t.use(remarkGfm)\r\n\t\t.use(remarkMath)\r\n\t\t.use(remarkRehype)\r\n\t\t.use(rehypeSanitize)\r\n\t\t.use(rehypeKatex)\r\n\t\t.use(rehypeDocument, {\r\n\t\t\tcss: \"https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css\",\r\n\t\t})\r\n\t\t.use(rehypeStringify)\r\n\t\t.processSync(content.normalize())\r\n\t\t.toString();\r\n};\r\n","import { Box, Grid } from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tReactNode,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\n\r\ntype LayoutPros = {\r\n\tchildLeft: ReactNode;\r\n\tchildRight: ReactNode;\r\n};\r\nexport const Layout: FC<LayoutPros> = (props) => {\r\n\tconst { childLeft, childRight } = props;\r\n\r\n\tconst contentRef =\r\n\t\tuseRef<HTMLDivElement | null>(null);\r\n\tconst [contentHeight, setEditorHeight] =\r\n\t\tuseState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!contentRef || !contentRef.current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst topOffset =\r\n\t\t\tcontentRef.current.offsetTop;\r\n\t\tsetEditorHeight(\r\n\t\t\t`calc(99vh - ${topOffset}px)`,\r\n\t\t);\r\n\t}, [contentRef]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tref={contentRef}\r\n\t\t\tpaddingTop={2}\r\n\t\t\tpaddingLeft={2}\r\n\t\t>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd={6}\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t>\r\n\t\t\t\t\t{childLeft}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd={6}\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t>\r\n\t\t\t\t\t{childRight}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import { CreateNewFolderRounded } from \"@mui/icons-material\";\r\nimport {\r\n\tButton,\r\n\tGrid,\r\n\tTextField,\r\n\tTypography,\r\n\tuseTheme,\r\n} from \"@mui/material\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { useSubmit } from \"react-router-dom\";\r\nimport { StyledEditor } from \"~components/StyledEditor\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { parseMarkdown } from \"~core/markdown\";\r\nimport { createProject } from \"~database\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { Layout } from \"./Layout\";\r\n\r\nexport const ProjectCreate: FC = () => {\r\n\tconst tagOptions = useLoaderData() as string[];\r\n\tconst theme = useTheme();\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [name, setName] = useState(\"\");\r\n\tconst [description, setDescription] =\r\n\t\tuseState(\"\");\r\n\tconst [selectedTags, setSelectTags] = useState<\r\n\t\tstring[]\r\n\t>([]);\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tif (name.trim().length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst projectId = await createProject(\r\n\t\t\tname,\r\n\t\t\tdescription,\r\n\t\t\tselectedTags,\r\n\t\t);\r\n\t\tsubmit(\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\taction: `/project/${projectId}`,\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preveiwElement =\r\n\t\t\tdocument.getElementById(\"preview\");\r\n\t\tif (!preveiwElement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpreveiwElement.innerHTML =\r\n\t\t\tparseMarkdown(description);\r\n\t}, [description]);\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation=\"New project\"\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tdisabled={name.trim().length === 0}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\tstartIcon={<CreateNewFolderRounded />}\r\n\t\t\t\t>\r\n\t\t\t\t\tCreate project\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Layout\r\n\t\t\t\tchildLeft={\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tlabel=\"Project name\"\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\tname.trim().length === 0\r\n\t\t\t\t\t\t\t\t\t\t? \"error\"\r\n\t\t\t\t\t\t\t\t\t\t: \"primary\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\t\t\t\tsetName(\r\n\t\t\t\t\t\t\t\t\t\tevent.target.value.normalize(),\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\t\t\tonChange={setSelectTags}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\ttheme.palette.text.secondary\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tDescription\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledEditor\r\n\t\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\t\tsetDescription(value || \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t}\r\n\t\t\t\tchildRight={\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tid=\"preview\"\r\n\t\t\t\t\t\tmaxWidth=\"100%\"\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\t\tcomponent=\"main\"\r\n\t\t\t\t\t\tdisplay=\"block\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { LoaderFunction } from \"react-router\";\r\nimport { getTagsAll } from \"~database/index\";\r\n\r\nexport const loaderProjectCreate: LoaderFunction =\r\n\tasync () => {\r\n\t\tdocument.title = \"New project\";\r\n\t\treturn await getTagsAll();\r\n\t};\r\n","import {\r\n\tLoaderFunction,\r\n\tjson,\r\n} from \"react-router\";\r\n\r\nimport {\r\n\tgetProject,\r\n\tgetTagsAll,\r\n} from \"~database\";\r\nimport { ProjectSchema } from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\tproject: ProjectSchema;\r\n\ttagOptions: string[];\r\n};\r\nexport const loaderProjectInfo: LoaderFunction =\r\n\tasync ({ params }) => {\r\n\t\tif (!params.projectId) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Bad request.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst projectId = Number.parseInt(\r\n\t\t\tparams.projectId,\r\n\t\t);\r\n\t\tif (!Number.isFinite(projectId)) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 404,\r\n\t\t\t\t\tstatusText: \"Invalid project ID.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst project = await getProject(projectId);\r\n\t\tif (!project) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 404,\r\n\t\t\t\t\tstatusText: \"Project not found.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tdocument.title = project.name;\r\n\t\tconst tagOptions = await getTagsAll();\r\n\t\treturn { project, tagOptions };\r\n\t};\r\n","import { Box, Grid } from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tReactNode,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\n\r\ntype LayoutPros = {\r\n\tslotEditor: ReactNode;\r\n\tslotPreview: ReactNode;\r\n\tisEditMode: boolean;\r\n};\r\nexport const Layout: FC<LayoutPros> = (props) => {\r\n\tconst { isEditMode, slotEditor, slotPreview } =\r\n\t\tprops;\r\n\r\n\tconst contentRef =\r\n\t\tuseRef<HTMLDivElement | null>(null);\r\n\tconst [contentHeight, setEditorHeight] =\r\n\t\tuseState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!contentRef || !contentRef.current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst topOffset =\r\n\t\t\tcontentRef.current.offsetTop;\r\n\t\tsetEditorHeight(\r\n\t\t\t`calc(98vh - ${Math.floor(topOffset)}px)`,\r\n\t\t);\r\n\t}, [contentRef]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tref={contentRef}\r\n\t\t\tpaddingTop={2}\r\n\t\t\tmarginLeft={2}\r\n\t\t>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t>\r\n\t\t\t\t{isEditMode && (\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{slotEditor}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{slotPreview}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import {\r\n\tCodeRounded,\r\n\tMenuBookRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tButton,\r\n\tContainer,\r\n\tGrid,\r\n\tIconButton,\r\n\tTextField,\r\n\tTypography,\r\n\tuseTheme,\r\n} from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tFragment,\r\n\tuseEffect,\r\n\tuseState,\r\n} from \"react\";\r\nimport { useHotkeys } from \"react-hotkeys-hook\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { useSubmit } from \"react-router-dom\";\r\nimport { StyledEditor } from \"~components/StyledEditor\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { parseMarkdown } from \"~core/markdown\";\r\nimport {\r\n\tgetProject,\r\n\tupdateProject,\r\n} from \"~database\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { Layout } from \"./Layout\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nexport const ProjectInfo: FC = () => {\r\n\tconst {\r\n\t\tproject: loadedProject,\r\n\t\ttagOptions: tagOptions,\r\n\t} = useLoaderData() as LoaderData;\r\n\r\n\tconst theme = useTheme();\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [isEditMode, setIsEditMode] =\r\n\t\tuseState(false);\r\n\r\n\tconst [project, setProject] = useState(\r\n\t\tloadedProject,\r\n\t);\r\n\r\n\tconst [name, setName] = useState(project.name);\r\n\tconst [description, setDescription] = useState(\r\n\t\tproject.description,\r\n\t);\r\n\tconst [selectedTags, setSelectedTags] =\r\n\t\tuseState(project.tags);\r\n\r\n\tuseHotkeys(\"ctrl+alt+e\", () =>\r\n\t\tsetIsEditMode(!isEditMode),\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tif (!project) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isEditMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst projectId = await updateProject(\r\n\t\t\t\tproject.projectId!,\r\n\t\t\t\tname,\r\n\t\t\t\tdescription,\r\n\t\t\t\tselectedTags,\r\n\t\t\t);\r\n\t\t\tconst updatedProject = await getProject(\r\n\t\t\t\tprojectId,\r\n\t\t\t);\r\n\t\t\tif (!updatedProject) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetProject(updatedProject);\r\n\t\t})();\r\n\t}, [\r\n\t\tdescription,\r\n\t\tselectedTags,\r\n\t\tname,\r\n\t\tisEditMode,\r\n\t]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preveiwElement =\r\n\t\t\tdocument.getElementById(\"preview\");\r\n\t\tif (!preveiwElement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpreveiwElement.innerHTML =\r\n\t\t\tparseMarkdown(description);\r\n\t}, [description]);\r\n\r\n\tconst redirectToTicket = () => {\r\n\t\tif (!project || !project.projectId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubmit(\r\n\t\t\t{ projectId: project.projectId },\r\n\t\t\t{\r\n\t\t\t\taction: \"/ticket\",\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\tif (!project) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={project.name}\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={redirectToTicket}\r\n\t\t\t\t>\r\n\t\t\t\t\ttickets view\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<IconButton\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\ttitle={isEditMode ? \"Read\" : \"Edit\"}\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\tright: theme.spacing(2),\r\n\t\t\t\t\tbottom: theme.spacing(2),\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={() => setIsEditMode(!isEditMode)}\r\n\t\t\t>\r\n\t\t\t\t{isEditMode ? (\r\n\t\t\t\t\t<MenuBookRounded />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<CodeRounded />\r\n\t\t\t\t)}\r\n\t\t\t</IconButton>\r\n\t\t\t<Layout\r\n\t\t\t\tisEditMode={isEditMode}\r\n\t\t\t\tslotEditor={\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tlabel=\"Project name\"\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\tname.trim().length === 0\r\n\t\t\t\t\t\t\t\t\t\t? \"error\"\r\n\t\t\t\t\t\t\t\t\t\t: \"primary\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\t\t\t\tsetName(\r\n\t\t\t\t\t\t\t\t\t\tevent.target.value.normalize(),\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\t\t\tonChange={setSelectedTags}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledEditor\r\n\t\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\t\tsetDescription(value || \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t}\r\n\t\t\t\tslotPreview={\r\n\t\t\t\t\t<Container maxWidth=\"sm\">\r\n\t\t\t\t\t\t{!isEditMode && (\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tCreated:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{project.dateCreated.toUTCString()}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tLast modified:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{project.lastModified.toUTCString()}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tTags:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{project.tags.length > 0\r\n\t\t\t\t\t\t\t\t\t\t? project.tags.join(\", \")\r\n\t\t\t\t\t\t\t\t\t\t: \"-\"}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tid=\"preview\"\r\n\t\t\t\t\t\t\tmaxWidth=\"100%\"\r\n\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t\t\t\tcomponent=\"main\"\r\n\t\t\t\t\t\t\tdisplay=\"block\"\r\n\t\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\t\twordBreak: \"break-word\",\r\n\t\t\t\t\t\t\t\twordWrap: \"break-word\",\r\n\t\t\t\t\t\t\t\tscrollbarWidth: \"thin\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\r\n\tFC,\r\n\tReactNode,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\nimport { Box, Grid } from \"@mui/material\";\r\n\r\ntype LayoutPros = {\r\n\tchildLeft: ReactNode;\r\n\tchildRight: ReactNode;\r\n};\r\nexport const Layout: FC<LayoutPros> = (props) => {\r\n\tconst { childLeft, childRight } = props;\r\n\r\n\tconst contentRef =\r\n\t\tuseRef<HTMLDivElement | null>(null);\r\n\tconst [contentHeight, setEditorHeight] =\r\n\t\tuseState(\"\");\r\n\tuseEffect(() => {\r\n\t\tif (!contentRef || !contentRef.current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst topOffset =\r\n\t\t\tcontentRef.current.offsetTop;\r\n\t\tsetEditorHeight(\r\n\t\t\t`calc(100vh - ${Math.ceil(topOffset)}px)`,\r\n\t\t);\r\n\t}, [contentRef]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tref={contentRef}\r\n\t\t\toverflow=\"hidden\"\r\n\t\t>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t\tpaddingTop={2}\r\n\t\t\t\tpaddingLeft={2}\r\n\t\t\t>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd={6}\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t>\r\n\t\t\t\t\t{childLeft}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd={6}\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{childRight}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import {\r\n\tButton,\r\n\tGrid,\r\n\tTextField,\r\n\tTypography,\r\n\tuseTheme,\r\n} from \"@mui/material\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { useSubmit } from \"react-router-dom\";\r\nimport { StyledEditor } from \"~components/StyledEditor\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { parseMarkdown } from \"~core/markdown\";\r\nimport { createTicket } from \"~database\";\r\nimport { LoaderData } from \"~pages/Ticket/TicketCreate/loader\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { Layout } from \"./Layout\";\r\n\r\nexport const TicketCreate: FC = () => {\r\n\tconst { tagOptions, projectId } =\r\n\t\tuseLoaderData() as LoaderData;\r\n\tconst theme = useTheme();\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [content, setContent] = useState(\"\");\r\n\tconst [selectedTags, setSelectedTags] =\r\n\t\tuseState<string[]>([]);\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tif (title.trim().length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst ticketId = await createTicket(\r\n\t\t\tprojectId,\r\n\t\t\ttitle,\r\n\t\t\tcontent,\r\n\t\t\tselectedTags,\r\n\t\t);\r\n\t\tsubmit(\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\taction: `/ticket/${ticketId}`,\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preveiwElement =\r\n\t\t\tdocument.getElementById(\"preview\");\r\n\t\tif (!preveiwElement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpreveiwElement.innerHTML =\r\n\t\t\tparseMarkdown(content);\r\n\t}, [content]);\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation=\"New ticket\"\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={title.trim().length === 0}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t>\r\n\t\t\t\t\tOpen ticket\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Layout\r\n\t\t\t\tchildLeft={\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tlabel=\"Ticket title\"\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\ttitle.trim().length === 0\r\n\t\t\t\t\t\t\t\t\t\t? \"error\"\r\n\t\t\t\t\t\t\t\t\t\t: \"primary\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\t\t\t\tsetTitle(\r\n\t\t\t\t\t\t\t\t\t\tevent.target.value.normalize(),\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\t\t\tonChange={setSelectedTags}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\ttheme.palette.text.secondary\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tContent\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledEditor\r\n\t\t\t\t\t\t\t\tvalue={content}\r\n\t\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\t\tsetContent(value || \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t}\r\n\t\t\t\tchildRight={\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tid=\"preview\"\r\n\t\t\t\t\t\tmaxWidth=\"100%\"\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\t\tcomponent=\"main\"\r\n\t\t\t\t\t\tdisplay=\"block\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\r\n\tLoaderFunction,\r\n\tjson,\r\n} from \"react-router\";\r\nimport {\r\n\tgetProject,\r\n\tgetTagsAll,\r\n} from \"~database\";\r\n\r\nexport type LoaderData = {\r\n\tprojectId: number;\r\n\ttagOptions: string[];\r\n};\r\n\r\nexport const loaderTicketCreate: LoaderFunction =\r\n\tasync ({ request }) => {\r\n\t\tconst url = new URL(request.url);\r\n\t\tconst paramProjectId =\r\n\t\t\turl.searchParams.get(\"projectId\");\r\n\r\n\t\tif (!paramProjectId) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Bad request.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst projectId = Number.parseInt(\r\n\t\t\tparamProjectId,\r\n\t\t);\r\n\t\tif (!Number.isInteger(projectId)) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Invalid project id.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst project = await getProject(projectId);\r\n\t\tif (!project) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Non-existent project.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tdocument.title = \"New ticket\";\r\n\t\tconst tagOptions = await getTagsAll();\r\n\t\treturn { tagOptions, projectId };\r\n\t};\r\n","import {\r\n\tLoaderFunction,\r\n\tjson,\r\n} from \"react-router\";\r\nimport { getTagsAll, getTicket } from \"~database\";\r\nimport { TicketSchema } from \"~types/schemas\";\r\n\r\nexport type LoaderData = {\r\n\tticket: TicketSchema;\r\n\ttagOptions: string[];\r\n};\r\nexport const loaderTicketInfo: LoaderFunction =\r\n\tasync ({ params }) => {\r\n\t\tif (!params.ticketId) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Bad request.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst ticketId = Number.parseInt(\r\n\t\t\tparams.ticketId,\r\n\t\t);\r\n\t\tif (!Number.isFinite(ticketId)) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 404,\r\n\t\t\t\t\tstatusText:\r\n\t\t\t\t\t\t\"Invalid ticket identifier.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst ticket = await getTicket(ticketId);\r\n\t\tif (!ticket) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 404,\r\n\t\t\t\t\tstatusText: \"Ticket not found.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tdocument.title = ticket.title;\r\n\t\tconst tagOptions = await getTagsAll();\r\n\t\treturn { ticket, tagOptions };\r\n\t};\r\n","import { Box, Grid } from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tReactNode,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\n\r\ntype LayoutPros = {\r\n\tslotEditor: ReactNode;\r\n\tslotPreview: ReactNode;\r\n\tisEditMode: boolean;\r\n};\r\nexport const Layout: FC<LayoutPros> = (props) => {\r\n\tconst { isEditMode, slotEditor, slotPreview } =\r\n\t\tprops;\r\n\r\n\tconst contentRef =\r\n\t\tuseRef<HTMLDivElement | null>(null);\r\n\tconst [contentHeight, setEditorHeight] =\r\n\t\tuseState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!contentRef || !contentRef.current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst topOffset =\r\n\t\t\tcontentRef.current.offsetTop;\r\n\t\tsetEditorHeight(\r\n\t\t\t`calc(98vh - ${Math.floor(topOffset)}px)`,\r\n\t\t);\r\n\t}, [contentRef]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tref={contentRef}\r\n\t\t\tpaddingTop={2}\r\n\t\t\tmarginLeft={2}\r\n\t\t>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t>\r\n\t\t\t\t{isEditMode && (\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{slotEditor}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid\r\n\t\t\t\t\titem\r\n\t\t\t\t\tmd\r\n\t\t\t\t\theight={contentHeight}\r\n\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{slotPreview}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n};\r\n","import {\r\n\tCodeRounded,\r\n\tMenuBookRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tButton,\r\n\tContainer,\r\n\tGrid,\r\n\tIconButton,\r\n\tTextField,\r\n\tTypography,\r\n\tuseTheme,\r\n} from \"@mui/material\";\r\nimport {\r\n\tFC,\r\n\tFragment,\r\n\tuseEffect,\r\n\tuseState,\r\n} from \"react\";\r\nimport { useHotkeys } from \"react-hotkeys-hook\";\r\nimport { useLoaderData } from \"react-router\";\r\nimport { useSubmit } from \"react-router-dom\";\r\nimport { StyledEditor } from \"~components/StyledEditor\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { parseMarkdown } from \"~core/markdown\";\r\nimport {\r\n\tgetTicket,\r\n\tupdateTicket,\r\n} from \"~database/index\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { Layout } from \"./Layout\";\r\nimport { LoaderData } from \"./loader\";\r\n\r\nexport const TicketInfo: FC = () => {\r\n\tconst { ticket: loadedTicket, tagOptions } =\r\n\t\tuseLoaderData() as LoaderData;\r\n\tconst theme = useTheme();\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [isEditMode, setIsEditMode] =\r\n\t\tuseState(false);\r\n\tconst [ticket, setTicket] =\r\n\t\tuseState(loadedTicket);\r\n\tconst [title, setTitle] = useState(\r\n\t\tticket.title,\r\n\t);\r\n\tconst [content, setContent] = useState(\r\n\t\tticket.content,\r\n\t);\r\n\tconst [selectedTags, setSelectedTags] =\r\n\t\tuseState(ticket.tags);\r\n\r\n\tuseHotkeys(\"ctrl+alt+e\", () =>\r\n\t\tsetIsEditMode(!isEditMode),\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tif (!ticket) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isEditMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ticketId = await updateTicket(\r\n\t\t\t\tticket.projectId!,\r\n\t\t\t\ttitle,\r\n\t\t\t\tcontent,\r\n\t\t\t\tselectedTags,\r\n\t\t\t);\r\n\t\t\tconst updatedTicket = await getTicket(\r\n\t\t\t\tticketId,\r\n\t\t\t);\r\n\t\t\tif (!updatedTicket) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetTicket(updatedTicket);\r\n\t\t})();\r\n\t}, [content, selectedTags, title, isEditMode]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preveiwElement =\r\n\t\t\tdocument.getElementById(\"preview\");\r\n\t\tif (!preveiwElement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpreveiwElement.innerHTML =\r\n\t\t\tparseMarkdown(content);\r\n\t}, [content]);\r\n\r\n\tconst redirectToProject = () => {\r\n\t\tsubmit(\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\taction: `/project/${ticket.projectId}`,\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\tif (!ticket) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation={ticket.title}\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={redirectToProject}\r\n\t\t\t\t>\r\n\t\t\t\t\tProject home\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<IconButton\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\ttitle={isEditMode ? \"Read\" : \"Edit\"}\r\n\t\t\t\tsx={{\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tright: theme.spacing(4),\r\n\t\t\t\t\tbottom: theme.spacing(4),\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetIsEditMode(!isEditMode);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{isEditMode ? (\r\n\t\t\t\t\t<MenuBookRounded />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<CodeRounded />\r\n\t\t\t\t)}\r\n\t\t\t</IconButton>\r\n\t\t\t<Layout\r\n\t\t\t\tisEditMode={isEditMode}\r\n\t\t\t\tslotEditor={\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tlabel=\"Project name\"\r\n\t\t\t\t\t\t\t\tcolor={\r\n\t\t\t\t\t\t\t\t\ttitle.trim().length === 0\r\n\t\t\t\t\t\t\t\t\t\t? \"error\"\r\n\t\t\t\t\t\t\t\t\t\t: \"primary\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\t\t\t\tsetTitle(\r\n\t\t\t\t\t\t\t\t\t\tevent.target.value.normalize(),\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\t\t\tonChange={setSelectedTags}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StyledEditor\r\n\t\t\t\t\t\t\t\tvalue={content}\r\n\t\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\t\tsetContent(value || \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t}\r\n\t\t\t\tslotPreview={\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t{!isEditMode && (\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tCreated:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{ticket.dateCreated.toUTCString()}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tLast modified:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{ticket.lastModified.toUTCString()}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\tTags:{\" \"}\r\n\t\t\t\t\t\t\t\t\t{ticket.tags.length > 0\r\n\t\t\t\t\t\t\t\t\t\t? ticket.tags.join(\", \")\r\n\t\t\t\t\t\t\t\t\t\t: \"-\"}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tid=\"preview\"\r\n\t\t\t\t\t\t\tmaxWidth=\"100%\"\r\n\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\toverflow=\"auto\"\r\n\t\t\t\t\t\t\tcomponent=\"main\"\r\n\t\t\t\t\t\t\tdisplay=\"block\"\r\n\t\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\t\twordBreak: \"break-word\",\r\n\t\t\t\t\t\t\t\twordWrap: \"break-word\",\r\n\t\t\t\t\t\t\t\tscrollbarWidth: \"thin\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import { OpenInNewRounded } from \"@mui/icons-material\";\r\nimport {\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemIcon,\r\n\tListItemSecondaryAction,\r\n\tListItemText,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { TicketSchema } from \"~types/schemas\";\r\n\r\ntype TicketListProps = {\r\n\ttickets: TicketSchema[];\r\n};\r\nexport const TicketList: FC<TicketListProps> = (\r\n\tprops,\r\n) => {\r\n\tconst { tickets } = props;\r\n\r\n\tif (tickets.length === 0) {\r\n\t\treturn (\r\n\t\t\t<Typography\r\n\t\t\t\tvariant=\"body1\"\r\n\t\t\t\tfontStyle=\"italic\"\r\n\t\t\t>\r\n\t\t\t\tNo project to display.\r\n\t\t\t</Typography>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<List>\r\n\t\t\t{tickets.map(\r\n\t\t\t\t({ title, tags, projectId }, index) => (\r\n\t\t\t\t\t<ListItem key={`project-${index}`}>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tjustifyContent=\"cetner\"\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tfontSize=\"large\"\r\n\t\t\t\t\t\t\t\tfontWeight=\"bolder\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{projectId}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\t\tprimaryTypographyProps={{\r\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\r\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t\t\twidth: \"50%\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsecondary={tags.join(\", \")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\ttitle=\"Open\"\r\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\tto={`/ticket/${projectId}`}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<OpenInNewRounded />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t),\r\n\t\t\t)}\r\n\t\t</List>\r\n\t);\r\n};\r\n","import {\r\n\tLoaderFunction,\r\n\tjson,\r\n} from \"react-router-dom\";\r\nimport {\r\n\textractFilterTags,\r\n\tsortItems,\r\n} from \"~core/query\";\r\nimport {\r\n\tgetProject,\r\n\tgetProjectAll,\r\n\tgetTagsAll,\r\n\tgetTicketAll,\r\n} from \"~database\";\r\nimport { SortRule } from \"~types/generics\";\r\nimport {\r\n\tProjectSchema,\r\n\tTicketSchema,\r\n} from \"~types/schemas\";\r\n\r\nexport const sortRules: SortRule<TicketSchema>[] =\r\n\t[\r\n\t\t{\r\n\t\t\tvalue: \"lastModified\",\r\n\t\t\tlabel: \"Last modified (0-9)\",\r\n\t\t\tcompareFn: (a, b) =>\r\n\t\t\t\tb.lastModified.getTime() -\r\n\t\t\t\ta.lastModified.getTime(),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: \"title\",\r\n\t\t\tlabel: \"Title (A-Z)\",\r\n\t\t\tcompareFn: (a, b) =>\r\n\t\t\t\ta.title.localeCompare(b.title),\r\n\t\t},\r\n\t];\r\nexport type LoaderData = {\r\n\tsortRule: string | null;\r\n\tproject: ProjectSchema | null;\r\n\ttickets: TicketSchema[];\r\n\tprojectOptions: ProjectSchema[];\r\n\ttagOptions: string[];\r\n\ttagFilters: string[];\r\n};\r\n\r\nexport const loaderTicketHome: LoaderFunction =\r\n\tasync ({ request }) => {\r\n\t\tdocument.title = \"Tickets\";\r\n\t\tlet tickets = await getTicketAll();\r\n\t\tconst url = new URL(request.url);\r\n\r\n\t\tconst paramProjectId =\r\n\t\t\turl.searchParams.get(\"projectId\");\r\n\t\tconst paramTags =\r\n\t\t\turl.searchParams.get(\"tags\");\r\n\t\tconst paramSortRule =\r\n\t\t\turl.searchParams.get(\"sortRule\");\r\n\r\n\t\tconst projectOptions = await getProjectAll();\r\n\t\tconst tagOptions = await getTagsAll();\r\n\t\tconst tagFilters =\r\n\t\t\textractFilterTags(paramTags);\r\n\t\tsortItems(paramSortRule, sortRules, tickets);\r\n\r\n\t\tif (!paramProjectId) {\r\n\t\t\treturn {\r\n\t\t\t\tprojectOptions,\r\n\t\t\t\ttagFilters,\r\n\t\t\t\ttagOptions,\r\n\t\t\t\tsortRule: paramSortRule,\r\n\t\t\t\tproject: null,\r\n\t\t\t\ttickets,\r\n\t\t\t};\r\n\t\t}\r\n\t\tconst projectId = Number.parseInt(\r\n\t\t\tparamProjectId,\r\n\t\t);\r\n\t\tif (!Number.isInteger(projectId)) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Invalid project id.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst project = await getProject(projectId);\r\n\t\tif (!project) {\r\n\t\t\tthrow json(\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\tstatus: 400,\r\n\t\t\t\t\tstatusText: \"Non-existent project.\",\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\ttickets = tickets.filter(\r\n\t\t\t(ticket) => ticket.projectId === projectId,\r\n\t\t);\r\n\t\ttickets = tickets.filter((ticket) =>\r\n\t\t\ttagFilters.every((tag) =>\r\n\t\t\t\tticket.tags.includes(tag),\r\n\t\t\t),\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tprojectOptions,\r\n\t\t\ttagOptions,\r\n\t\t\ttagFilters,\r\n\t\t\tsortRule: paramSortRule,\r\n\t\t\tproject,\r\n\t\t\ttickets,\r\n\t\t};\r\n\t};\r\n","import {\r\n\tCreateNewFolderRounded,\r\n\tExpandMoreRounded,\r\n\tFilterListRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n\tAutocomplete,\r\n\tButton,\r\n\tButtonGroup,\r\n\tStack,\r\n\tTextField,\r\n} from \"@mui/material\";\r\nimport { FC, useState } from \"react\";\r\nimport {\r\n\tuseLoaderData,\r\n\tuseSubmit,\r\n} from \"react-router-dom\";\r\nimport { PopoverButton } from \"~components/PoppoverButton\";\r\nimport { SortRuleMenu } from \"~components/SortRuleMenu\";\r\nimport { StyledAutocomplete } from \"~components/TagAutocomplete\";\r\nimport { WithAppBar } from \"~views/WithAppBar\";\r\nimport { TicketList } from \"./helper\";\r\nimport { LoaderData, sortRules } from \"./loader\";\r\n\r\nexport const TicketIdx: FC = () => {\r\n\tconst {\r\n\t\tproject: loadedProject,\r\n\t\tsortRule: loadedSortRule,\r\n\t\ttagFilters: loadedTagFilters,\r\n\t\ttickets,\r\n\t\tprojectOptions,\r\n\t\ttagOptions,\r\n\t} = useLoaderData() as LoaderData;\r\n\tconst submit = useSubmit();\r\n\r\n\tconst [selectedProject, setSelectedProject] =\r\n\t\tuseState(loadedProject);\r\n\tconst [selectedTags, setSelectedTags] =\r\n\t\tuseState(loadedTagFilters);\r\n\r\n\tconst redirectToTicketCreate = () => {\r\n\t\tif (\r\n\t\t\t!loadedProject ||\r\n\t\t\tloadedProject.projectId === undefined\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubmit(\r\n\t\t\t{\r\n\t\t\t\tprojectId: loadedProject.projectId,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\taction: \"/ticket/create\",\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\tconst redirectToProject = () => {\r\n\t\tif (\r\n\t\t\t!loadedProject ||\r\n\t\t\tloadedProject.projectId === undefined\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubmit(\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\taction: `/project/${loadedProject.projectId}`,\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\tconst handleSortRuleChange = (\r\n\t\tvalue: string,\r\n\t) => {\r\n\t\tlet projectId: string = \"\";\r\n\t\tif (\r\n\t\t\tselectedProject !== null &&\r\n\t\t\tselectedProject.projectId !== undefined\r\n\t\t) {\r\n\t\t\tprojectId =\r\n\t\t\t\tselectedProject.projectId.toString();\r\n\t\t}\r\n\t\tsubmit(\r\n\t\t\t{\r\n\t\t\t\tprojectId,\r\n\t\t\t\tsortRule: value,\r\n\t\t\t\ttags: selectedTags,\r\n\t\t\t},\r\n\t\t\t{ action: \"/ticket\", method: \"get\" },\r\n\t\t);\r\n\t};\r\n\tconst handleFilterSubmit = () => {\r\n\t\tlet projectId: string = \"\";\r\n\t\tif (\r\n\t\t\tselectedProject !== null &&\r\n\t\t\tselectedProject.projectId !== undefined\r\n\t\t) {\r\n\t\t\tprojectId =\r\n\t\t\t\tselectedProject.projectId.toString();\r\n\t\t}\r\n\t\tsubmit(\r\n\t\t\t{\r\n\t\t\t\tprojectId,\r\n\t\t\t\tsortRule: loadedSortRule || \"\",\r\n\t\t\t\ttags: selectedTags,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\taction: \"/ticket\",\r\n\t\t\t\tmethod: \"get\",\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<WithAppBar\r\n\t\t\tlocation=\"Tickets\"\r\n\t\t\tseconadaryNav={\r\n\t\t\t\t<ButtonGroup\r\n\t\t\t\t\tdisabled={loadedProject === null}\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button onClick={redirectToProject}>\r\n\t\t\t\t\t\tProject home\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstartIcon={<CreateNewFolderRounded />}\r\n\t\t\t\t\t\tonClick={redirectToTicketCreate}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNew ticket\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</ButtonGroup>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Stack\r\n\t\t\t\tspacing={2}\r\n\t\t\t\tpadding={2}\r\n\t\t\t>\r\n\t\t\t\t<Stack\r\n\t\t\t\t\tspacing={1}\r\n\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\toptions={projectOptions}\r\n\t\t\t\t\t\tvalue={selectedProject}\r\n\t\t\t\t\t\tonChange={(_, value) =>\r\n\t\t\t\t\t\t\tsetSelectedProject(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgetOptionLabel={({\r\n\t\t\t\t\t\t\tprojectId,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t}) => `${projectId}- ${name}`}\r\n\t\t\t\t\t\trenderInput={(params) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\tlabel=\"Project\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\twidth: \"40%\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<StyledAutocomplete\r\n\t\t\t\t\t\toptions={tagOptions}\r\n\t\t\t\t\t\tvalue={selectedTags}\r\n\t\t\t\t\t\tonChange={setSelectedTags}\r\n\t\t\t\t\t\twidth=\"30%\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonClick={handleFilterSubmit}\r\n\t\t\t\t\t\tstartIcon={<FilterListRounded />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tfilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<PopoverButton\r\n\t\t\t\t\t\tbuttonProps={{\r\n\t\t\t\t\t\t\tdisableElevation: true,\r\n\t\t\t\t\t\t\tvariant: \"outlined\",\r\n\t\t\t\t\t\t\tstartIcon: <ExpandMoreRounded />,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SortRuleMenu\r\n\t\t\t\t\t\t\tsortRules={sortRules}\r\n\t\t\t\t\t\t\trule={loadedSortRule}\r\n\t\t\t\t\t\t\tonChange={handleSortRuleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PopoverButton>\r\n\t\t\t\t</Stack>\r\n\t\t\t\t<TicketList tickets={tickets} />\r\n\t\t\t</Stack>\r\n\t\t</WithAppBar>\r\n\t);\r\n};\r\n","import {\n\tCssBaseline,\n\tThemeProvider,\n} from \"@mui/material\";\nimport {\n\tRouterProvider,\n\tcreateHashRouter,\n} from \"react-router-dom\";\nimport { Error } from \"~pages/ErrorBoundary\";\nimport { Home, loaderHome } from \"~pages/Home\";\nimport {\n\tProjectCreate,\n\tloaderProjectCreate,\n} from \"~pages/Project/ProjectCreate\";\nimport {\n\tProjectInfo,\n\tloaderProjectInfo,\n} from \"~pages/Project/ProjectInfo\";\nimport {\n\tTicketCreate,\n\tloaderTicketCreate,\n} from \"~pages/Ticket/TicketCreate\";\nimport {\n\tTicketInfo,\n\tloaderTicketInfo,\n} from \"~pages/Ticket/TicketInfo\";\nimport {\n\tTicketIdx,\n\tloaderTicketHome,\n} from \"~pages/TicketHome\";\n\nimport { themeComposed } from \"./theme\";\n\nconst router = createHashRouter(\n\t[\n\t\t{\n\t\t\tindex: true,\n\t\t\telement: <Home />,\n\t\t\tloader: loaderHome,\n\t\t\terrorElement: <Error />,\n\t\t},\n\t\t{\n\t\t\tpath: \"/project\",\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tpath: \"/project/create\",\n\t\t\t\t\telement: <ProjectCreate />,\n\t\t\t\t\tloader: loaderProjectCreate,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: \"/project/:projectId\",\n\t\t\t\t\telement: <ProjectInfo />,\n\t\t\t\t\tloader: loaderProjectInfo,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tpath: \"/ticket\",\n\t\t\terrorElement: <Error />,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tindex: true,\n\t\t\t\t\telement: <TicketIdx />,\n\t\t\t\t\tloader: loaderTicketHome,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: \"/ticket/create\",\n\t\t\t\t\telement: <TicketCreate />,\n\t\t\t\t\tloader: loaderTicketCreate,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: \"/ticket/:ticketId\",\n\t\t\t\t\telement: <TicketInfo />,\n\t\t\t\t\tloader: loaderTicketInfo,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\t{\n\t\tbasename: \"/\",\n\t},\n);\n\nexport const App = () => {\n\treturn (\n\t\t<ThemeProvider theme={themeComposed}>\n\t\t\t<CssBaseline />\n\t\t\t<RouterProvider router={router} />\n\t\t</ThemeProvider>\n\t);\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { App } from \"./App.tsx\";\n\nimport \"@fontsource/roboto/300.css\";\nimport \"@fontsource/roboto/400.css\";\nimport \"@fontsource/roboto/500.css\";\nimport \"@fontsource/roboto/700.css\";\n\nimport \"@fontsource/fira-code/300.css\";\nimport \"@fontsource/fira-code/400.css\";\nimport \"@fontsource/fira-code/500.css\";\nimport \"@fontsource/fira-code/700.css\";\n\nReactDOM.createRoot(\n\tdocument.getElementById(\"root\")!,\n).render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n);\n"],"names":["IconHexagonMultiple","props","jsx","SvgIcon","WithAppBar","location","children","seconadaryNav","Fragment","Paper","jsxs","Grid","IconButton","RouterLink","Typography","Stack","Error","error","useRouteError","useEffect","Container","Box","sortItems","rule","sortRules","items","compareFn","sortRule","extractFilterTags","queryString","filterTags","dbPromise","openDB","db","createProject","name","description","tags","tag","LZString","updateProject","projectId","prev","getProject","project","getProjectAll","projects","i","createTicket","title","content","updateTicket","ticketId","getTicket","ticket","getTicketAll","tickets","getTagsAll","uniqueTags","a","b","loaderHome","request","url","tagOptions","paramTags","PopoverButton","buttonProps","popoverProps","buttonRef","useRef","menuAnchor","setMenuAnchor","useState","Button","Popover","SortRuleMenu","onChange","MenuList","label","value","index","MenuItem","ListItemIcon","CheckRounded","ListItemText","StyledAutocomplete","width","fullWidth","options","Autocomplete","_","values","params","TextField","ProjectList","List","ListItem","ListItemSecondaryAction","OpenInNewRounded","Home","useLoaderData","submit","useSubmit","selectedTags","setSelectedTags","handleSortRuleChange","handleFilterSubmit","CreateNewFolderRounded","FilterListRounded","ExpandMoreRounded","themePalette","createTheme","alpha","themeComponent","themeComposed","editorLoader","loader","StyledEditor","Editor","parseMarkdown","unified","remarkParse","remarkGfm","remarkMath","remarkRehype","rehypeSanitize","rehypeKatex","rehypeDocument","rehypeStringify","Layout","childLeft","childRight","contentRef","contentHeight","setEditorHeight","topOffset","ProjectCreate","theme","useTheme","setName","setDescription","setSelectTags","handleSubmit","preveiwElement","event","loaderProjectCreate","loaderProjectInfo","json","isEditMode","slotEditor","slotPreview","ProjectInfo","loadedProject","setIsEditMode","setProject","useHotkeys","updatedProject","redirectToTicket","MenuBookRounded","CodeRounded","TicketCreate","setTitle","setContent","loaderTicketCreate","paramProjectId","loaderTicketInfo","TicketInfo","loadedTicket","setTicket","updatedTicket","redirectToProject","TicketList","loaderTicketHome","paramSortRule","projectOptions","tagFilters","TicketIdx","loadedSortRule","loadedTagFilters","selectedProject","setSelectedProject","redirectToTicketCreate","ButtonGroup","router","createHashRouter","App","ThemeProvider","CssBaseline","RouterProvider","ReactDOM","React"],"mappings":"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"}