import{h as A}from"./html-void-elements-CkdplsNl.js";import{s as w,f as O,h as q}from"./property-information-BosuZr9r.js";import{z as S}from"./zwitch-C2o2j-tx.js";import{s as m}from"./stringify-entities-DX2AxK7f.js";import{c as N}from"./ccount-c2V3InAJ.js";import{s as D}from"./comma-separated-tokens-CRUGqg4f.js";import{s as j}from"./space-separated-tokens-D7QSIrTI.js";import{w as p}from"./hast-util-whitespace-D4Wp6AEg.js";function v(n,s,e,t){return t.settings.bogusComments?"<?"+m(n.value,Object.assign({},t.settings.characterReferences,{subset:[">"]}))+">":"<!--"+n.value.replace(/^>|^->|<!--|-->|--!>|<!-$/g,o)+"-->";function o(r){return m(r,Object.assign({},t.settings.characterReferences,{subset:["<",">"]}))}}function R(n,s,e,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}const i=C(1),x=C(-1),B=[];function C(n){return s;function s(e,t,o){const r=e?e.children:B;let l=(t||0)+n,a=r[l];if(!o)for(;a&&p(a);)l+=n,a=r[l];return a}}const $={}.hasOwnProperty;function _(n){return s;function s(e,t,o){return $.call(n,e.tagName)&&n[e.tagName](e,t,o)}}const h=_({body:L,caption:f,colgroup:f,dd:T,dt:H,head:f,html:k,li:z,optgroup:U,option:I,p:P,rp:y,rt:y,tbody:Y,td:b,tfoot:F,th:b,thead:V,tr:G});function f(n,s,e){const t=i(e,s,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&p(t.value.charAt(0)))}function k(n,s,e){const t=i(e,s);return!t||t.type!=="comment"}function L(n,s,e){const t=i(e,s);return!t||t.type!=="comment"}function P(n,s,e){const t=i(e,s);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!e||!(e.type==="element"&&(e.tagName==="a"||e.tagName==="audio"||e.tagName==="del"||e.tagName==="ins"||e.tagName==="map"||e.tagName==="noscript"||e.tagName==="video"))}function z(n,s,e){const t=i(e,s);return!t||t.type==="element"&&t.tagName==="li"}function H(n,s,e){const t=i(e,s);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function T(n,s,e){const t=i(e,s);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function y(n,s,e){const t=i(e,s);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function U(n,s,e){const t=i(e,s);return!t||t.type==="element"&&t.tagName==="optgroup"}function I(n,s,e){const t=i(e,s);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function V(n,s,e){const t=i(e,s);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function Y(n,s,e){const t=i(e,s);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function F(n,s,e){return!i(e,s)}function G(n,s,e){const t=i(e,s);return!t||t.type==="element"&&t.tagName==="tr"}function b(n,s,e){const t=i(e,s);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}const J=_({body:Q,colgroup:W,head:M,html:K,tbody:X});function K(n){const s=i(n,-1);return!s||s.type!=="comment"}function M(n){const s=n.children,e=[];let t=-1;for(;++t<s.length;){const o=s[t];if(o.type==="element"&&(o.tagName==="title"||o.tagName==="base")){if(e.includes(o.tagName))return!1;e.push(o.tagName)}}return s.length>0}function Q(n){const s=i(n,-1,!0);return!s||s.type!=="comment"&&!(s.type==="text"&&p(s.value.charAt(0)))&&!(s.type==="element"&&(s.tagName==="meta"||s.tagName==="link"||s.tagName==="script"||s.tagName==="style"||s.tagName==="template"))}function W(n,s,e){const t=x(e,s),o=i(n,-1,!0);return e&&t&&t.type==="element"&&t.tagName==="colgroup"&&h(t,e.children.indexOf(t),e)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function X(n,s,e){const t=x(e,s),o=i(n,-1);return e&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&h(t,e.children.indexOf(t),e)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const u={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Z(n,s,e,t){const o=t.schema,r=o.space==="svg"?!1:t.settings.omitOptionalTags;let l=o.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(n.tagName.toLowerCase());const a=[];let c;o.space==="html"&&n.tagName==="svg"&&(t.schema=w);const g=tt(t,n.properties),d=t.all(o.space==="html"&&n.tagName==="template"?n.content:n);return t.schema=o,d&&(l=!1),(g||!r||!J(n,s,e))&&(a.push("<",n.tagName,g?" "+g:""),l&&(o.space==="svg"||t.settings.closeSelfClosing)&&(c=g.charAt(g.length-1),(!t.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!l&&(!r||!h(n,s,e))&&a.push("</"+n.tagName+">"),a.join("")}function tt(n,s){const e=[];let t=-1,o;if(s){for(o in s)if(s[o]!==null&&s[o]!==void 0){const r=et(n,o,s[o]);r&&e.push(r)}}for(;++t<e.length;){const r=n.settings.tightAttributes?e[t].charAt(e[t].length-1):void 0;t!==e.length-1&&r!=='"'&&r!=="'"&&(e[t]+=" ")}return e.join("")}function et(n,s,e){const t=O(n.schema,s),o=n.settings.allowParseErrors&&n.schema.space==="html"?0:1,r=n.settings.allowDangerousCharacters?0:1;let l=n.quote,a;if(t.overloadedBoolean&&(e===t.attribute||e==="")?e=!0:(t.boolean||t.overloadedBoolean&&typeof e!="string")&&(e=!!e),e==null||e===!1||typeof e=="number"&&Number.isNaN(e))return"";const c=m(t.attribute,Object.assign({},n.settings.characterReferences,{subset:u.name[o][r]}));return e===!0||(e=Array.isArray(e)?(t.commaSeparated?D:j)(e,{padLeft:!n.settings.tightCommaSeparatedLists}):String(e),n.settings.collapseEmptyAttributes&&!e)?c:(n.settings.preferUnquoted&&(a=m(e,Object.assign({},n.settings.characterReferences,{attribute:!0,subset:u.unquoted[o][r]}))),a!==e&&(n.settings.quoteSmart&&N(e,l)>N(e,n.alternative)&&(l=n.alternative),a=l+m(e,Object.assign({},n.settings.characterReferences,{subset:(l==="'"?u.single:u.double)[o][r],attribute:!0}))+l),c+(a&&"="+a))}function E(n,s,e,t){return e&&e.type==="element"&&(e.tagName==="script"||e.tagName==="style")?n.value:m(n.value,Object.assign({},t.settings.characterReferences,{subset:["<","&"]}))}function nt(n,s,e,t){return t.settings.allowDangerousHtml?n.value:E(n,s,e,t)}function st(n,s,e,t){return t.all(n)}const ot=S("type",{invalid:at,unknown:it,handlers:{comment:v,doctype:R,element:Z,raw:nt,root:st,text:E}});function at(n){throw new Error("Expected node, not `"+n+"`")}function it(n){const s=n;throw new Error("Cannot compile unknown node `"+s.type+"`")}const rt={},lt={},ct=[];function wt(n,s){const e=s||rt,t=e.quote||'"',o=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:mt,all:gt,settings:{omitOptionalTags:e.omitOptionalTags||!1,allowParseErrors:e.allowParseErrors||!1,allowDangerousCharacters:e.allowDangerousCharacters||!1,quoteSmart:e.quoteSmart||!1,preferUnquoted:e.preferUnquoted||!1,tightAttributes:e.tightAttributes||!1,upperDoctype:e.upperDoctype||!1,tightDoctype:e.tightDoctype||!1,bogusComments:e.bogusComments||!1,tightCommaSeparatedLists:e.tightCommaSeparatedLists||!1,tightSelfClosing:e.tightSelfClosing||!1,collapseEmptyAttributes:e.collapseEmptyAttributes||!1,allowDangerousHtml:e.allowDangerousHtml||!1,voids:e.voids||A,characterReferences:e.characterReferences||lt,closeSelfClosing:e.closeSelfClosing||!1,closeEmptyElements:e.closeEmptyElements||!1},schema:e.space==="svg"?w:q,quote:t,alternative:o}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function mt(n,s,e){return ot(n,s,e,this)}function gt(n){const s=[],e=n&&n.children||ct;let t=-1;for(;++t<e.length;)s[t]=this.one(e[t],t,n);return s.join("")}export{wt as t};
//# sourceMappingURL=hast-util-to-html-B01rvPa2.js.map
